"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1606c3a1-581d-5dc5-a209-10774ce487ef")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1085],{444576:(e,t,n)=>{n.d(t,{A7:()=>i,i4:()=>l,nt:()=>r});var a=n(302245),o=n(333370);let r=e=>e.library.localStyleSelection,l=(0,a.Mz)([r,(e,t)=>t],(e,t)=>e?.type===t?e:null),i=(0,a.Mz)([l,(e,t,n)=>n],(e,t)=>{if(!e)return null;let n=new Set,a=new Set;return e.folderNames.forEach(e=>{let r=t.find(t=>"STYLE_FOLDER"===t.type&&t.name===e);r&&((0,o.KU)(r).forEach(e=>{n.add(e.name)}),(0,o.dm)(r).forEach(e=>{a.add(e.node_id)}))}),{type:e.type,folderNames:n,styleIds:a}})},438299:(e,t,n)=>{let a;n.r(t),n.d(t,{DesignView:()=>p2});var o=n(411855),r=n(188507),l=n(786013),i=n(299321),s=n(966712),c=n(192437),d=n(392592),p=n(257360),m=n(818194),u=n(686046),E=n(862350),y=n(951792),_=n(288006),g=n(222903),h=n(181912),v=n(374626),f=n(915440),b=n(860601),S=n(154254),T=n(939863),N=n(393812),I=n(461837),P=n(256975),C=n(891869),A=n(136405),k=n(21584),w=n(88918),O=n(750293),x=n(349410),D=n(101505),R=n(672517),M=n(251960),L=n(456104),V=n(683694),K=n(723239),U=n(29680),F=n(335682),B=n(161325),G=n(279453),z=n(601607),Y=n(397065),W=n(147829),H=n(699857),$=n(463546),X=n(618247);let Q=(0,R.tf)(u.N);function J(){let e=(0,x.Ps)(),t=(0,F.tS)(),n=(0,N.BI)(),a=function(){let e;let t=(0,z.hr)(e=>e).getRoot(),n=t=>{for(let a of t.childrenNodes)(a.isTopLevelFrame()||"CANVAS"===a.type)&&(a.hasReadyStatus?e?e.getStatusInfo().lastUpdateUnixTimestamp<a.getStatusInfo().lastUpdateUnixTimestamp&&(e=a):e=a:("SECTION"===a.type||"CANVAS"===a.type)&&n(a))};return n(t),e?.getStatusInfo()}(),r=(0,B.wW)(a?.userId??null),l=!!a&&h.A.unix(a.lastUpdateUnixTimestamp).isAfter((0,h.A)().subtract(60,"day")),i=(0,H.U)("upsell"),c=f.Rs(G.HdA,{key:t??""},{enabled:!!t})?.data?.file?.hasPermission,d=(0,v.md)(V.LZ),p=(0,U.aV)(),u=(0,P._I)(),J=(0,P.U4)(),j=(0,v.md)(K.NT),q=(0,k.J)(),{show:Z,complete:ee,isShowing:et,uniqueId:en}=(0,L.e)({overlay:$.koo,priority:Y.N.OVERRIDING_MODAL,experiment:{check:e,predicate:e=>e,postCheck:()=>!0}},[j]);(0,o.useEffect)(()=>{Z({canShow:e=>("developer"===e||"software-development"===e)&&q&&d&&!u&&"loaded"===n.status&&!n.hasPendingRequest&&l&&J&&!p})},[Z,u,J,d,p,j,q,n,l]),(0,M.E)(en,"Enter Inspect Mode",()=>{et&&ee()});let ea=(0,w.BC)({dismissModal:ee,onRequestAccess:()=>{c&&i("handoff")}}),eo=o.useCallback(()=>{ee(),ea.hidden||ea.onClick(O.i$.Upsell)},[ee,ea]),er=o.createElement(Q,{newTab:!0,trusted:!0,trackingProperties:{trackingDescriptor:D.c.READ_THE_GUIDE},href:m.z},(0,T.tx)("dev_mode.onboarding_callout.read_the_guide")),el=o.createElement(o.Fragment,null,o.createElement("span",{className:X.XQ},o.createElement(g.O,null)),o.createElement("span",{className:S.cx.textBodyMediumStrong.$},(0,T.tx)("dev_handoff.status.mark_status_sentence_part.ready_for_dev"))),ei=o.createElement(o.Fragment,null,o.createElement("div",{className:X.DD},(0,T.tx)("dev_handoff.paywall.blocking_modal.title.dev_onboarding")),o.createElement("ul",null,o.createElement("li",{className:X.N$},(0,T.tx)("dev_handoff.paywall.blocking_modal.content.copy_code")),o.createElement("li",{className:X.N$},(0,T.tx)("dev_handoff.paywall.blocking_modal.content.track_design_changes")),o.createElement("li",{className:X.N$},(0,T.tx)("dev_handoff.paywall.blocking_modal.content.customize_plugins"))),o.createElement("div",{className:X.jg},c?(0,T.tx)("dev_handoff.paywall.blocking_modal.content.explore_for_free_with_link",{learnMoreLink:er}):(0,T.tx)("dev_handoff.paywall.blocking_modal.content.curious_to_learn_more",{learnMoreLink:er}))),es=(0,C.W)(),ec=E.hS({open:!0,onClose:b.lQ,preventUserClose:!0,recordingKey:"dev-mode-paywall-modal"});return o.createElement(W.M,{testId:"rfd-upsell-upsell",isShowing:et},o.createElement("div",{"data-editor-theme":"dev-handoff"},o.createElement(I.OM,null),o.createElement(R.fu,{name:"RFD Upsell Modal",properties:es,enabled:es?.gracePeriod!==void 0},o.createElement(y.bL,{width:392,manager:ec},o.createElement(_.vo,null,o.createElement("div",{className:X.XV},r.loading?"":(0,T.tx)("dev_handoff.upsell.user_marked_a design",{userName:r.user?.name||r.user?.handle,status:el})),o.createElement(_.nB,null,o.createElement(A.E,{imgSrc:(0,s.ck)("6d5e9cb0e9ec7fd5dd58425c5527dc8a78143a19"),content:ei,modalType:"RFD Upsell Modal",primaryButtonLabel:(0,T.tx)("dev_handoff.paywall.blocking_modal.button.request_access"),primaryButtonType:"request_access",primaryButtonOnClick:ea.hidden?void 0:eo,secondaryButtonLabel:(0,T.tx)("dev_handoff.paywall.blocking_modal.button.not_now"),secondaryButtonType:"not_now",secondaryButtonOnClick:ee})))))))}var j=n(964881),q=n(632430),Z=n(285381),ee=n(843495),et=n(441088),en=n(737499),ea=n(698993),eo=n(170960),er=n(100197),el=n(338400),ei=n(680760),es=n(402609),ec=n(720750),ed=n(293017),ep=n(931828),em=n(226055),eu=n(696673),eE=n(309798),ey=n(833629),e_=n(740280),eg=n(864114),eh=n(756159),ev=n(455263);function ef(){let e=(0,em.GS)(),{isShowing:t,complete:n,show:a}=(0,L.e)({overlay:$.N5c,priority:Y.N.SECONDARY_MODAL}),l=(0,r.wA)(),s=(0,U.aV)(),c=!!(0,eE.f)("ui_kits_intro_tooltip"),d=!!(0,eE.f)("seen_explore_ui_kits_blue_tooltip"),{hasAnyUiKit:p}=(0,eu.I7)(),m=(0,v.md)(eh.Cl),u=(0,ey.jO)(),E=(0,ev.t)(),y=F.q5()?.canEdit,_=(0,r.d4)(e=>e.leftPanel.activeTab===i.xae.LAYERS);return(o.useEffect(()=>{!y||!p||m||c||d||!u||s||E||!_||t||a()},[a,y,p,c,d,u,s,E,t,m,_]),o.useEffect(()=>{!_&&t&&n()},[_,t,n]),t)?o.createElement(e_.X,{isShowing:t,title:(0,T.tx)("rcs.ui_kits.jump_start_your_designs_with_ui_kits"),description:(0,T.tx)("rcs.ui_kits.grab_pre_built_ui",{strongAssets:o.createElement("strong",{style:{display:"contents"}},(0,T.tx)("design_systems.assets_panel.assets"))}),primaryCta:{label:(0,T.tx)("rcs.presets_baseline.try_it"),type:"button",onClick:()=>{l(ed.FP({tab:i.xae.ASSETS})),n()},ctaTrackingDescriptor:D.c.PRESETS_TRY_IT},position:e?eg.Q.UI3_EDITOR_TOP_LEFT:eg.Q.EDITOR_TOP_LEFT,trackingContextName:"UI Kits Intro Tooltip",userFlagOnShow:"ui_kits_intro_tooltip",onClose:()=>{l(ep.b({seen_explore_ui_kits_blue_tooltip:!0})),n()}}):null}var eb=n(129318),eS=n(582947),eT=n(106757),eN=n(860178),eI=n(788256),eP=n(601538),eC=n(629019),eA=n.n(eC),ek=n(776250),ew=n(320063),eO=n(646240),ex=n(752553),eD=n(864089),eR=n(799569),eM=n(135876),eL=n(47506),eV=n(340159),eK=n(777078),eU=n(373119),eF=n(106112),eB=n(187882),eG=n(545317),ez=n(239177),eY=n(666456);let eW="starting_points_templates_modal--templateOption--qYXkm",eH="starting_points_templates_modal--templateOptionTitle--DmVPR",e$="starting_points_templates_modal--verticalTemplateImage--kAzQz";var eX=n(630834),eQ=(e=>(e.DESKTOP="desktop",e.MOBILE="mobile",e.WEBSITE="website",e))(eQ||{});let eJ={x:0,y:0},ej={website:{x:0,y:1600},mobile:{x:0,y:300},desktop:{x:0,y:300}},eq={website:.1,mobile:.225,desktop:.1},eZ=e=>{let t=(0,s.Ay)().starting_points;switch(e){case"basics":return t?.figma_basics_hub_file_id;case"desktop":return t?.desktop_templates_hub_file_id;case"mobile":return t?.mobile_templates_hub_file_id;case"website":return t?.website_templates_hub_file_id}};function e0({onClose:e}){let t=(0,r.wA)(),n=o.useRef(null),[a,l]=o.useState(!1),[c,d]=o.useState(!1),[p,m]=o.useState(!1),[u,E]=o.useState(!1),[y,_]=o.useState(window.innerWidth),g=(0,eU.q)(),h=(0,F.tS)(),f=(0,r.d4)(e=>e.fileVersion),b=(0,r.d4)(e=>e.mirror.sceneGraph),S=g&&(0,eI.Qf)(b),N=!!S&&0===S.childrenGuids.length,[I]=(0,ex.IT)((0,eV.tH)({})),P=!!(0,s.kc)().starting_points_ghost_previews,{insertTemplate:C}=(0,eK.Fz)(),A=(0,ez.g)(),k=(0,eO.Xr)(eY.Yq),w=(0,eO.Xr)(eY.bj),[O,x]=o.useState(!1),M=(0,eB.GQ)(),L=(0,eG.P)();(0,ew.h)(()=>{let e=()=>{_(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),o.useEffect(()=>{E(M+50>y/2-257||y-L-50<y/2+257),m(M+50>y/2-365||y-L-50<y/2+365)},[M,L,y]);let V=o.useCallback(()=>{if(!P||"loaded"!==I.status||!I.data)return;let e=[];for(let t of Object.values(eQ)){let n=eZ(t);if(!n)return;let a=I.data[n];if(!a)return;let o={type:eF.n.HubFile,template:a};e.push(o)}Promise.all(e.map(e=>v.zl.get((0,eY.Re)({fileKey:h,fileVersion:f,template:e})))).then(()=>{x(!0)}).catch(e=>{console.error("Failed to load template buffers",e),x(!0)})},[h,f,I,P]);if(o.useEffect(()=>{"loaded"!==I.status||O||V()},[I,O,V]),o.useEffect(()=>{g&&S&&!N&&!c&&e()},[g,S,N,c,e]),!(0,s.kc)().starting_points_modal)return null;let K=async n=>{if("loaded"!==I.status)return;l(!0);let a=eZ(n);if(!a)return;let o=I.data[a];o&&(P&&"basics"!==n?await (0,eK.Zg)({insert:()=>w({selectTemplateAfterCommit:!1,moveViewportAfterCommit:!1,priority:"user-visible",editScopeType:i.zkO.USER}),template:{template:o,type:eF.n.HubFile},fileKey:h,dispatch:t,triggeredFrom:"starting-points",userTriggered:!1}):await C({template:{template:o,type:eF.n.HubFile},userTriggered:!1,editScopeType:i.zkO.ONBOARDING,triggeredFrom:"starting-points",templateInsertionDirection:i.hKj.RIGHT}),"basics"===n?(0,eL.YQ)({id:"starting_points_basics_template_inserted"}):(0,eL.YQ)({id:"starting_points_template_inserted"}),e(),l(!1))},U=o.createElement(R.$z,{onClick:()=>K("basics"),trackingProperties:{trackingDescriptor:D.c.LEARN_THE_BASICS}},(0,T.tx)("starting_points.learn_the_basics")),B=e=>{if((0,ek.sx)("Starting Points Template Option Hover",{template:e}),!P)return;let n=eZ(e);if(!n||!I.data)return;let a=I.data[n];if(!a)return;let o={type:eF.n.HubFile,template:a},r=eq[e];window.innerWidth>1700&&(r*=1.5),(0,eK.Zg)({insert:()=>A(o,{moveViewportAfterPreview:!0,priority:"user-visible",previewManager:{nodeType:i.Z6A.CANVAS},position:eJ,viewportOptions:{position:ej[e],scale:r,duration:0}}),template:o,fileKey:h,dispatch:t,triggeredFrom:"starting-points",userTriggered:!1,isPreview:!0})},G=()=>{P&&k()};return o.createElement(R.fu,{name:"Starting Points Modal"},o.createElement("div",{className:"starting_points_templates_modal--startingPointsTemplatesModalPositioner--R8g3u"},o.createElement(eM.x,{isLoading:a,className:"starting_points_templates_modal--loadingSpinner--UOrjg"},()=>o.createElement("div",{className:eA()({"starting_points_templates_modal--startingPointsTemplatesModal--dUQte":!0,"starting_points_templates_modal--isHidden--jVN1L":u,"starting_points_templates_modal--isCondensedView--3tVz6":p}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),ref:n},o.createElement("div",{className:"starting_points_templates_modal--modalInstructions--ZtdTL"},o.createElement("div",{className:"starting_points_templates_modal--modalTitle--HT3eZ"},(0,T.t)("starting_points.what_do_you_want_to_make_today")),o.createElement("div",{className:"starting_points_templates_modal--modalLearnMore--g-GWo"},(0,T.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:U}))),o.createElement("div",{className:"starting_points_templates_modal--optionContainer--mYEsG"},o.createElement(R.$z,{className:eW,onClick:()=>K("website"),onMouseEnter:()=>B("website"),onMouseLeave:G,trackingProperties:{trackingDescriptor:D.c.WEBSITE_TEMPLATES}},o.createElement("div",{className:eH},(0,T.t)("starting_points.website")),o.createElement(eD.oW,{className:e$,src:(0,s.ck)("9b8475fdab7c1ed3cd1c0d16b957d65a80840b74"),alt:"Website template"})),o.createElement(R.$z,{className:eW,onClick:()=>K("mobile"),onMouseEnter:()=>B("mobile"),onMouseLeave:G,trackingProperties:{trackingDescriptor:D.c.MOBILE_APP_TEMPLATES}},o.createElement("div",{className:eH},(0,T.t)("starting_points.mobile_app")),o.createElement(eD.oW,{className:e$,src:(0,s.ck)("b262e57bed515b9f0da45ae54fa43824d9704c14"),alt:"Mobile app template"})),o.createElement(R.$z,{className:eW,onClick:()=>K("desktop"),onMouseEnter:()=>B("desktop"),onMouseLeave:G,trackingProperties:{trackingDescriptor:D.c.DESKTOP_APP_TEMPLATES}},o.createElement("div",{className:eH},(0,T.t)("starting_points.desktop_app")),o.createElement(eD.oW,{className:"starting_points_templates_modal--desktopTemplateImage--3kplg",src:(0,s.ck)("cb2f715253dacb4e7d3fb211ff2792fc28a38832"),alt:"Desktop app template"}))),o.createElement("div",{className:"starting_points_templates_modal--modalLearnMoreFooter--pSvfX"},(0,T.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:U})),o.createElement(eR.Jn,{className:"starting_points_templates_modal--closeButton--io-14",onClick:e,innerText:"close",svg:eX.default})))))}let e1=(0,eS.r1)("dismissed_starting_points_templates_modal");function e2(){let e=(0,r.wA)(),t=!!(0,s.kc)().starting_points_modal,n=(0,x.GM)(),a=(0,eb.QL)(eP.E_.key)===eP.E_.value,l=(0,U.aV)(),i=(0,r.d4)(e=>e.mirror.sceneGraph),c=!eI.Qf(i)?.childrenNodes?.length,d=(0,F.q5)(),p=(0,eN.TA)(),m=d?.creatorId===p,u=(0,v.md)(K.Fy),E=(0,v.md)(eT.UQ),y=!(0,eE.f)("not_gen_0"),_=(0,em.GS)(),g=(0,v.md)(e1),h=(0,s.Ay)().starting_points,{show:f,isShowing:b,complete:S}=(0,L.e)({overlay:$.EYw,priority:Y.N.OVERRIDING_MODAL+1,experiment:{check:n,predicate:e=>e,postCheck:(e,t)=>!t}},[u,g]);return(o.useEffect(()=>{t&&m&&!l&&c&&!b&&(a?f():y&&E&&_&&h&&f({canShow:e=>!e}))},[t,m,l,c,b,a,y,E,_,h,f]),b)?o.createElement(e0,{onClose:()=>{g.data||e(ep.b({dismissed_starting_points_templates_modal:!0})),S()}}):null}var e4=n(904669),e8=n(394828),e3=n(340514),e5=n(353166),e7=n(433195);let e6=(0,eS.r1)(e7.WX),e9=(0,eS.r1)(e7.b6),te=!1;function tt(){let e=(0,r.wA)(),t=(0,v.md)(V.wg),n=(0,U.aV)(),a=(0,v.md)(K.mp),l=(0,P._I)(),i=(0,em.GS)(),c=(0,v.md)(e9),d=(0,v.md)(e6),{uniqueId:p,show:m,complete:u,isShowing:E}=(0,L.e)({overlay:$.kc4,priority:Y.N.SECONDARY_MODAL},[d,c,a]),y=(0,H.U)("modal"),_=o.useCallback(()=>{!n&&!te&&t&&l&&(0!==(e4.UN().getCurrentPage()?.childrenGuids.length||0)&&m({canShow:(e,t,n)=>!e&&!t&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n)}),te=!0)},[m,l,t,n]);function g(){e(ep.b({[e7.WX]:!0})),u()}o.useEffect(()=>{i||_()},[_,i]),(0,M.E)(p,(0,e5.w)("design"),()=>{_()}),o.useEffect(()=>{"loaded"===d.status&&d.data&&u()},[d,u]),(0,M.E)(p,"Enter Inspect Mode",()=>{E&&g()});let h=(0,em.GS)()?eP.ON:eP.JN;return o.createElement(e3.rq,{isShowing:E,trackingContextName:e7.WX,onClose:g,targetKey:h,title:(0,T.tx)("dev_handoff.annotations_introduction_overlay.title"),media:o.createElement(e8.y,{src:(0,s.ck)("5b9addc96424c11577a1ec91e1bbadcd786fe343"),alt:(0,T.t)("dev_handoff.annotations_introduction_overlay.image_alt"),aspectRatio:1280/720}),description:(0,T.tx)("dev_handoff.annotations_introduction_overlay.description"),primaryCta:{label:(0,T.tx)("dev_handoff.annotations_introduction_overlay.primary_cta"),type:"button",onClick:function(){y("handoff")},ctaTrackingDescriptor:D.c.SHOW_ME}})}var tn=n(502665);let ta=(0,eS.r1)(e7.b6),to=(0,eS.r1)(e7.WX),tr=!1,tl=!1;function ti(){let e=(0,r.wA)(),t=(0,U.aV)(),n=(0,v.md)(K.mp),a=(0,v.md)(tn.N),l=(0,er.J2)(i.Ez5.annotationObserver().annotationInfoByTlf),c=v.md(F.yV)?.creatorId,d=(0,v.md)(ta),p=(0,v.md)(to),{uniqueId:m,show:u,complete:E,isShowing:y}=(0,L.e)({overlay:$.kc4,priority:Y.N.SECONDARY_MODAL},[d,p,n,a]),_=(0,H.U)("modal"),g=l.size>0;function h(){e(ep.b({[e7.b6]:!0})),E()}o.useEffect(()=>{t&&(tl=!0),!t&&!tr&&tl&&g&&(u({canShow:(e,t,n,a)=>!e&&!t&&c!==a&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n)}),tr=!0)},[g,t,c,u]),o.useEffect(()=>{"loaded"===d.status&&d.data&&E()},[d,E]),(0,M.E)(m,"Enter Inspect Mode",()=>{y&&h()});let f=(0,em.GS)()?eP.ON:eP.JN;return o.createElement(e3.rq,{isShowing:y,trackingContextName:e7.b6,onClose:h,targetKey:f,title:(0,T.tx)("dev_handoff.annotations_upsell_overlay.title"),media:o.createElement(e8.y,{src:(0,s.ck)("e84a2faeb510847abd7bfb9c15a74ef974bb4c13"),alt:(0,T.t)("dev_handoff.annotations_introduction_overlay.image_alt"),aspectRatio:1280/720}),description:(0,T.tx)("dev_handoff.annotations_upsell_overlay.description"),primaryCta:{label:(0,T.tx)("dev_handoff.annotations_upsell_overlay.primary_cta"),type:"button",onClick:function(){_("handoff")},ctaTrackingDescriptor:D.c.OPEN_DEV_MODE},secondaryCta:{label:(0,T.tx)("dev_handoff.annotations_upsell_overlay.secondary_cta"),type:"button",onClick:E,ctaTrackingDescriptor:D.c.NOT_NOW}})}var ts=n(152811),tc=n(363668),td=n(622901),tp=n(344076),tm=n(54900),tu=n(812245),tE=n(199465);function ty({children:e}){return o.createElement(tE.G.Provider,{value:{loggerEventName:"design_navigate"}},e)}var t_=n(30637),tg=n(138369),th=n(125708),tv=n(809831),tf=n(818),tb=n(617453),tS=n(213190),tT=n(336599),tN=n(428467),tI=n(939562),tP=n(239671),tC=n(7860),tA=n(716622),tk=n(697551),tw=n(914905),tO=n(759096),tx=n(270296),tD=n(7674),tR=n(69814),tM=n(776621),tL=n(316081),tV=n(215122),tK=n(331596),tU=n(848661),tF=n(618056),tB=n(279145),tG=n(291251),tz=n(67151),tY=n(424587),tW=n(388393),tH=n(275556),t$=n(297666),tX=n(358145),tQ=n(886653),tJ=n(153234),tj=n(437304),tq=n(286640),tZ=n(763658),t0=n(738269),t1=n(395281),t2=n(452246),t4=n(906899),t8=n(798099),t3=n(356390),t5=n(416095),t7=n(237929),t6=n(444576),t9=n(945020),ne=n(173454),nt=n(922358),nn=n(602029),na=n(7959),no=n(109388),nr=n(75395),nl=n(343887),ni=n(463420),ns=n(96796),nc=n(397863),nd=n(932345),np=n(46481),nm=n(498606),nu=n(498750),nE=n(255942),ny=n(837746);let n_="styles--contextMenu--C-hVT",ng="styles--caret--DZmzh",nh="styles--rowSelectedExpanded--MGvUV",nv="styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip";function nf({childLeft:e,childRight:t,deleteSelectedItems:n,forceShowHoverBorder:a,hideStylePreview:r,index:l,inspectStyleSelected:i,isDragging:s,isEditable:c,isRenaming:d,isCollapsed:p=!0,isLastChildOfSelection:m=!1,isFirstChildOfSelection:u=!1,isFolder:E,level:y,name:_,nameRef:g,onContextMenu:h,onCreateFolder:v,onDoubleClick:f,onHoverChange:b,onMouseDown:S,onMouseMove:T,recordingKey:N,rowRef:I,secondaryName:P,selected:C,selectedSecondary:A,stopRenamingItem:k,tooltipData:w}){let O=o.useRef(null),[x,D]=o.useState(_),[R,M]=o.useState(!1),L=(0,em.GS)(),V=o.useCallback(e=>{if(e){let t=no.findDOMNode(e);t&&t.select()}},[]);o.useEffect(()=>{D(_)},[_]);let K=o.useCallback(e=>{""===e.trim()?(k(l,_),D(_)):k(l,e)},[l,_,k]),U=(0,tJ.AF)((0,tJ.Pt)(N,"text-input"),"change",o.useCallback(e=>{D(e.currentTarget.value)},[D])),F=(0,tJ.v_)((0,tJ.Pt)(N,"text-input"),"keydown",e=>{e.keyCode===nu.Uz.ESCAPE?(k(l,_),D(_)):e.keyCode===nu.Uz.ENTER&&K(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),B=(0,tJ.v_)(N,"keydown",e=>{c&&!d&&(e.keyCode===nu.Uz.BACKSPACE||e.keyCode===nu.Uz.DELETE)?n():c&&!d&&e.keyCode===nu.Uz.G&&(0,nu.Fo)(e)?(v(),e.preventDefault()):!d&&e.nativeEvent&&t3.Y5.forwardKeyboardEvent(e.nativeEvent)}),G=o.useCallback(()=>{K(x)},[K,x]),z=(0,tJ.rf)(N,"contextmenu",e=>{h(e)}),Y=(0,tJ.rf)(N,"mousemove",e=>{T(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),W=(0,tJ.rf)(N,"mousedown",e=>{S(e),r()}),H=(0,tJ.rf)(N,"mouseenter",o.useCallback(()=>{M(!0),b?.(!0)},[M,b])),$=o.useCallback(()=>{M(!1),b?.(!1)},[M,b]),X=(0,tJ.rf)(N,"dblclick",o.useCallback(e=>{f(e)},[f])),Q=Math.min((y-1)*3,18),J=ny.jNX-4-Q,j=J-(L?7:5),q=R&&!d||i?j:J,Z=C||A,ee=eA()({[nh]:!p&&Z,"styles--folderSecondarySelected--SL0JY":A||C&&!u,[nv]:A&&!L}),et=eA()({[nv]:Z,[nh]:!m&&Z}),en=eA()("styles--rowWithBorder--bphZ-",{[ee]:E,[et]:!E,"styles--rowWithHover--RWNMH":!Z&&(a||R&&!s)}),ea=o.createElement("div",{className:d?"styles--rowContentsRenaming--oDTtO styles--rowContents--37JBy":"styles--rowContents--37JBy",key:_,style:L?{width:"100%"}:{gridColumnEnd:`span ${q}`}},d?o.createElement(na.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"styles--input--LbjR0",onBlur:G,onChange:U,onKeyDown:F,ref:V,spellCheck:!1,value:x}):o.createElement(o.Fragment,null,o.createElement("div",{className:"styles--name--KWZ8d ellipsis--ellipsis--Tjyfa",ref:g,...w},_),P&&o.createElement("div",{className:"styles--textStyle--DiUv4"},P)));return o.createElement(nn.e,{className:en,dragging:s,hideGrabber:!0,onContextMenu:z,onKeyDown:B,onMouseDown:W,onMouseEnter:H,onMouseLeave:$,onMouseMove:Y,onDoubleClick:X,ref:(0,nE.A)(O,I),selected:C,selectedSecondary:!1,tabIndex:0},Q>0&&o.createElement("span",{style:{gridColumnEnd:`span ${Q}`}}),o.createElement("div",{className:"styles--childLeftContainer--Hu61K",style:L?{gridColumnEnd:`span ${q}`}:void 0},e,L&&ea),!L&&ea,t)}var nb=n(949207),nS=n(432023),nT=n(501191),nN=n(660164);function nI({deleteSelectedItems:e,folder:t,folderNameToNestUnder:n,hideStylePreview:a,index:l,isCollapsed:i,isDragging:s,isEditable:c,isRenaming:d,isTemporarilyExpanded:p,isFirstChildOfSelection:m,level:u,onContextMenu:E,onCreateFolder:y,onMouseDown:_,onMouseMove:g,onRenameItem:h,recordingKey:v,selected:f,selectedSecondary:b,stopRenamingItem:S,temporarilyExpandFolder:N,toggleFolder:I}){let P=(0,r.wA)(),[C,A]=o.useState(!1),k=o.useRef(null),w=o.useRef(null),O=C&&!d&&c,x=o.useCallback(()=>{I(!i)},[i,I]),D=o.useCallback(e=>{e.target!==w.current&&t.styleTypeSection&&h(t.name,!1,t.styleTypeSection)},[t.name,t.styleTypeSection,h]);o.useEffect(()=>{if(C&&s&&i){let e=setTimeout(()=>{N(t.name)},1e3);return()=>clearTimeout(e)}},[C,s,i,N,t]);let R=o.useCallback(()=>{let e=(0,nd.Zk)(t.styleTypeSection),n=k.current?.getBoundingClientRect();e&&n&&P(t4.Zs({rowLeft:n.left,rowTop:n.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:e}))},[k,t.name,t.styleTypeSection,P]);return o.createElement(nf,{deleteSelectedItems:e,forceShowHoverBorder:n===t.name,hideStylePreview:a,index:l,isDragging:s,isEditable:c,isRenaming:d,isCollapsed:i,isFolder:!0,isFirstChildOfSelection:m,level:u,name:(0,t7.kH)(t.name),onContextMenu:E,onCreateFolder:y,onDoubleClick:D,onHoverChange:A,onMouseDown:_,onMouseMove:g,onRenameItem:h,recordingKey:v,selected:f,selectedSecondary:b,stopRenamingItem:S,rowRef:e=>{e&&(k.current=no.findDOMNode(e))},childLeft:o.createElement(nr.E,{onClick:x,className:"styles--caretContainer--4-dqw",ref:w},o.createElement(np.U,{svg:i&&!p?nS.A:nb.A,className:ng},i&&!p?o.createElement(ni.k,{className:ng}):o.createElement(ns.O,{className:ng}))),childRight:O&&o.createElement(na.$4,null,o.createElement(nl.K,{recordingKey:tJ.Pt(v,"addButton"),"aria-label":(0,T.t)("design_systems.styles.tooltips.create"),onClick:R,htmlAttributes:{"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.styles.tooltips.create")}},o.createElement(np.U,{svg:nT.A,fallbackSvg:nN.A,children:o.createElement(nc.x,null)})))})}var nP=n(196367),nC=n(221768),nA=n(91408),nk=n(378905),nw=n(44892),nO=n(137906),nx=n(720384),nD=n(162502);function nR({deleteSelectedItems:e,hideStylePreview:t,index:n,isDragging:a,isEditable:l,isRenaming:i,isLastChildOfSelection:s,level:c,onContextMenu:d,onCreateFolder:p,onInspectStyle:m,onMouseDown:u,onMouseMove:E,onRenameItem:y,recordingKey:_,selected:g,selectedSecondary:h,stopRenamingItem:v,dsStyle:f,stylePreviewShown:b,updateContextMenuStyleRef:S,updateSelection:N,updateFocusRowRef:I}){let[P,C]=o.useState(!1),A=(0,r.wA)(),k=o.useRef(null),w=o.useRef(null),O=(0,em.GS)(),x=o.useCallback(()=>{l&&y(f.node_id,!0,f.style_type)},[y,f.node_id,f.style_type,l]),D=b.isShown&&!b.isCreating&&b.style.node_id===f.node_id&&(0,nk.EF)(b.style,f),R=P&&!i||D,M=o.useCallback(function(){let e=w.current;if(e){let t=e.getBoundingClientRect();D?A(t4.sw()):(A(t4.rk({style:f,rowTop:t.top,rowLeft:t.left})),m(f),N({type:f.style_type,folderNames:new Set,styleIds:new Set(f.node_id)}))}A(ed.XE())},[A,m,N,f,D]),L=o.useCallback(e=>{(2===e.button||e.ctrlKey)&&S(w.current),u(e),D&&M()},[M,u,D,S]),V=k.current,K=!!V&&V.offsetWidth<V.scrollWidth,U=o.useMemo(()=>!a&&f.description&&K?{"data-tooltip-type":nm.Ib.SPECIAL,"data-tooltip":nx.Z,"data-tooltip-style-name":(0,t7.kH)(f.name),"data-tooltip-style-description":f.description,"data-tooltip-max-width":ny.jNX*(0,nA.hG)(ny.dGl)}:null,[K,a,f.name,f.description]),F="TEXT"===f.style_type&&f.meta?.style_thumbnail?f.meta.style_thumbnail:null;return o.createElement(nf,{deleteSelectedItems:e,hideStylePreview:t,index:n,inspectStyleSelected:D,isDragging:a,isEditable:l,isRenaming:i,isFolder:!1,isLastChildOfSelection:s,level:c,name:(0,t7.kH)(f.name),nameRef:k,onContextMenu:d,onCreateFolder:p,onDoubleClick:x,onHoverChange:C,onMouseDown:L,onMouseMove:E,onRenameItem:y,recordingKey:_,rowRef:e=>{if(e){let t=no.findDOMNode(e);I&&I(t),w.current=t}},secondaryName:F&&(0,nw.P$)(F),selected:g,selectedSecondary:h,stopRenamingItem:v,tooltipData:U,childLeft:o.createElement(o.Fragment,null,o.createElement(nO.zi,{dsStyle:f,disableTooltip:!0}),g&&"FILL"===f.style_type&&o.createElement("div",{className:"styles--selectedRing--UniEc"})),childRight:R&&o.createElement(na.$4,null,o.createElement("div",{style:{gridColumnEnd:"span 1"}}),O?o.createElement(nP.d,{recordingKey:tJ.Pt(_,"customButton"),toggled:D,onClick:M,htmlAttributes:{"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":l?(0,T.t)("design_systems.styles.edit_style"):(0,T.t)("design_systems.styles.view_style"),onMouseDown:t8.dG},children:o.createElement(np.U,{svg:nD.A},o.createElement(nC.A,null)),"aria-label":l?(0,T.t)("design_systems.styles.edit_style"):(0,T.t)("design_systems.styles.view_style")}):o.createElement(na.YW,{className:g?"styles--showOnSelectedRowHover--Lcf7e styles--showOnRowHover--OUqRT":"styles--showOnRowHover--OUqRT",recordingKey:tJ.Pt(_,"customButton"),"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":l?(0,T.t)("design_systems.styles.edit_style"):(0,T.t)("design_systems.styles.view_style"),selected:D,onMouseDown:t8.dG,onClick:M},o.createElement(np.U,{svg:nD.A},o.createElement(nC.A,null))))})}function nM({styleType:e,children:t}){let n=!(0,U.p8)("isReadOnly");return o.createElement("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7"},n?o.createElement(nL,{styleType:e,recordingKey:`style-section-header-${e}`}):o.createElement("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA"},(0,t5.QT)(e)),t)}function nL({styleType:e,recordingKey:t}){let[n,a]=o.useState(!1),l=(0,r.wA)(),i=o.useRef(null),s=o.useCallback(()=>{let t=(0,nd.Zk)(e),n=i.current?.getBoundingClientRect();t&&n&&l(t4.Zs({rowLeft:n.left,rowTop:n.top,styleType:e,inheritStyleKeyField:t}))},[i,e,l]);return o.createElement("div",{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),ref:i},o.createElement(na.JU,{className:"styles--styleTypeSectionRowLabel--PrKm-"},(0,t5.QT)(e)),o.createElement("div",{style:{visibility:n?"visible":"hidden"}},o.createElement(nl.K,{recordingKey:tJ.Pt(t,"addButton"),"aria-label":(0,T.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,t5.XV)(e).toLowerCase()}),onClick:s,htmlAttributes:{"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,t5.XV)(e).toLowerCase()})}},o.createElement(np.U,{svg:nT.A,fallbackSvg:nN.A,children:o.createElement(nc.x,null)}))))}nM.displayName="StyleTypeSection";var nV=n(268537),nK=n(318812),nU=n(333370);let nF=nV.ms,nB=nV.c$,nG=nV.wv,nz="styles-by-type-context-menu",nY=.75*(0,nA.hG)(ny.uj0);function nW({styleRowRef:e,onEditStyle:t,onRenameItem:n,onCreateFolder:a,onDeleteItems:l,onCutItems:i,onPasteItems:s,styleType:c}){let d=(0,nK.Um)(),p=(0,r.d4)(e=>e.library.localStyleSelection),m=o.useMemo(()=>p&&p.type===c&&d?.type===nz?(0,nU.QA)(p,d.data.uiList):[],[p,d,c]),u=o.useMemo(()=>(0,nU.Ug)(m).map(e=>e.node_id),[m]),E=u.length;return d&&u.length?o.createElement(nH,{styleRowRef:e,selectedItems:m,numStyles:E,dropdownShown:d,onEditStyle:t,onRenameItem:n,onCreateFolder:a,onDeleteItems:l,onCutItems:i,onPasteItems:s}):o.createElement("div",null)}function nH({styleRowRef:e,selectedItems:t,numStyles:n,dropdownShown:a,onEditStyle:l,onRenameItem:s,onCreateFolder:c,onDeleteItems:d,onCutItems:p,onPasteItems:m}){let u=(0,r.wA)();o.useEffect(()=>(i.glU.computePastableStyleCount(),()=>{i.glU.clearPastableStyleCount()}),[]);let E=(0,r.d4)(e=>e.mirror.appModel.pastableStyleCount),y=!!F.q5()?.canEdit,_=o.useCallback(()=>{if(!t.length||t[0].type!==ne.PW.STYLE)return;let n=t[0];if(e){let t=e.getBoundingClientRect();u(t4.rk({style:n,rowTop:t.top,rowLeft:t.left})),u(ed.XE())}l(n)},[u,t,l,e]),g=o.useCallback(()=>{if(!t.length||t[0].type===ne.PW.STYLE)return;let e=t[0];s(e.name,!1,e.styleTypeSection)},[s,t]);if(-1===E)return o.createElement("div",null);if(!y)return n>1?o.createElement("div",null):o.createElement(nF,{style:a.data.position,className:n_},o.createElement(nB,{recordingKey:"edit-style-option",onClick:_},(0,T.tx)("design_systems.styles.view_style")));let h=1===n&&(t[0].type===ne.PW.STYLE?o.createElement(nB,{recordingKey:"edit-style-option",onClick:_},(0,T.tx)("design_systems.styles.edit_style")):o.createElement(nB,{recordingKey:"rename-folder-option",onClick:g},(0,T.tx)("design_systems.styles.rename_folder")));return o.createElement(nF,{style:a.data.position,className:n_},o.createElement(nB,{recordingKey:"create-folder-option",onClick:c},(0,T.tx)("design_systems.styles.add_new_folder")),h,o.createElement(nB,{recordingKey:"delete-style-option",onClick:d},(0,T.tx)("design_systems.styles.delete_styles",{numStyles:n})),o.createElement(nG,null),o.createElement(nB,{recordingKey:"cut-style-option",onClick:p},(0,T.tx)("design_systems.styles.cut_styles",{numStyles:n})),!!E&&o.createElement(nB,{recordingKey:"paste-style-option",onClick:m},(0,T.tx)("design_systems.styles.paste_styles",{numStyles:E})))}var n$=n(927457),nX=n(710752),nQ=n(582288),nJ=n(884909),nj=n(304173),nq=n(405206),nZ=n(298543),n0=n(184027),n1=n(608974),n2=n(257812),n4=n(319431),n8=n(914110);let n3="local-style-creation-dropdown";function n5(){let e=(0,r.wA)(),t=(0,o.useContext)(n0.lk),n=!(0,U.p8)("isReadOnly"),a=o.useRef(null),l=o.useRef(null),i=a.current,s=(0,nK.Um)(),c=s?.type===n3,d=s?.data?.targetRect,p="localStyleHeader",m=0===(0,tO.Bs)().length,u=(0,r.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),E=o.useMemo(()=>d||(c&&i?i.getBoundingClientRect():null),[d,i,c]),y=()=>{e(t0.oB())},_=()=>{e(t0.j7({type:n3}))},g=t=>{t.stopPropagation(),e(t4.YG());let n=a.current;c?y():n&&((0,ek.sx)("editor-local-styles-dropdown-show"),_())},h=e=>{y();let n=(0,nd.Zk)(e),a=l.current?.getBoundingClientRect();n&&a&&t({styleType:e,inheritStyleKeyField:n,rowLeft:a.left,rowTop:a.top})},v=m&&!c&&!u;return o.createElement(na.fI,{className:v?"styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR":"styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",forwardedRef:l},o.createElement(na.xZ,{className:"styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez",onMouseDown:e=>v&&g(e),onClick:e=>e.stopPropagation()},(0,T.tx)("design_systems.styles.local_styles")),n&&o.createElement(o.Fragment,null,o.createElement(na.K0,{ref:a,onMouseDown:g,onClick:e=>e.stopPropagation(),className:c?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.create_style.create_style"),recordingKey:tJ.Pt(p,"addButton")},o.createElement(np.U,{svg:nT.A,fallbackSvg:nN.A},o.createElement(n$.e,null))),c&&E&&o.createElement(nZ.Cf,{targetRect:E,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0},t5.og.map(e=>{let{icon:t,label:n}=function(e){switch(e){case"TEXT":return{icon:o.createElement(np.U,{svg:n8.A},o.createElement(nX.e,null)),label:(0,T.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:o.createElement(np.U,{svg:n2.A},o.createElement(nQ.G,null)),label:(0,T.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:o.createElement(np.U,{svg:n4.A},o.createElement(nJ.E,null)),label:(0,T.t)("design_systems.styles.dropdown.grid")};case"EFFECT":return{icon:o.createElement(np.U,{svg:n1.A},o.createElement(nj.n,null)),label:(0,T.t)("design_systems.styles.dropdown.effect")};default:throw(0,tz.j)(e),Error(`Invalid style type: ${e}`)}}(e),a=t=>{t.stopPropagation(),h(e)};return o.createElement(nV.c$,{key:e,className:"styles--createStyleDropdownRow--7iCXQ",onClick:a,onPointerUp:a,recordingKey:tJ.Pt(p,`dropdown-option-${e}`)},o.createElement(nq.Nu,null,t),n)}))))}let n7="collapsed-style-folders";function n6({scrollContainer:e,recordingKey:t}){let n=(0,tO.Bs)(),a=(0,U.p8)("isReadOnly");return 0===n.length&&a?null:o.createElement(tZ.k,{name:"local_styles_panel"},o.createElement(na.Zk,null,o.createElement(n9,{scrollContainer:e,recordingKey:t})))}function n9({scrollContainer:e,recordingKey:t}){let n=(0,r.wA)(),a=(0,r.d4)(e=>e.stylePreviewShown),l=(0,r.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),s=(0,r.d4)(e=>e.mirror.appModel.currentTool),c=o.useRef(null),d=(0,tO.Bs)(),p=(0,r.d4)(e=>e.library.localStyleSelection),[m,u]=o.useState(null),[E,y]=o.useState(null),_=o.useRef(null),[g,h]=o.useState(!1),v=l===i.m1T.GRADIENT||l===i.m1T.RASTER||s===i.NLJ.DROPPER_COLOR;o.useEffect(()=>{let e=()=>{!v&&(n(t1.Bn(null)),a.isShown&&(n(t4.sw()),i.glU.selectStyle(tW.n3.INVALID,tW.IA.INVALID)))},t=(0,t8.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[n,a.isShown,v]);let{stylesByType:f,foldersAndStylesByType:b}=o.useMemo(()=>{let e=(0,t5.Kw)(d),t=new Map;return t5.og.map(n=>{let a=e.get(n);if(a){(0,t5.LX)(a);let e=(0,nU.lM)(a,n),o=(0,nU.l0)(e);t.set(n,o)}}),{stylesByType:e,foldersAndStylesByType:t}},[d]),S=o.useCallback(e=>{(0,tz.KF)(null!=e.content_hash,"style does not have a hash"),i.glU.selectStyleByGuid(e.node_id),n(t1.ay({isRenaming:!1})),(0,ek.sx)("Style Inspected",{styleType:e.style_type,from:"styleListClick"})},[n]),T=o.useCallback((e,t,n)=>{u(t?e:null),y(t?null:{name:e,styleTypeSection:n})},[]),N=o.useCallback(e=>{if(!e){n(t1.Bn(null));return}let t=new Set;e.styleIds.forEach(n=>{let a=d.find(e=>e.type===ne.PW.STYLE&&e.node_id===n);if(!a)return;let o=(0,t7.In)(a.name);e.folderNames.has(o)||t.add(n)});let a={type:e.type,folderNames:e.folderNames,styleIds:t};n(t1.Bn(a))},[n,d]),I=o.useCallback((e,t,n)=>{if(!p)return;let a=e[t],o=(e,t)=>{let a=(0,t7.ke)(e.name),o=null!=t?t:a.length-1;a[o]=n;let r=(0,nU.Pc)(a.join("/"));tH.l7.user("rename-style",()=>i.glU.renameNode(e.node_id,r))};if(a.name!==n){if(a.type===ne.PW.STYLE)o(a);else{(0,nU.mx)(t,e).forEach(t=>{let n=e[t];n.type===ne.PW.STYLE&&o(n,a.level-1)});let r=new Set(p.folderNames);r.delete(a.name);let l=(0,t7.In)(a.name)+"/"+n;r.add(l),N({type:p.type,folderNames:r,styleIds:p.styleIds})}}t3.Y5.triggerAction("commit"),u(null),y(null)},[p,N]),P=o.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),n(t0.j7({type:nz,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-nY)}}}))},[n]),C=o.useCallback(e=>{_.current=e},[]),A=o.useCallback(()=>{h(!0)},[]),k=o.useCallback(()=>{h(!1)},[]);return o.createElement("div",{className:"styles--localStylesPanel--T4Gqs",ref:c},o.createElement(n5,null),t5.og.map(n=>{let a=f.get(n);if(!a)return;let r=b.get(n);if(r)return o.createElement(ae,{key:n,recordingKey:tJ.Pt(t,`style-section-${n}`),styleType:n,storedStyleList:a,styleList:r,updateSelection:N,isDragging:g,onDragStart:A,onDragEnd:k,onInspectStyle:S,onContextMenu:P,updateContextMenuStyleRef:C,renamingStyleID:m,renamingFolder:E,onRenameItem:T,stopRenamingItem:I,styleRowRef:_.current,onEditStyle:S,scrollContainer:e})}))}function ae({styleType:e,storedStyleList:t,styleList:n,renamingStyleID:a,renamingFolder:l,onRenameItem:s,stopRenamingItem:c,onDragStart:d,onDragEnd:p,onInspectStyle:m,onContextMenu:u,updateContextMenuStyleRef:E,updateSelection:y,styleRowRef:_,scrollContainer:g,recordingKey:h}){let v=(0,F.q5)(),f=!(0,U.p8)("isReadOnly"),b=(0,r.wA)(),S=(0,r.d4)(e=>e.stylePreviewShown),N=(0,em.GS)(),I=(0,r.d4)(t=>(0,t6.i4)(t,e)),P=(0,r.d4)(t=>(0,t6.A7)(t,e,n)),[C,A]=o.useState(()=>{if(tq.x4&&v){let t=JSON.parse(tq.x4.getItem(n7)||"{}");if(v.key in t){let n=t[v.key];if(e in n)return new Set(n[e])}else t[v.key]={},tq.x4.setItem(n7,JSON.stringify(t))}return new Set(n.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[k,w]=o.useState([]),[O,x]=o.useState(null),[D,R]=o.useState(null),M=o.useMemo(()=>(0,t$.s)(()=>{b(t2.GT({styleType:e}))},200),[b,e]);o.useEffect(()=>{M()},[M,n]);let L=(0,tX.ZC)(C);o.useEffect(()=>{if(!L||!tq.x4||!v||(0,tj._f)(L,C))return;let t=JSON.parse(tq.x4.getItem(n7)||"{}"),n=t[v.key];n&&(n[e]=[...C],tq.x4.setItem(n7,JSON.stringify(t)))},[C,v,L,e]);let V=o.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),K=o.useCallback((e,t)=>{let a=new Set(e),o=[];n.forEach((e,t)=>{if(a.has(e)&&(o.push(t),"STYLE_FOLDER"===e.type)){let e=(0,nU.mx)(t,n);o.push(...e)}});let r=new Set(o),l=t?n.indexOf(t):n.length,i=[...(0,tY.y1)(l).filter(e=>!r.has(e)),...o,...(0,tY.y1)(l,n.length).filter(e=>!r.has(e))],s=new Map;return i.forEach((e,t)=>{e!==t&&s.set(e,t)}),s},[n]),B=o.useCallback(()=>{S.isShown&&(b(t4.sw()),b(ed.XE()),i.glU.selectStyle(tW.n3.INVALID,tW.IA.INVALID))},[b,S.isShown]),G=o.useMemo(()=>{if(!O)return null;if("in"===O.type){let e=n[O.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==O.index||null==D||!I)return null;let e=(0,nU.QA)(I,n),t=e[0],a=null,o=null;if(0===O.index?o=n[O.index]:O.index===n.length?a=n[O.index-1]:(a=n[O.index-1],o=n[O.index]),a?.type==="STYLE_FOLDER"&&C.has(a.name)&&-1===k.indexOf(a.name))return{folderNameToNestUnder:a.name,dividerStyles:{display:"none"}};if(a?.type===ne.PW.STYLE){let e=(0,t7.In)(a.name).split("/");for(let n=0;n<e.length;n++){let a=e.slice(0,n+1).join("/");if(C.has(a)&&-1===k.indexOf(a)){if("STYLE_FOLDER"!==t.type)return{folderNameToNestUnder:a,dividerStyles:{display:"none"}};return{folderNameToNestUnder:(0,t7.In)(a),dividerStyles:{marginLeft:24*Math.min((0,t7.ke)(a).length,8)-8}}}}}let r=0,l=null,i=a?(0,nU.rM)(a):0,s=o?(0,nU.rM)(o):0;if(i<=s)r=s,l=a?a.type===ne.PW.STYLE?(0,t7.In)(a.name):a.name:"";else if((0,tz.KF)(null!=a,"Dragging after an item that doesn't exist"),t.type===ne.PW.STYLE||D>=.5)r=i,l=(0,t7.In)(a.name);else{let e=Math.floor(D/.5*(0,nU.rM)(a));e=Math.max(s-1,e),l=(0,t7.ke)((0,t7.In)(a.name)).slice(0,e).join("/"),r=e+1}let c={marginLeft:24*Math.min(r,8)-8};return a&&e.includes(a)||!(0,nU.Md)(a,t,o)?{folderNameToNestUnder:null,dividerStyles:c}:{folderNameToNestUnder:l,dividerStyles:c}},[C,D,I,O,n,k]),z=o.useCallback((a,o,r,l)=>{if(!t||!o&&!r||!G)return;let i=G.folderNameToNestUnder;if(null===i)return;let s=[],c=[];a.forEach(e=>{(0,nU.Md)(o,e,r,i)&&("STYLE_FOLDER"===e.type?c.push(e):s.push(e))});let d=s.concat(c);if(!d.length)return;let p=tH.l7.user("reorder-styles",()=>(0,nU.VB)(d,o,r,i,n,t,l||!1)),m=new Set,u=new Set;d.forEach(e=>{let t=(0,nU.t_)(e),n=p?.get(t);n&&("STYLE_FOLDER"===e.type?m.add(n):u.add(t))}),y({type:e,folderNames:m,styleIds:u});let E=new Set;return C.forEach(e=>{if(i.startsWith(e))return;let t=p?.get(e);t?E.add(t):E.add(e)}),A(E),B(),l||t3.Y5.triggerAction("commit"),K(d,r)},[y,C,G,K,B,t,n,e]),Y=o.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let a=n.indexOf(t),o=(0,nU.dm)(t).filter(e=>(0,t7.In)(e.name)===t.name);if(!o.length)return z(e,t,n[a+1]);{let t=o[o.length-1],a=n.indexOf(t);return z(e,t,n[a+1])}},[z,n]),W=(0,tQ.xx)((e,t)=>{let a=new Map,o=t.map(e=>e.type===ne.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let r=o.indexOf(e);-1!==r&&(0,nU.mx)(r,n).forEach(e=>{let n=t[e],o="STYLE_FOLDER"===n.type?n.name:n.node_id,r=a.get(o);r||(r=0),a.set(o,r+1)})}),a}),H=o.useCallback(()=>{if(!I)return;let t=(0,nU.QA)(I,n);if(0===t.length)return;let a=t[0],o=n.indexOf(a),r=o,l=o+1;if(a.type===ne.PW.STYLE&&n[l]&&n[l].type===ne.PW.STYLE){let e=(0,nU.rM)(a);for(let t=o+1;t<n.length;t++){let a=n[t];if("STYLE_FOLDER"===a.type&&a.level===e||(0,nU.rM)(a)<e){r=t-1,l=t;break}t===n.length-1&&(r=t,l=t+1)}}z(t,n[r],n[l],!0);let c=(0,t7.In)(a.name),d=N?(0,T.t)("design_systems.create_style.new_folder"):(0,T.t)("design_systems.create_style.untitled_folder");c&&(d=`${c}/${d}`);let p=(e,t)=>{if(e.type===ne.PW.STYLE){let n=d+"/"+t+(0,t7.kH)(e.name);tH.l7.user("rename-style",()=>{i.glU.renameNode(e.node_id,n)})}else{let n=t+(0,t7.kH)(e.name)+"/";e.styles.forEach(e=>{p(e,n)}),e.subfolders.forEach(e=>{p(e,n)})}};t.forEach(e=>{p(e,"")}),y({type:e,folderNames:new Set([d]),styleIds:new Set}),s(d,!1,e)},[y,z,N,I,s,n,e]),$=o.useCallback((e,t)=>{let a=n[e];"STYLE_FOLDER"===a.type&&A(e=>{let n=new Set(e);return t?n.add(a.name):n.delete(a.name),n})},[n]),X=o.useCallback((e,t)=>{A(a=>{let o=new Set(a),r=n[e];if("STYLE_FOLDER"===r.type){let e=(0,t7.In)(r.name),n=""===e?t:e+"/"+t;C.has(r.name)&&(C.delete(r.name),C.add(n)),(0,nU.KU)(r).forEach(e=>{if(C.has(e.name)){let t=e.name.replace(r.name,"");C.add(n+t),C.delete(e.name)}})}return o}),c(n,e,t)},[c,C,n]),Q=o.useCallback(e=>{u(n,e)},[u,n]),J=o.useCallback((e,t,n)=>{let a=t>.5?1:Math.round(1e3*t)/1e3;x({index:e,type:n?"in":"before"}),R(a)},[]),j=o.useCallback(()=>{A(e=>tH.l7.user("delete-styles",()=>{let t=new Set(e);return(I?(0,nU.QA)(I,n):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,nU.a2)(e,v?.key||null),C.delete(e.name),(0,nU.KU)(e).forEach(e=>C.delete(e.name))):(0,nU.Nr)(e,v?.key||null)}),t})),t3.Y5.triggerAction("commit"),S.isShown&&(b(t4.sw()),b(ed.XE()),i.glU.selectStyle(tW.n3.INVALID,tW.IA.INVALID)),y(null)},[S.isShown,y,I,n,v?.key,C,b]),q=o.useMemo(()=>{let e=I?(0,nU.QA)(I,n):[];return(0,nU.Ug)(e).map(e=>e.node_id)},[I,n]),Z=o.useCallback(()=>{tH.l7.user("cut-styles",()=>i.glU.cutStyles(q))},[q]),ee=o.useCallback((e,t)=>{t===t9.zy.PASTE?tH.l7.user("paste-styles",()=>i.glU.pasteStyles()):e.shouldPropagate=!0},[]);o.useEffect(()=>{if(!I)return;let e=e=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||Z()};return document.addEventListener("cut",e),()=>{document.removeEventListener("cut",e)}},[Z,I]);let et=o.useCallback(()=>{i.glU.pasteStyles()},[]),en=o.useCallback(e=>{w(t=>[...t,e])},[]),ea=o.useCallback(()=>{d()},[d]),eo=tJ.rf(h,"ondragend",o.useCallback(()=>{x(null),R(null),w([]),p()},[p])),er=(0,tX.ZC)(I);o.useEffect(()=>{er!==I&&I&&A(e=>{let n=new Set(e);for(let e of I.styleIds.values()){let a=t.find(t=>t.node_id===e);if(!a)continue;let o=(0,t7.ke)(a.name);for(let e=0;e<o.length;e++){let t=o.slice(0,e).join("/");n.delete(t)}}return n})},[I,er,t]);let el=o.useRef(null),ei=o.useCallback(e=>{el.current=e},[el]),es=o.useMemo(()=>I?(0,nU.h$)(I,n):[],[I,n]),ec=o.useMemo(()=>P?(0,nU.h$)(P,n):[],[P,n]),ep=o.useMemo(()=>[...es,...ec].sort((e,t)=>e-t),[es,ec]),eu=o.useCallback((e,t,r,i,c,d)=>{let p="STYLE_FOLDER"===e.type?e.name:e.node_id,u=!1,_=!1;for(let t of k)if("STYLE_FOLDER"===e.type){if(e.name===t){_=!0;break}e.name.startsWith(t)&&(u=!0)}else if((0,t7.In)(e.name)===t){u=!0;break}if(!_&&!u&&W(C,n).has(p))return null;let g=ep&&ep[ep.length-1]===t,h=ep&&ep[0]===t;if(e.type===ne.PW.STYLE){let n=(0,nU.rM)(e),l=null!=a&&a===e.node_id;return o.createElement(nR,{hideStylePreview:B,recordingKey:`style-row-${t}`,index:t,key:e.node_id,isDragging:i,dsStyle:e,selected:r,selectedSecondary:P?.styleIds.has(e.node_id)||!1,level:n,stylePreviewShown:S,onContextMenu:Q,updateContextMenuStyleRef:E,updateFocusRowRef:r?ei:null,onMouseDown:c,onMouseMove:d,onInspectStyle:m,updateSelection:y,isEditable:f,deleteSelectedItems:j,isRenaming:l,onRenameItem:s,stopRenamingItem:X,onCreateFolder:H,isLastChildOfSelection:g})}{let n=null!=l&&l.name===e.name&&l.styleTypeSection===e.styleTypeSection,a=G?.folderNameToNestUnder||null;return o.createElement(nI,{recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,key:t,index:t,isDragging:i,folder:e,selected:r,selectedSecondary:P?.folderNames.has(e.name)||!1,isCollapsed:C.has(e.name),temporarilyExpandFolder:en,isTemporarilyExpanded:_,isRenaming:n,folderNameToNestUnder:a,onRenameItem:s,stopRenamingItem:X,level:e.level,toggleFolder:e=>$(t,e),onContextMenu:Q,onCreateFolder:H,onMouseDown:c,onMouseMove:d,isEditable:f,deleteSelectedItems:j,hideStylePreview:B,isFirstChildOfSelection:h})}},[y,ep,C,j,G?.folderNameToNestUnder,W,B,Q,H,m,s,l,a,P?.folderNames,P?.styleIds,X,n,S,en,k,$,E,f,ei]),eE=o.useCallback(t=>{let a=new Set,o=new Set;t.forEach(e=>{let t=n[e];"STYLE_FOLDER"===t.type?a.add(t.name):o.add(t.node_id)}),y({type:e,folderNames:a,styleIds:o})},[y,n,e]),ey=o.useRef(),e_=o.useRef();return o.useEffect(()=>{ey.current&&es.length?(ey.current(),el.current&&!el.current.contains(document.activeElement)&&el.current.focus()):e_.current&&!es.length&&(e_.current(),el.current=null)},[ey,es,el]),o.createElement(nt.vL,{name:"StyleDraggableList",handleClipboard:ee,focusFunctionRef:ey,blurFunctionRef:e_},o.createElement(nM,{styleType:e},o.createElement(at,{recordingKey:"style-draggable-list",listItems:n,onInsertItemsIn:Y,canInsertItemsIn:V,onInsertItemsBetweenValues:z,onDrag:J,onDragStart:ea,onDragEnd:eo,insertDividerStyle:G?.dividerStyles,selectedIndices:es,updateSelection:eE,renderListItem:eu,scrollContainer:g,isDragDisabled:!f}),o.createElement(nW,{styleRowRef:_,onDeleteItems:j,onCutItems:Z,onPasteItems:et,onRenameItem:s,onEditStyle:m,onCreateFolder:H,styleType:e})))}class at extends nn.q{}var an=n(520285),aa=n(70575),ao=n(181320),ar=n(804846),al=n(33136),ai=n(166635);function as(e){let t=(0,al.t)();return e.readOnly?o.createElement(ai.lc,{...e}):t.nodesAreAllInsideStacks&&"AUTO"===t.stackPositioning?null:o.createElement(na.Zk,null,o.createElement(na.fI,null,o.createElement(na.xw,{extended:!0},(0,T.tx)("fullscreen.properties_panel.constraints_panel.constraints"))),o.createElement(ai.lc,{...e}))}function ac(e){return o.createElement(tZ.k,{name:"constraints_panel"},o.createElement(as,{...e}))}var ad=n(233711),ap=n(78479),am=n(905060),au=n(841446),aE=n(80479),ay=n(876797),a_=n(750693),ag=n(307905),ah=n(459674),av=n(443830),af=n(920997),ab=n(390965),aS=n(754276),aT=n(463033),aN=n(581138),aI=n(939791);function aP({recordingKey:e,numSelected:t}){let n=(0,em.GS)(),a=t??1,r=()=>{i.glU.upgradeToLatestVectorOperationVersion()},l=(0,T.tx)("fullscreen.properties_panel.vector_operation.update_text",{numNodes:a}),s=(0,T.tx)("fullscreen.properties_panel.vector_operation.update_button",{numNodes:a});return o.createElement(na.Zk,null,o.createElement("p",{className:S.cx.pl16.pr16.mb12.font11.$},l),n?o.createElement(aI.Ad,{label:null,input:o.createElement(aT.$n,{variant:"secondary",onClick:r,recordingKey:tJ.Pt(e,"updateBoolean")},s)}):o.createElement(aN.z,{onClick:r,recordingKey:tJ.Pt(e,"updateBooleanUI2")},s))}var aC=n(520581),aA=n(869156),ak=n(635736);function aw(e){return e.modalShown?.type===ak.ye.type||e.modalShown?.prevModal?.type===ak.ye.type}function aO(){let e=(0,ak.mB)(),t=(0,o.useCallback)(()=>{e()},[e]),n=(0,r.d4)(aw),a=0===(0,aA.Rb)().length&&!n;return o.createElement(tZ.k,{name:"local_variables_panel"},o.createElement(na.Zk,null,o.createElement(na.fI,{className:a?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ"},o.createElement(na.xZ,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title"},(0,T.tx)("variables.local_variables_panel.local_variables_title")),o.createElement(aC.E,{name:"variables_modal_button"},o.createElement(nP.d,{onClick:t,recordingKey:(0,tJ.Pt)("localVariablesPanel","variablesModalButton"),toggled:n,"aria-label":(0,T.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,T.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":nm.Ib.TEXT}},o.createElement(np.U,{svg:nD.A},o.createElement(nC.A,null)))))))}var ax=n(460043);function aD({allSavedPlugins:e,appModel:t,colorFormat:n,dropdownShown:a,getContextualSelectionProperties:l,library:c,localPlugins:d,modalShown:p,openFile:m,orgEntity:u,pickerInStyleCreationShown:E,pickerShown:y,publishedPlugins:_,saveAsState:g,sceneGraphSelection:h,scrollContainer:f,selectedStyleProperties:b,selectionPaints:S,selectionProperties:T,shownPanels:N,strokePanelMode:I,strokePanelTerminalPointCount:P,stylePickerListLayout:C,stylePickerShown:A}){let k=(0,r.wA)(),w=(0,v.md)(tw.b);return o.createElement(tR.i,null,0===Object.keys(h).length&&o.createElement(aa.Mw,{panelName:aa.ON.DESIGN}),(0,tx.d6)(N)&&o.createElement(an.AV,{recordingKey:"alignPanel"}),o.createElement(tL.VF,{isVisible:N[i.ibQ.TRANSFORM_ITEM]},()=>o.createElement(aS.zq,{key:"transform",recordingKey:"transformPanel",propertiesPanelState:w,pickerShown:y,openFileKey:m?.key||null,canEditConstraints:(0,tx.GG)(N),onlyShowXYInputsRow:w===tO.GR.DEFAULT_SIMPLIFIED||(l().areOnlyResponsiveSetsSelected??!1)})),o.createElement(tL.VF,{isVisible:(0,tx.jP)(T)},()=>o.createElement(aP,{key:"vectorOperation",recordingKey:"vectorOperationPanel",numSelected:T.numSelected})),o.createElement(tO.F$,{isVisible:N[i.ibQ.SCALE_ITEM]}),o.createElement(ad.Q,{selection:h,shownPanels:N,scaleShouldHideOtherPanels:(0,tx.NR)(N)}),o.createElement(tL.VF,{isVisible:N[i.ibQ.TEMPLATE_ITEM]},()=>o.createElement(ab.r,{key:"template"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.TEMPLATE_ITEM]},()=>o.createElement(ax.$,{key:"templateProperties",recordingKey:"templatePropsPanel"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.COMPONENT_ITEM]},()=>o.createElement(ar.cu,{key:"component",recordingKey:"componentPanel"})),o.createElement(tL.VF,{isVisible:(0,tx.tV)(N,T.stateGroupSelectionInfo)},()=>o.createElement(tG.BS,{key:"componentProperties",recordingKey:"propsPanel"})),o.createElement(tL.VF,{isVisible:(0,tx.M0)(N)},()=>o.createElement(am._,{key:"instance",recordingKey:"instancePanel"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.VECTOR_ITEM]},()=>o.createElement(aS.Ss,{key:"vector-transform",recordingKey:"vectorTransformPanel",isUI3:!1,x:l().x,y:l().y,cornerRadius:l().cornerRadius,handleMirroring:l().handleMirroring,dispatch:k,dropdownShown:a})),o.createElement(tL.VF,{isVisible:(0,tx.zp)(N,T,b,!1)},()=>o.createElement(af.Vy,{key:"stack",onlyShowResizingRow:!1,onlyStacksSelected:!!N[i.ibQ.STACK_ITEM],recordingKey:"stackPanel"})),o.createElement(tL.VF,{isVisible:(0,tx.GG)(N)},()=>o.createElement(ac,{key:"constraints",openFileKey:m?.key||null,dropdownShown:a,recordingKey:"constraintsPanel"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.MASK_ITEM]},()=>o.createElement(ay.B,{key:"mask",maskType:T.maskType,dispatch:k,dropdownShown:a,recordingKey:"maskPanel"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.GRIDS_ITEM]},()=>o.createElement(tO.tC,{key:"grids",selectionProperties:T})),o.createElement(tL.VF,{isVisible:N[i.ibQ.LAYER_ITEM]},()=>o.createElement(aE.s,{key:"layer",blendMode:T.blendMode,opacity:T.opacity,visible:T.visible,variableConsumptionInfo:T.variableConsumptionInfo,recordingKey:"layerPanel"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.TYPE_ITEM]},()=>o.createElement(tO.gc,{key:"type",selectionProperties:T})),o.createElement(tL.VF,{isVisible:N[i.ibQ.CANVAS_ITEM]},()=>o.createElement(ao.v,{key:"canvas-background",backgroundColor:T.backgroundColor,backgroundEnabled:T.backgroundEnabled,backgroundOpacity:T.backgroundOpacity,exportBackgroundDisabled:T.exportBackgroundDisabled,dispatch:k,dropdownShown:a,modalShown:p,editModeType:t.activeCanvasEditModeType,pickerShown:y,currentTool:t.currentTool,colorFormat:n,library:c,openFile:m,recordingKey:"canvasBackgroundPanel",currentSelectedProperty:t.currentSelectedProperty,currentSelectedGradientStop:t.currentSelectedGradientStop,defaultColor:tF.rC,sceneGraphSelection:h,selectedStyleProperties:b,hasExports:!!T.exportSettings&&(0,tU._W)(T.exportSettings,[]).length>0})),o.createElement(tL.VF,{isVisible:N[i.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]},()=>o.createElement(ag.C,{key:"remove-group-fill-stroke"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.FILL_ITEM]},()=>o.createElement(tO.B8,{key:"fill",selectionProperties:T,variableScopes:(0,av.og)(T)})),o.createElement(tL.VF,{isVisible:N[i.ibQ.STROKE_ITEM]},()=>o.createElement(a_.$p,{key:"stroke",recordingKey:"strokePanel",stylePickerShown:A,strokePanelMode:I,strokePanelTerminalPointCount:P,strokePaints:T.strokePaints,borderSharedWeight:T.borderSharedWeight,strokeWeight:T.strokeWeight,strokeAlign:T.strokeAlign,strokeCap:T.strokeCap,strokeJoin:T.strokeJoin,miterLimitAngle:T.miterLimitAngle,connectorLineStyle:T.connectorLineStyle,leftEndCap:T.leftEndCap,rightEndCap:T.rightEndCap,maxStrokeWeight:T.maxStrokeWeight,dashPattern:T.dashPattern,dashCap:T.dashCap,terminalCap:T.terminalCap,arcRadius:T.arcRadius,arcSweep:T.arcSweep,numSelectedByType:T.numSelectedByType,dispatch:k,dropdownShown:a,modalShown:p,pickerShown:y,pickerInStyleCreationShown:E,stylePickerListLayout:C,currentSelectedProperty:t.currentSelectedProperty,currentSelectedGradientStop:t.currentSelectedGradientStop,currentTool:t.currentTool,colorFormat:n,editModeType:t.activeCanvasEditModeType,defaultColor:tF.Em,inheritStyleKey:T.inheritFillStyleKeyForStroke||null,inheritStyleID:T.styleIdForStrokeFill||null,library:c,sceneGraphSelection:h,selectedStyleProperties:b,openFile:m,isPanelBodyCollapsedAtom:null})),o.createElement(tL.VF,{isVisible:(0,tx.fI)(N,(0,tx.NR)(N),S)},()=>o.createElement(a_.UA,{key:"selection-paints",recordingKey:"selectionPaintsPanel",selectionPaints:S,dispatch:k,dropdownShown:a,sceneGraphSelection:h,currentSelectedGradientStop:t.currentSelectedGradientStop,pickerShown:y,stylePickerListLayout:C,currentTool:t.currentTool,colorFormat:n,editModeType:t.activeCanvasEditModeType,defaultColor:tF.rC,library:c,openFile:m,isUI3:!1})),o.createElement(tL.VF,{isVisible:N[i.ibQ.EFFECTS_ITEM]},()=>o.createElement(tO.w5,{key:"effects",selectionProperties:T})),o.createElement(tL.VF,{isVisible:(0,tx.ji)(N,t,h)},()=>o.createElement(aO,{key:"local-variables"})),o.createElement(tL.VF,{isVisible:(0,tx.ww)(N,h)},()=>o.createElement(n6,{key:"local-styles",recordingKey:"local-styles",scrollContainer:f})),o.createElement(tL.VF,{isVisible:(0,tx.P1)(N,m)},()=>o.createElement(ap.LI,{key:"export",recordingKey:"exportsPanel",openFile:m,singleNodeName:ap.LI.singleNodeNameFrom(T),numSelected:T.numSelected,exportSettings:T.exportSettings,sceneGraphSelection:h,isSelectionRenamable:ap.LI.isSelectionRenamable(Object.keys(h)),currentPage:(0,tB.Nf)(t),dispatch:k,dropdownShown:a,currentSelectedProperty:t.currentSelectedProperty,pickerShown:y,saveAsState:g,panelWidth:tx.iP})),o.createElement(tL.VF,{isVisible:!(0,tx.NR)(N)},()=>o.createElement(ah.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:l().pluginRelaunchData,localPlugins:d,publishedPlugins:_,allSavedPlugins:e.plugins,orgEntity:u,dispatch:k,openFileKey:m?.key||null,editorType:m?.editorType?(0,tP.wN)(m.editorType):null,numSelected:l().numSelected??0})),(0,s.kc)().jsx_debugging&&o.createElement(au.A,null))}var aR=n(814466),aM=n(874952);function aL({allSavedPlugins:e,appModel:t,colorFormat:n,dropdownShown:a,getContextualSelectionProperties:l,library:c,localPlugins:d,modalShown:p,openFile:m,orgEntity:u,pickerInStyleCreationShown:E,pickerShown:y,publishedPlugins:_,saveAsState:g,sceneGraphSelection:h,scrollContainer:f,selectedStyleProperties:b,selectionPaints:S,selectionProperties:T,shownPanels:N,strokePanelMode:I,strokePanelTerminalPointCount:P,stylePickerListLayout:C,stylePickerShown:A}){let k=(0,r.wA)(),w=(0,v.md)(tw.b),O=(0,av.qh)(T);return o.createElement(tR.i,null,0===Object.keys(h).length&&o.createElement(aa.Mw,{panelName:aa.ON.DESIGN}),o.createElement(aM._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:(0,tx.tV)(N,T.stateGroupSelectionInfo),shouldShowInstancePanel:(0,tx.M0)(N),shouldShowVectorOperationPanel:(0,tx.jP)(T)}),o.createElement(tL.VF,{isVisible:(0,tx.jP)(T)},()=>o.createElement(aP,{key:"vectorOperation",recordingKey:"vectorOperationPanel",numSelected:T.numSelected})),o.createElement(tL.VF,{isVisible:(0,tx.tV)(N,T.stateGroupSelectionInfo)},()=>o.createElement(tG.BS,{key:"componentProperties",recordingKey:"propsPanel"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.COMPONENT_ITEM]},()=>o.createElement(ar.cu,{key:"component",recordingKey:"componentPanel"})),o.createElement(tL.VF,{isVisible:(0,tx.M0)(N)},()=>o.createElement(am._,{key:"instance",recordingKey:"instancePanel"})),o.createElement(tL.VF,{isVisible:(0,tx.d6)(N)||N[i.ibQ.TRANSFORM_ITEM]},()=>o.createElement(aS.zq,{key:"transform",recordingKey:"transformPanel",propertiesPanelState:w,pickerShown:y,openFileKey:m?.key||null,canEditConstraints:(0,tx.GG)(N),onlyShowXYInputsRow:w===tO.GR.DEFAULT_SIMPLIFIED||(l().areOnlyResponsiveSetsSelected??!1)})),o.createElement(tL.VF,{isVisible:(0,tx.zp)(N,T,b,!0)},()=>o.createElement(af.Vy,{key:"stack",recordingKey:"stackPanel",onlyShowResizingRow:w===tO.GR.DEFAULT_SIMPLIFIED,onlyStacksSelected:!!N[i.ibQ.STACK_ITEM]})),o.createElement(tO.F$,{isVisible:N[i.ibQ.SCALE_ITEM]}),o.createElement(ad.Q,{selection:h,shownPanels:N,scaleShouldHideOtherPanels:(0,tx.NR)(N)}),o.createElement(tL.VF,{isVisible:N[i.ibQ.TEMPLATE_ITEM]},()=>o.createElement(ab.r,{key:"template"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.TEMPLATE_ITEM]},()=>o.createElement(ax.$,{key:"templateProperties",recordingKey:"templatePropsPanel"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.VECTOR_ITEM]},()=>o.createElement(aS.Ss,{isUI3:!0,key:"vector-transform",recordingKey:"vectorTransformPanel",x:T.x,y:T.y,cornerRadius:T.cornerRadius,handleMirroring:T.handleMirroring,dispatch:k,dropdownShown:a})),o.createElement(tL.VF,{isVisible:N[i.ibQ.MASK_ITEM]},()=>o.createElement(ay.B,{key:"mask",recordingKey:"maskPanel",maskType:l().maskType,dispatch:k,dropdownShown:a})),o.createElement(tL.VF,{isVisible:N[i.ibQ.LAYER_ITEM]},()=>o.createElement(aR.X,{recordingKey:"appearancePanel"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.TYPE_ITEM]},()=>o.createElement(tO.gc,{key:"type",selectionProperties:T})),o.createElement(tL.VF,{isVisible:N[i.ibQ.CANVAS_ITEM]},()=>o.createElement(ao.v,{key:"canvas-background",recordingKey:"canvasBackgroundPanel",backgroundColor:T.backgroundColor,backgroundEnabled:T.backgroundEnabled,backgroundOpacity:T.backgroundOpacity,exportBackgroundDisabled:T.exportBackgroundDisabled,dispatch:k,dropdownShown:a,modalShown:p,editModeType:t.activeCanvasEditModeType,pickerShown:y,currentTool:t.currentTool,colorFormat:n,library:c,openFile:m,currentSelectedProperty:t.currentSelectedProperty,currentSelectedGradientStop:t.currentSelectedGradientStop,defaultColor:tF.rC,sceneGraphSelection:h,selectedStyleProperties:b,hasExports:!!T.exportSettings&&(0,tU._W)(T.exportSettings,[]).length>0})),o.createElement(tL.VF,{isVisible:N[i.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]},()=>o.createElement(ag.C,{key:"remove-group-fill-stroke"})),o.createElement(tL.VF,{isVisible:N[i.ibQ.FILL_ITEM]},()=>o.createElement(tO.B8,{key:"fill",selectionProperties:T,variableScopes:O})),o.createElement(tL.VF,{isVisible:N[i.ibQ.STROKE_ITEM]},()=>o.createElement(a_.$p,{key:"stroke",recordingKey:"strokePanel",stylePickerShown:A,strokePanelMode:I,strokePanelTerminalPointCount:P,strokePaints:T.strokePaints,borderSharedWeight:T.borderSharedWeight,strokeWeight:T.strokeWeight,strokeAlign:T.strokeAlign,strokeCap:T.strokeCap,strokeJoin:T.strokeJoin,miterLimitAngle:T.miterLimitAngle,connectorLineStyle:T.connectorLineStyle,leftEndCap:T.leftEndCap,rightEndCap:T.rightEndCap,maxStrokeWeight:T.maxStrokeWeight,dashPattern:T.dashPattern,dashCap:T.dashCap,terminalCap:T.terminalCap,arcRadius:T.arcRadius,arcSweep:T.arcSweep,numSelectedByType:T.numSelectedByType,dispatch:k,dropdownShown:a,modalShown:p,pickerShown:y,pickerInStyleCreationShown:E,stylePickerListLayout:C,currentSelectedProperty:t.currentSelectedProperty,currentSelectedGradientStop:t.currentSelectedGradientStop,currentTool:t.currentTool,colorFormat:n,editModeType:t.activeCanvasEditModeType,defaultColor:tF.Em,inheritStyleKey:T.inheritFillStyleKeyForStroke||null,inheritStyleID:T.styleIdForStrokeFill||null,library:c,sceneGraphSelection:h,selectedStyleProperties:b,openFile:m,isPanelBodyCollapsedAtom:null})),o.createElement(tL.VF,{isVisible:N[i.ibQ.EFFECTS_ITEM]},()=>o.createElement(tO.w5,{key:"effects",selectionProperties:T})),o.createElement(tL.VF,{isVisible:(0,tx.fI)(N,(0,tx.NR)(N),S)},()=>o.createElement(a_.UA,{isUI3:!0,key:"selection-paints",recordingKey:"selectionPaintsPanel",selectionPaints:S,dispatch:k,dropdownShown:a,sceneGraphSelection:h,currentSelectedGradientStop:t.currentSelectedGradientStop,pickerShown:y,stylePickerListLayout:C,currentTool:t.currentTool,colorFormat:n,editModeType:t.activeCanvasEditModeType,defaultColor:tF.rC,library:c,openFile:m})),o.createElement(tL.VF,{isVisible:(0,tx.ji)(N,t,h)},()=>o.createElement(aO,{key:"local-variables"})),o.createElement(tL.VF,{isVisible:(0,tx.ww)(N,h)},()=>o.createElement(n6,{key:"local-styles",recordingKey:"local-styles",scrollContainer:f})),o.createElement(tL.VF,{isVisible:N[i.ibQ.GRIDS_ITEM]},()=>o.createElement(tO.tC,{key:"grids",selectionProperties:T})),o.createElement(tL.VF,{isVisible:(0,tx.P1)(N,m)},()=>o.createElement(ap.LI,{key:"export",recordingKey:"exportsPanel",openFile:m,singleNodeName:ap.LI.singleNodeNameFrom(T),numSelected:T.numSelected,exportSettings:T.exportSettings,isSelectionRenamable:ap.LI.isSelectionRenamable(Object.keys(h)),sceneGraphSelection:h,currentPage:(0,tB.Nf)(t),dispatch:k,dropdownShown:a,currentSelectedProperty:t.currentSelectedProperty,pickerShown:y,saveAsState:g,panelWidth:tx.iP})),o.createElement(tL.VF,{isVisible:!(0,tx.NR)(N)},()=>o.createElement(ah.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:l().pluginRelaunchData,localPlugins:d,publishedPlugins:_,allSavedPlugins:e.plugins,orgEntity:u,dispatch:k,openFileKey:m?.key||null,editorType:m?.editorType?(0,tP.wN)(m.editorType):null,numSelected:l().numSelected??0})),(0,s.kc)().jsx_debugging&&o.createElement(au.A,null))}function aV(e){let t=(0,r.wA)(),n=(0,em.GS)(),a=(0,eN.iZ)(),l=(0,er.J2)((0,tb.UK)().expandedFramePresetType);return(((0,tD.Im)(e.shownPanels)||Object.keys(e.shownPanels).every(t=>!e.shownPanels[parseInt(t)]))&&!window.figmaPerfTesting&&!(0,t_.Lg)()&&!(0,t_.nl)()&&(0,tM.x1)("PropertiesPanel","Rendering design tab with no shownPropertiesPanels",{isEmpty:(0,tD.Im)(e.shownPanels),shouldRenderInspectTab:(0,tx.S4)(e.appModel,a)}),e.shownPanels[i.ibQ.FRAME_PRESETS])?o.createElement(tR.i,null,o.createElement(tL.VF,{isVisible:!0},()=>o.createElement(tV.nl,{key:"frame-presets",recordingKey:"framePresetPanel",dispatch:t,expandedFramePresetType:l}))):e.shownPanels[i.ibQ.PENCIL_TOOL]?o.createElement(tR.i,null,o.createElement(tL.VF,{isVisible:!0},()=>o.createElement(tK.q,{key:"pencilToolPanel",recordingKey:"pencilToolPanel",id:"pencilToolPanel",openFile:e.openFile}))):n?o.createElement(aL,{...e}):o.createElement(aD,{...e})}var aK=n(414507),aU=n(435225);function aF({allSavedPlugins:e,appModel:t,colorFormat:n,dropdownShown:a,getContextualSelectionProperties:l,library:s,localPlugins:c,modalShown:d,openFile:p,orgEntity:m,pickerInStyleCreationShown:u,pickerShown:E,publishedPlugins:y,saveAsState:_,sceneGraphSelection:g,selectedStyleProperties:h,selectionPaints:f,selectionProperties:b,shownPanels:S,strokePanelMode:T,strokePanelTerminalPointCount:N,stylePickerListLayout:I,stylePickerShown:P}){let C=(0,r.wA)(),[A,k]=(0,v.fp)(tw.b);return o.createElement(tR.i,null,(0,tx.d6)(S)&&o.createElement(an.AV,{recordingKey:"alignPanel"}),o.createElement(tL.VF,{isVisible:!0},()=>o.createElement(aS.zq,{key:"transform",recordingKey:"transformPanel",propertiesPanelState:A,pickerShown:E,openFileKey:p?.key||null,canEditConstraints:!1,onlyShowXYInputsRow:!1})),o.createElement(tO.F$,{isVisible:S[i.ibQ.SCALE_ITEM]}),o.createElement(tL.VF,{isVisible:!(0,tx.NR)(S)},()=>o.createElement(am._,{key:"instance",recordingKey:"instancePanel"})),o.createElement(tL.VF,{isVisible:(0,tx.GG)(S)},()=>o.createElement(ac,{key:"constraints",recordingKey:"constraintsPanel",openFileKey:p?.key||null,dropdownShown:a})),o.createElement(tL.VF,{isVisible:S[i.ibQ.LAYER_ITEM]},()=>o.createElement(aE.s,{key:"layer",recordingKey:"layerPanel",blendMode:b.blendMode,opacity:b.opacity,visible:b.visible,variableConsumptionInfo:b.variableConsumptionInfo})),A===tO.GR.DEFAULT_SIMPLIFIED&&o.createElement(aU.Y,{onExpand:()=>k(tO.GR.OVERRIDDEN_EXPANDED)}),A===tO.GR.OVERRIDDEN_EXPANDED&&o.createElement(o.Fragment,null,o.createElement(ad.Q,{selection:g,shownPanels:S,scaleShouldHideOtherPanels:(0,tx.NR)(S)}),o.createElement(tL.VF,{isVisible:S[i.ibQ.TEMPLATE_ITEM]},()=>o.createElement(ab.r,{key:"template"})),o.createElement(tL.VF,{isVisible:S[i.ibQ.COMPONENT_ITEM]},()=>o.createElement(ar.cu,{key:"component",recordingKey:"componentPanel"})),o.createElement(tL.VF,{isVisible:S[i.ibQ.VECTOR_ITEM]},()=>o.createElement(aS.Ss,{key:"vector-transform",recordingKey:"vectorTransformPanel",x:b.x,y:b.y,cornerRadius:b.cornerRadius,handleMirroring:b.handleMirroring,dispatch:C,dropdownShown:a,isUI3:!1})),o.createElement(tL.VF,{isVisible:(0,tx.zp)(S,b,h,!1)},()=>o.createElement(af.Vy,{key:"stack",recordingKey:"stackPanel",onlyShowResizingRow:!1,onlyStacksSelected:!!S[i.ibQ.STACK_ITEM]})),o.createElement(tL.VF,{isVisible:S[i.ibQ.MASK_ITEM]},()=>o.createElement(ay.B,{key:"mask",recordingKey:"maskPanel",maskType:l().maskType,dispatch:C,dropdownShown:a})),o.createElement(tL.VF,{isVisible:S[i.ibQ.GRIDS_ITEM]},()=>o.createElement(tO.tC,{key:"grids",selectionProperties:b})),o.createElement(tL.VF,{isVisible:S[i.ibQ.TYPE_ITEM]},()=>o.createElement(tO.gc,{key:"type",selectionProperties:b})),o.createElement(tL.VF,{isVisible:S[i.ibQ.CANVAS_ITEM]},()=>o.createElement(ao.v,{key:"canvas-background",recordingKey:"canvasBackgroundPanel",backgroundColor:b.backgroundColor,backgroundEnabled:b.backgroundEnabled,backgroundOpacity:b.backgroundOpacity,exportBackgroundDisabled:b.exportBackgroundDisabled,dispatch:C,dropdownShown:a,modalShown:d,editModeType:t.activeCanvasEditModeType,pickerShown:E,currentTool:t.currentTool,colorFormat:n,library:s,openFile:p,currentSelectedProperty:t.currentSelectedProperty,currentSelectedGradientStop:t.currentSelectedGradientStop,defaultColor:tF.rC,sceneGraphSelection:g,selectedStyleProperties:h,hasExports:!!b.exportSettings&&(0,tU._W)(b.exportSettings,[]).length>0})),o.createElement(tL.VF,{isVisible:S[i.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]},()=>o.createElement(ag.C,{key:"remove-group-fill-stroke"})),o.createElement(tL.VF,{isVisible:S[i.ibQ.FILL_ITEM]},()=>o.createElement(tO.B8,{key:"fill",selectionProperties:b,variableScopes:(0,av.og)(b)})),o.createElement(tL.VF,{isVisible:S[i.ibQ.STROKE_ITEM]},()=>o.createElement(a_.$p,{key:"stroke",recordingKey:"strokePanel",stylePickerShown:P,strokePanelMode:T,strokePanelTerminalPointCount:N,strokePaints:b.strokePaints,borderSharedWeight:b.borderSharedWeight,strokeWeight:b.strokeWeight,strokeAlign:b.strokeAlign,strokeCap:b.strokeCap,strokeJoin:b.strokeJoin,miterLimitAngle:b.miterLimitAngle,connectorLineStyle:b.connectorLineStyle,leftEndCap:b.leftEndCap,rightEndCap:b.rightEndCap,maxStrokeWeight:b.maxStrokeWeight,dashPattern:b.dashPattern,dashCap:b.dashCap,terminalCap:b.terminalCap,arcRadius:b.arcRadius,arcSweep:b.arcSweep,numSelectedByType:b.numSelectedByType,dispatch:C,dropdownShown:a,modalShown:d,pickerShown:E,pickerInStyleCreationShown:u,stylePickerListLayout:I,currentSelectedProperty:t.currentSelectedProperty,currentSelectedGradientStop:t.currentSelectedGradientStop,currentTool:t.currentTool,colorFormat:n,editModeType:t.activeCanvasEditModeType,defaultColor:tF.Em,inheritStyleKey:b.inheritFillStyleKeyForStroke||null,inheritStyleID:b.styleIdForStrokeFill||null,library:s,sceneGraphSelection:g,selectedStyleProperties:h,openFile:p,isPanelBodyCollapsedAtom:null})),o.createElement(tL.VF,{isVisible:!0},()=>o.createElement(a_.UA,{key:"selection-paints",recordingKey:"selectionPaintsPanel",selectionPaints:f,dispatch:C,dropdownShown:a,sceneGraphSelection:g,currentSelectedGradientStop:t.currentSelectedGradientStop,pickerShown:E,stylePickerListLayout:I,currentTool:t.currentTool,colorFormat:n,editModeType:t.activeCanvasEditModeType,defaultColor:tF.rC,library:s,openFile:p,isUI3:!1})),o.createElement(tL.VF,{isVisible:S[i.ibQ.EFFECTS_ITEM]},()=>o.createElement(tO.w5,{key:"effects",selectionProperties:b})),o.createElement(tL.VF,{isVisible:!(0,tx.NR)(S)},()=>o.createElement(ah.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:l().pluginRelaunchData,localPlugins:c,publishedPlugins:y,allSavedPlugins:e.plugins,orgEntity:m,dispatch:C,openFileKey:p?.key||null,editorType:p?.editorType?(0,tP.wN)(p.editorType):null,numSelected:l().numSelected??0}))),o.createElement(tL.VF,{isVisible:(0,tx.P1)(S,p)},()=>o.createElement(ap.LI,{key:"export",recordingKey:"exportsPanel",openFile:p,singleNodeName:ap.LI.singleNodeNameFrom(b),numSelected:b.numSelected,exportSettings:b.exportSettings,sceneGraphSelection:g,currentPage:(0,tB.Nf)(t),isSelectionRenamable:ap.LI.isSelectionRenamable(Object.keys(g)),dispatch:C,dropdownShown:a,currentSelectedProperty:t.currentSelectedProperty,pickerShown:E,saveAsState:_,panelWidth:tx.iP})),o.createElement(tL.VF,{isVisible:!(0,tx.NR)(S)},()=>o.createElement(ah.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:l().pluginRelaunchData,localPlugins:c,publishedPlugins:y,allSavedPlugins:e.plugins,orgEntity:m,dispatch:C,openFileKey:p?.key||null,editorType:p?.editorType?(0,tP.wN)(p.editorType):null,numSelected:l().numSelected??0})))}function aB({allSavedPlugins:e,appModel:t,colorFormat:n,dropdownShown:a,getContextualSelectionProperties:l,library:s,localPlugins:c,modalShown:d,openFile:p,orgEntity:m,pickerInStyleCreationShown:u,pickerShown:E,publishedPlugins:y,saveAsState:_,sceneGraphSelection:g,selectedStyleProperties:h,selectionPaints:f,selectionProperties:b,shownPanels:S,strokePanelMode:T,strokePanelTerminalPointCount:N,stylePickerListLayout:I,stylePickerShown:P}){let C=(0,r.wA)(),[A,k]=(0,v.fp)(tw.b);return o.createElement(tR.i,null,0===Object.keys(g).length&&o.createElement(aa.Mw,{panelName:aa.ON.DESIGN}),o.createElement(aM._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:(0,tx.tV)(S,b.stateGroupSelectionInfo),shouldShowInstancePanel:(0,tx.M0)(S)}),o.createElement(tL.VF,{isVisible:!(0,tx.NR)(S)},()=>o.createElement(am._,{key:"instance",recordingKey:"instancePanel"})),o.createElement(tL.VF,{isVisible:!0},()=>o.createElement(aS.zq,{key:"transform",recordingKey:"transformPanel",propertiesPanelState:A,pickerShown:E,openFileKey:p?.key||null,canEditConstraints:(0,tx.GG)(S),onlyShowXYInputsRow:A===tO.GR.DEFAULT_SIMPLIFIED||(l().areOnlyResponsiveSetsSelected??!1)})),o.createElement(tL.VF,{isVisible:(0,tx.zp)(S,b,h,!0)},()=>o.createElement(af.Vy,{key:"stack",recordingKey:"stackPanel",onlyShowResizingRow:A===tO.GR.DEFAULT_SIMPLIFIED,onlyStacksSelected:!!S[i.ibQ.STACK_ITEM]})),o.createElement(tO.F$,{isVisible:S[i.ibQ.SCALE_ITEM]}),A===tO.GR.DEFAULT_SIMPLIFIED&&o.createElement(aU.Y,{onExpand:()=>k(tO.GR.OVERRIDDEN_EXPANDED)}),A===tO.GR.OVERRIDDEN_EXPANDED&&o.createElement(o.Fragment,null,o.createElement(tL.VF,{isVisible:S[i.ibQ.LAYER_ITEM]},()=>o.createElement(aR.X,{recordingKey:"appearancePanel"})),o.createElement(ad.Q,{selection:g,shownPanels:S,scaleShouldHideOtherPanels:(0,tx.NR)(S)}),o.createElement(tL.VF,{isVisible:S[i.ibQ.TEMPLATE_ITEM]},()=>o.createElement(ab.r,{key:"template"})),o.createElement(tL.VF,{isVisible:S[i.ibQ.COMPONENT_ITEM]},()=>o.createElement(ar.cu,{key:"component",recordingKey:"componentPanel"})),o.createElement(tL.VF,{isVisible:S[i.ibQ.VECTOR_ITEM]},()=>o.createElement(aS.Ss,{isUI3:!0,key:"vector-transform",recordingKey:"vectorTransformPanel",x:b.x,y:b.y,cornerRadius:b.cornerRadius,handleMirroring:b.handleMirroring,dispatch:C,dropdownShown:a})),o.createElement(tL.VF,{isVisible:S[i.ibQ.MASK_ITEM]},()=>o.createElement(ay.B,{key:"mask",recordingKey:"maskPanel",maskType:l().maskType,dispatch:C,dropdownShown:a})),o.createElement(tL.VF,{isVisible:S[i.ibQ.TYPE_ITEM]},()=>o.createElement(tO.gc,{key:"type",selectionProperties:b})),o.createElement(tL.VF,{isVisible:S[i.ibQ.CANVAS_ITEM]},()=>o.createElement(ao.v,{key:"canvas-background",recordingKey:"canvasBackgroundPanel",backgroundColor:b.backgroundColor,backgroundEnabled:b.backgroundEnabled,backgroundOpacity:b.backgroundOpacity,exportBackgroundDisabled:b.exportBackgroundDisabled,dispatch:C,dropdownShown:a,modalShown:d,editModeType:t.activeCanvasEditModeType,pickerShown:E,currentTool:t.currentTool,colorFormat:n,library:s,openFile:p,currentSelectedProperty:t.currentSelectedProperty,currentSelectedGradientStop:t.currentSelectedGradientStop,defaultColor:tF.rC,sceneGraphSelection:g,selectedStyleProperties:h,hasExports:!!b.exportSettings&&(0,tU._W)(b.exportSettings,[]).length>0})),o.createElement(tL.VF,{isVisible:S[i.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]},()=>o.createElement(ag.C,{key:"remove-group-fill-stroke"})),o.createElement(tL.VF,{isVisible:S[i.ibQ.FILL_ITEM]},()=>o.createElement(tO.B8,{key:"fill",selectionProperties:b,variableScopes:(0,av.og)(b)})),o.createElement(tL.VF,{isVisible:S[i.ibQ.STROKE_ITEM]},()=>o.createElement(a_.$p,{key:"stroke",recordingKey:"strokePanel",stylePickerShown:P,strokePanelMode:T,strokePanelTerminalPointCount:N,strokePaints:b.strokePaints,borderSharedWeight:b.borderSharedWeight,strokeWeight:b.strokeWeight,strokeAlign:b.strokeAlign,strokeCap:b.strokeCap,strokeJoin:b.strokeJoin,miterLimitAngle:b.miterLimitAngle,connectorLineStyle:b.connectorLineStyle,leftEndCap:b.leftEndCap,rightEndCap:b.rightEndCap,maxStrokeWeight:b.maxStrokeWeight,dashPattern:b.dashPattern,dashCap:b.dashCap,terminalCap:b.terminalCap,arcRadius:b.arcRadius,arcSweep:b.arcSweep,numSelectedByType:b.numSelectedByType,dispatch:C,dropdownShown:a,modalShown:d,pickerShown:E,pickerInStyleCreationShown:u,stylePickerListLayout:I,currentSelectedProperty:t.currentSelectedProperty,currentSelectedGradientStop:t.currentSelectedGradientStop,currentTool:t.currentTool,colorFormat:n,editModeType:t.activeCanvasEditModeType,defaultColor:tF.Em,inheritStyleKey:b.inheritFillStyleKeyForStroke||null,inheritStyleID:b.styleIdForStrokeFill||null,library:s,sceneGraphSelection:g,selectedStyleProperties:h,openFile:p,isPanelBodyCollapsedAtom:null})),o.createElement(tL.VF,{isVisible:S[i.ibQ.EFFECTS_ITEM]},()=>o.createElement(tO.w5,{key:"effects",selectionProperties:b})),o.createElement(tL.VF,{isVisible:(0,tx.fI)(S,(0,tx.NR)(S),f)},()=>o.createElement(a_.UA,{isUI3:!0,key:"selection-paints",recordingKey:"selectionPaintsPanel",selectionPaints:f,dispatch:C,dropdownShown:a,sceneGraphSelection:g,currentSelectedGradientStop:t.currentSelectedGradientStop,pickerShown:E,stylePickerListLayout:I,currentTool:t.currentTool,colorFormat:n,editModeType:t.activeCanvasEditModeType,defaultColor:tF.rC,library:s,openFile:p})),o.createElement(tL.VF,{isVisible:S[i.ibQ.GRIDS_ITEM]},()=>o.createElement(tO.tC,{key:"grids",selectionProperties:b})),o.createElement(tL.VF,{isVisible:(0,tx.P1)(S,p)},()=>o.createElement(ap.LI,{key:"export",recordingKey:"exportsPanel",openFile:p,singleNodeName:ap.LI.singleNodeNameFrom(b),isSelectionRenamable:ap.LI.isSelectionRenamable(Object.keys(g)),numSelected:b.numSelected,exportSettings:b.exportSettings,sceneGraphSelection:g,currentPage:(0,tB.Nf)(t),dispatch:C,dropdownShown:a,currentSelectedProperty:t.currentSelectedProperty,pickerShown:E,saveAsState:_,panelWidth:tx.iP})),o.createElement(tL.VF,{isVisible:!(0,tx.NR)(S)},()=>o.createElement(ah.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:l().pluginRelaunchData,localPlugins:c,publishedPlugins:y,allSavedPlugins:e.plugins,orgEntity:m,dispatch:C,openFileKey:p?.key||null,editorType:p?.editorType?(0,tP.wN)(p.editorType):null,numSelected:l().numSelected??0}))),o.createElement(tL.VF,{isVisible:!(0,tx.NR)(S)},()=>o.createElement(ah.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:l().pluginRelaunchData,localPlugins:c,publishedPlugins:y,allSavedPlugins:e.plugins,orgEntity:m,dispatch:C,openFileKey:p?.key||null,editorType:p?.editorType?(0,tP.wN)(p.editorType):null,numSelected:l().numSelected??0})))}function aG(e){let t=(0,em.GS)();if((0,tD.Im)(e.shownPanels)||Object.keys(e.shownPanels).every(t=>!e.shownPanels[parseInt(t)])){let e=Error("Rendering simplified design tab with no shownPropertiesPanels");(0,tM.$D)(aK.FigmaTeam.EDITOR_USABILITY,e)}return t?o.createElement(aB,{...e}):o.createElement(aF,{...e})}function az({scrollContainer:e,...t}){let n=(0,v.md)(tw.b),a=(0,tk.Yo)(),r=()=>(0,tx.RB)(t.selectedStyleProperties)?t.selectedStyleProperties:t.selectionProperties;return n===tO.GR.DEFAULT_EXPANDED?o.createElement(aV,{...t,getContextualSelectionProperties:r,orgEntity:a,scrollContainer:e}):o.createElement(aG,{...t,getContextualSelectionProperties:r,orgEntity:a})}var aY=n(507956);function aW({appModel:e,dropdownShown:t,pickerShown:n,saveAsState:a,sceneGraphSelection:l,selectedStyleProperties:i,selectionProperties:s}){let c=(0,r.wA)(),d=(0,F.q5)(),p=(0,tB.Nf)(e),m=(0,aY.ks)(),u=e.isReadOnly&&!m,E=(0,tx.RB)(i)?i:s;return o.createElement(tL.VF,{isVisible:!0},()=>o.createElement(ap.LI,{key:"export",title:u?(0,T.t)("fullscreen.properties_panel.export"):(0,T.t)("fullscreen.properties_panel.presets"),standalone:!0,openFile:d,singleNodeName:ap.LI.singleNodeNameFrom(E),isSelectionRenamable:ap.LI.isSelectionRenamable(Object.keys(l)),numSelected:E.numSelected,exportSettings:E.exportSettings,sceneGraphSelection:l,currentPage:p,dispatch:c,dropdownShown:t,currentSelectedProperty:e.currentSelectedProperty,pickerShown:n,recordingKey:"exportsPanel",saveAsState:a,panelWidth:tx.iP}))}var aH=n(126590),a$=n(143678),aX=n(889449),aQ=n(853497);function aJ({selectionProperties:e,scrollContainer:t}){let n=(0,F.q5)(),a=(0,U.KH)(),r=!e.prototypeStartingPointsInfo||e.prototypeStartingPointsInfo?.length>0,l=0===Object.keys(a).length,i=n?.canEdit,s=o.createElement(tL.VF,{isVisible:l&&!i&&r},()=>o.createElement(aQ.A,{viewOnly:!0})),c=o.createElement(tL.VF,{isVisible:l},()=>o.createElement(n6,{key:"code-local-styles",recordingKey:"code-local-styles",scrollContainer:t}));return o.createElement(R.fu,{name:a$.e0.CODE_PANEL},o.createElement(tR.i,null,o.createElement(aa.Mw,{panelName:aa.ON.INSPECT}),o.createElement(aX.U,{key:"inspection-properties-panel",recordingKey:"inspectionPanel",flowPanel:s,localStylesPanel:c})))}var aj=n(115353),aq=n(57860),aZ=n(326331),a0=n(977750),a1=n(189904),a2=n(523047),a4=n(335601),a8=n(743282),a3=n(239349),a5=n(662275),a7=n(218973),a6=n(158950),a9=n(60088),oe=n(343559),ot=n(610003),on=n(822397),oa=n(198868),oo=n(802926),or=n(269900),ol=n(429308),oi=n(184601);async function os(e,t){let n=await (0,ot.vd)(e),a=await (0,ot.vd)(t),o=(await oi.Ay.design.getTextImageEmbeds({model:"clip-huge-shared",input:{images:[n,a]}})).encoded_images;if(!o||2!==o.length)throw Error("Expected two embedding vectors in the response");let r=o[0],l=o[1];if(!r||!l)throw Error("Embedding vectors must not be undefined");return(0,ol.Lb)(r,l)}async function oc(e,t){e(d.F.clearAll());let n=e4.UN().getCurrentPage()?.childrenNodes.filter(e=>"SECTION"===e.type&&1===e.childrenNodes.length);if(!n||0===n.length){e(d.F.enqueue({message:(0,T.t)("living_designs.eval.error"),error:!0}));return}let a=tH.l7.ai(ot.p1,()=>{let e=(0,e4.UN)().createNode("CANVAS");return e.name=`Eval - ${new Date().toLocaleString()}`,e});await (0,e4.UN)().setCurrentPageAsync(a.guid);let o=t.evaluationRuns,r=o*n.length;e(d.F.enqueue({type:"living-designs-evals",message:(0,T.t)("living_designs.eval.progress",{completed:0,total:r}),timeoutOverride:1/0}));try{let a=0,l=n.flatMap((e,t)=>Array.from({length:o}).map((n,a)=>{var r;let l=t*o+a;return r=(e.absoluteRenderBounds.w+(l>0?40:0))*l,tH.l7.ai(ot.p1,()=>{let t=e.clone(),n=(0,e4.UN)().get(t);n.relativeTransform={...n.relativeTransform,m02:r};let a=e.clone(),o=(0,e4.UN)().get(a);o.relativeTransform={...o.relativeTransform,m02:r},o.name="Output: "+e.name,o.y=e.y+e.size.y+40,o.size={x:o.size.x,y:3*o.size.y},o.childrenNodes[0].removeSelfAndChildren();let l=n.childrenNodes[0];if(!l)throw Error("Failed to clone node");return{nodeToEval:l,inputSection:n,outputSection:o}})})),i=(0,oa.D)();i.viewport.scrollAndZoomIntoView(l.flatMap(({inputSection:e,outputSection:t})=>[e,t].map(e=>i.getNodeById(e.guid)).filter(e=>null!==e)));let s=l.map(async({nodeToEval:n,outputSection:o})=>{let l=await od(n,o,t);return a++,e(d.F.enqueue({type:"living-designs-evals",message:(0,T.t)("living_designs.eval.progress",{completed:a,total:r}),timeoutOverride:1/0})),l}),c=(await Promise.all(s)).map(({metrics:e})=>e),p=function(e){let t=e.reduce((e,t)=>e+t.imageToImageSimilarity,0)/e.length,n=e.length,a=e.filter(e=>e.error).length;return{avgImageToImageSimilarity:t,numTestCases:n,numFailures:a,failureRate:a/n}}(c),m=l[0]?.inputSection;if(!m)throw Error("No sections were prepared for evaluation.");tH.l7.ai(ot.p1,()=>(function(e,t){let n=e.clone(),a=(0,e4.UN)().get(n);a.childrenNodes[0].removeSelfAndChildren(),a.relativeTransform={...a.relativeTransform,m02:e.absoluteRenderBounds.w},a.name="Aggregate Metrics",a.x=e.x-e.size.x-40,a.y=e.y;let o=(0,e4.UN)().createNode("TEXT");o.spliceCharacters(0,0,`Aggregate Metrics: ${JSON.stringify(t,(e,t)=>"number"!=typeof t||Number.isInteger(t)?t:t.toFixed(3),2)}`,"BEFORE"),o.x=0,o.size.x=a.size.x,o.y=10,a.appendChild(o),o.fills=[{type:"SOLID",color:{r:1,g:1,b:1,a:1}}],o.fontSize=40})(m,p)),e(d.F.enqueue({type:"living-designs-evals",message:(0,T.t)("living_designs.eval.finished")}))}catch(t){a.removeSelfAndChildren(),e(d.F.enqueue({type:"living-designs-evals",message:(0,T.t)("living_designs.eval.error"),error:!0}))}}async function od(e,t,n){!function e(t){for(let n of t.childrenNodes)e(n);t.annotations.length>0&&((0,ot.Ww)(t,{...(0,ot.u6)(t),messages:t.annotations.map(e=>({id:(0,a8.g)(),createdAt:Date.now(),content:e.label}))}),t.annotations.splice(0,t.annotations.length))}(e);let a=e.size,o={x:t.size.x/2-a.x/2,y:40},r=v.zl.get(on.Zl).serializer,{html:l,styles:i}=await (0,ot.li)(e,r,(0,on.Lf)(e).map(e=>e.nodeId));if("sites"===r&&l){let n=await (0,oo.I)(l),r=await (0,oo.z)(n);op({name:"HTML",imageSet:(await (0,or.l)({code:r,width:e.size.x??0,height:e.size.y??0,props:{},styleOverride:i})).imageSet,sources:[{code:l,language:"TYPESCRIPT"},{code:i,language:"CSS"}],position:o,size:a,outputSection:t})}let{generatedCode:s,nodesWithProps:c,errorMessage:d}=await (0,on.kX)(e,{initialBackoffDelay:n.evalBackoffDelay});if(!s||!c)return tH.l7.ai(ot.p1,()=>{let e=(0,e4.UN)().createNode("FRAME");e.size=a,e.x=o.x,e.y=o.y,t.appendChild(e);let n=(0,e4.UN)().createNode("TEXT");n.spliceCharacters(0,0,d??(0,T.t)("living_designs.eval.error"),"BEFORE"),n.size=e.size,n.fills=[{type:"SOLID",color:{r:1,g:1,b:1,a:1}}],e.fills=[{type:"SOLID",color:{r:1,g:0,b:0,a:1}}],e.appendChild(n)}),{outputSection:t,metrics:{imageToImageSimilarity:0,error:!0}};let p=await (0,oo.I)(s),m=await (0,oo.z)(p),u=await (0,or.l)({code:m,width:e.size.x??0,height:e.size.y??0,props:(0,on.IL)((0,e4.UN)(),c),styleOverride:i}),E=await op({name:"Generated",imageSet:u.imageSet,sources:[{code:s,language:"TYPESCRIPT"},{code:i,language:"CSS"}],position:o,size:a,outputSection:t}),y=await os(e,E);return tH.l7.ai(ot.p1,()=>{let e=(0,e4.UN)().createNode("TEXT");e.spliceCharacters(0,0,`Image-Image Similarity: ${y.toFixed(2)}`,"BEFORE"),e.x=0,e.size.x=E.size.x,e.y=10,t.appendChild(e),e.fills=[{type:"SOLID",color:{r:1,g:1,b:1,a:1}}],e.fontSize=40}),{outputSection:t,metrics:{imageToImageSimilarity:y,error:!1}}}async function op({name:e,imageSet:t,sources:n,position:a,size:o,outputSection:r}){let l=[],i=20,s=tH.l7.ai(ot.p1,()=>{let s=(0,e4.UN)().createNode("FRAME");s.size=o,s.x=i,s.y=a.y,s.insertImageInFillPaint(t),s.name=e,i+=o.x+40;let c=(r.size.x-i)/n.length-40;for(let t of n){let n=(0,e4.UN)().createNode("FRAME");n.name=e+" Code",n.size={x:c,y:o.y},n.x=i,n.y=a.y,n.frameMaskDisabled=!1,r.appendChild(n);let d=(0,e4.UN)().createNode("CODE_BLOCK");l.push([d.guid,t]),n.appendChild(d),r.appendChild(s),i+=c+40}return s}),c=(0,oa.D)();for(let[e,t]of l){await c.loadFontAsync({family:"Source Code Pro",style:"Medium"});let n=c.getNodeById(e);n.code=t.code,n.codeLanguage=t.language}return a.y+=o.y+40,s}var om=n(602354),ou=n(940319);async function oE(e){let t=(0,oa.D)(),n=new Map,a=RegExp("url\\(['\"]?(.+?)['\"]?\\)","g");for(let o of e.matchAll(a)){let e;let a=o[1];if(!a)continue;try{e=new URL(a)}catch(e){continue}let r=new URLSearchParams(e.hash.slice(1)).get("filename");if(!r||!r.endsWith(".png"))continue;let l=r.slice(0,-4),i=t.getImageByHash(l);if(!i)continue;let s=await i.getBytesAsync();if(!s)continue;let c=new Blob([s],{type:"image/png"}),d=await function(e){return new Promise((t,n)=>{let a=new FileReader;a.onloadend=()=>{let e=a.result;if("string"==typeof e){t(e);return}n(Error("Failed to convert blob to base64"))},a.onerror=n,a.readAsDataURL(e)})}(c);n.set(o.index,d)}return e.replace(a,(e,t,a)=>e.replace(t,n.get(a)??t))??e}var oy=n(237870),o_=n(32067),og=n(547583),oh=n(746806),ov=n(711490),of=n(502601);let ob=function(){throw Error("Component Preview not available")};var oS=n(575722);let oT="LivingDesignsModal",oN=(0,oy.Ju)(function({initialSize:e}){let t=(0,r.wA)(),[n,a]=(0,o.useState)(0),l=(0,oS.ts)(e,oP),[i,s]=om.tU.useTabs({preview:!0,code:!0,debug:!0});if(!l)return null;let{width:c,setWidth:d,height:p,setHeight:m,minWidth:u,minHeight:E,position:y,setPosition:_}=l,g=o.createElement(om.tU.TabStrip,{manager:s},o.createElement(om.tU.Tab,{...i.preview},(0,T.t)("living_designs.modal.tabs.preview")),o.createElement(om.tU.Tab,{...i.code},(0,T.t)("living_designs.modal.tabs.code")),o.createElement(om.tU.Tab,{...i.debug},(0,T.t)("living_designs.modal.tabs.debug"))),h=o.createElement(nl.K,{onClick:()=>a(e=>e+1),"aria-label":(0,T.t)("living_designs.modal.refresh")},o.createElement(ou._,null));return o.createElement(of.Q,null,o.createElement(oC.Provider,{value:{tabPropsMap:i,tabManager:s}},o.createElement(oh.BL,{customButton:h,title:g,position:y,allowResizeHeight:!0,allowResizeWidth:!0,dragHeaderOnly:!0,fullFrame:!0,height:p,width:c,minWidth:u,minHeight:E,setWidth:d,setHeight:m,setPosition:_,onClose:()=>{t((0,a5.ES)({type:oT}))},overflowHidden:!0},o.createElement(ok,{key:n,size:{x:c,y:p}}))))},oT),oI={x:400,y:400},oP={x:260,y:80},oC=o.createContext(void 0),oA=()=>{let e=o.useContext(oC);if(!e)throw Error("usePreviewContext must be used within a PreviewContext.Provider");return e};function ok({size:e}){let{isResizing:t,isDragging:n}=o.useContext(ov.O);return o.createElement(oO,{disablePointerEvents:t||n,size:e})}var ow=(e=>(e.None="none",e.Generating="generating",e.Bundling="bundling",e.Ready="ready",e.Error="error",e))(ow||{});function oO({disablePointerEvents:e,size:t}){let n=(0,o_.VW)(),a=(0,ot.L4)(),r=(0,ot.Jp)(),l=(0,tX.PD)(r),i=n?.guid?r:l,[s,c]=(0,v.fp)((0,on.R)(a?.guid||"")),[d,p]=(0,o.useState)(null),[m,u]=(0,o.useState)(""),{tabPropsMap:E}=oA(),y=(0,z.Fk)(on.IL,i?.generation?.nodesWithProps||[]);(0,o.useEffect)(()=>{let e=i?.generation;if(!e||"idle"!==s.status){p(null),u("");return}!async function(){let t=Promise.all([oE(e.code),oE(e.styles)]),[n,a]=await t,o=await (0,oo.I)(n);p(await (0,oo.z)(o)),u(a)}()},[i?.generation,s]);let _="idle"===s.status&&i?.generation?.code?d?"ready":"bundling":"loading"===s.status?"generating":"none";return o.createElement("div",{className:S.cx.wFull.hFull.relative.$},o.createElement(om.tU.TabPanel,{...E.preview},o.createElement("div",{className:S.cx.absolute.top0.right0.bottom0.left0.$},"none"===_&&o.createElement("div",{className:S.cx.flex.hFull.wFull.itemsCenter.justifyCenter.$},(0,T.t)("living_designs.preview.no_design")),"generating"===_&&o.createElement("div",{className:S.cx.flex.hFull.wFull.itemsCenter.justifyCenter.flexColumn.$},o.createElement("div",null,(0,T.t)("living_designs.preview.generating")),o.createElement(aq.k,null)),"bundling"===_&&o.createElement("div",{className:S.cx.flex.hFull.wFull.itemsCenter.justifyCenter.flexColumn.$},o.createElement("div",null,(0,T.t)("living_designs.preview.bundling")),o.createElement(aq.k,null)),"ready"===_&&o.createElement(ob,{disablePointerEvents:e,code:d,props:y,styles:m,size:{x:t.x,y:t.y},withReset:!0,onError:e=>c({status:"idle",errorMessage:e.message}),scaleLinearly:!0}),"idle"===s.status&&s.errorMessage&&o.createElement("div",{className:S.cx.absolute.left0.right0.bottom0.h24.flex.justifyBetween.itemsCenter.bt1.bSolid.colorBorder.p12.colorBgDanger.colorTextOndanger.$},(0,T.t)("living_designs.preview.error",{error:s.errorMessage||"Unknown"})))),o.createElement(om.tU.TabPanel,{...E.code},o.createElement("textarea",{readOnly:!0,className:S.cx.absolute.top0.right0.bottom0.left0.$,value:i?.generation?.code||"No code available"})),o.createElement(om.tU.TabPanel,{...E.debug},o.createElement("div",{className:S.cx.absolute.top0.right0.bottom0.left0.overflowYScroll.$},o.createElement(og.p,{data:i?.generation}))))}var ox=n(140686),oD=n(256296),oR=n(568214),oM=n(572206),oL=n(973149),oV=n(499777),oK=n(420186),oU=n(72875),oF=n(538697),oB=n(994481);let oG=new oL.KD({}),oz=e=>e.replace(/([A-Z])/g," $1").toLowerCase().replace(/^./,e=>e.toUpperCase()).trim();function oY({prop:e,onChange:t}){switch(e.type){case"number":return o.createElement(oW,{prop:e,onChange:t});case"color":return o.createElement(oH,{prop:e,onChange:t});case"string":return o.createElement(o$,{prop:e,onChange:t});case"enum":return o.createElement(oX,{prop:e,onChange:t});case"boolean":return o.createElement(oQ,{prop:e,onChange:t});default:return null}}function oW({prop:e,onChange:t}){let n=(0,r.wA)();return o.createElement(oB.cS,{label:oz(e.name),input:o.createElement(a7.j5,{value:e.value??e.defaultValue??0,onValueChange:e=>t(e),formatter:oG,dispatch:n,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":oz(e.name)})})}function oH({prop:e,onChange:t}){let n=(0,r.wA)(),a=(0,oV.Xo)(),l=o.useRef(null),i=(0,oR.H0)(e.value??e.defaultValue??"#ffffff")||{r:1,g:1,b:1,a:1},s={type:"SOLID",color:i,opacity:i.a?i.a:1};return o.createElement("div",null,a?.id===`living-design-prop-${e.name}-color-picker`&&o.createElement(oU.h3,{disabledVariableIds:new Set,initialPosition:new oM.Mi(a.initialX,a.initialY),color:i,boundVariable:null,onChange:e=>t((0,oR.YU)(e)),onClose:()=>n(ed.XE())}),o.createElement(oB.cS,{label:oz(e.name),input:o.createElement("div",{className:"living_designs_props--colorValueContainer--nPsog paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",ref:l},o.createElement(a_.y7,{paint:s,onChange:e=>{let n=e.color;n&&(void 0!==e.opacity&&(n.a=e.opacity),t((0,oR.YU)(n)))},togglePicker:()=>{if(!l.current)return;let{x:t,y:a}=(0,oK.cn)(l.current);n(ed.u1({id:`living-design-prop-${e.name}-color-picker`,initialX:t,initialY:a}))}}))}))}function o$({prop:e,onChange:t}){return o.createElement(oB.cS,{label:oz(e.name),input:o.createElement(na.ks,{value:e.value??e.defaultValue??"",onChange:e=>t(e.currentTarget.value)})})}function oX({prop:e,onChange:t}){let n=(0,r.wA)(),a=(0,nK.Um)();return o.createElement(oB.cS,{label:oz(e.name),input:o.createElement(oF.l6,{property:e.value??e.defaultValue??"",onChange:e=>t(e),id:`living-design-prop-${e.name}`,dispatch:n,dropdownShown:a,formatter:{format:e=>e}},e.options?.map(e=>o.createElement(oF.c$,{key:e,value:e},e)))})}function oQ({prop:e,onChange:t}){return o.createElement(oB.cS,{label:oz(e.name),input:o.createElement(ox.S,{checked:e.value??e.defaultValue??!1,onChange:e=>t(e),label:o.createElement(oD.h,null,oz(e.name))})})}var oJ=n(320986),oj=n(289298);function oq(e,t){return t.map(t=>({displayText:t,callback(){v.zl.set(on.f3,{provider:e,modelId:t})}}))}let oZ=[{displayText:"Anthropic",children:oq("anthropic",["claude-3-5-sonnet-20240620","claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-5-sonnet-20241022","claude-3-haiku-20240307"])},{displayText:"OpenAI",children:oq("openai",["ft:gpt-4o-2024-08-06:figma-development::A95wrEFE:ckpt-step-732","gpt-3.5-turbo","gpt-3.5-turbo-0301","gpt-3.5-turbo-0613","gpt-3.5-turbo-1106","gpt-3.5-turbo-0125","gpt-3.5-turbo-16k","gpt-3.5-turbo-16k-0613","gpt-4","gpt-4-0314","gpt-4-0613","gpt-4-32k","gpt-4-32k-0314","gpt-4-32k-0613","gpt-4-1106-preview","gpt-4-vision-preview","gpt-4-turbo-2024-04-09","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-mini-2024-07-18","o1-preview-2024-09-12","o1-mini-2024-09-12"])}];function o0(){let{toggleDropdown:e,dropdownTargetRef:t,Dropdown:n,isDropdownShown:a}=(0,a9.B)(),r=(0,v.md)(on.f3);return o.createElement(o.Fragment,null,a&&o.createElement(n,{items:oZ,showPoint:!0,lean:"left"}),o.createElement("div",{ref:t},o.createElement(nr.E,{className:S.cx.wFull.flex.alignCenter.justifyBetween.cursorPointer.b1.colorBorder.bRadius4.$,onClick:e},o.createElement("span",{className:S.cx.p4.$},null==r?"Pick a model":r.modelId),o.createElement(np.U,{svg:oj.A},o.createElement(aZ.r,null)))))}function o1(){let e=(0,a3.VW)(),t=(0,ot.L4)(),n=(0,ot.Vq)(),[a,l]=o.useState(""),i=(0,r.wA)(),s=(0,v.md)((0,on.R)(t?.guid||""));if(!e||!n)return o.createElement(o8,null);let c=()=>{a.length&&(l(""),(0,ot.Ww)(e,e=>{let t=Date.now();return{...e,messages:[...e.messages||[],{id:(0,a8.g)(),createdAt:t,content:a}]}}),t3.Y5.triggerAction("commit"),(0,on.kX)(e,{openPreview:d}))},d=()=>{let e={x:Math.max(t?.size.x||oI.x,oP.x),y:Math.max(t?.size.y||oI.y,oP.y)};i((0,a5.ES)({type:oT})),i((0,a5.to)({type:oN,data:{initialSize:e}}))},p=(t,n)=>{(0,ot.Ww)(e,e=>{if(!e.props)return e;let a=e.props.map(e=>{if(e.name!==t)return e;try{return aj.propSchema.parse({...e,value:n})}catch(t){return console.error(`Invalid value for prop "${e.name}":`,t.errors),e}});return{...e,props:a}})};return o.createElement(o.Fragment,null,o.createElement(na.Zk,null,o.createElement(oe.r,{titleTx:o.createElement("span",null,(0,T.t)("living_designs.properties_panel.title")),icon:o.createElement(a0.O,{onClick:d})}),o.createElement("div",{className:S.cx.flex.flexColumn.gap12.$},o.createElement("div",{className:S.cx.flex.flexColumn.gap8.$},!!n.messages?.length&&o.createElement("div",{className:S.cx.flex.flexColumn.$},n.messages.map((e,t)=>o.createElement(o2,{key:e.id,message:e,artwork:0===t?o.createElement(a1.N,null):o.createElement("div",{className:S.cx.w16.h16.flex.justifyCenter.$},o.createElement("span",{className:S.cx.textBodyMedium.colorTextSecondary.$},(0,T.t)("living_designs.properties_panel.interactions.version_number",{number:t}))),variant:0===t?"primary":"secondary"}))),o.createElement(aI.Ad,{label:void 0,input:o.createElement("div",{className:S.cx.flex.gap8.$},o.createElement(o4,{value:a,placeholder:(0,T.t)("living_designs.properties_panel.description_input.placeholder"),handleChange:l,handleSubmit:c}),o.createElement(aT.$n,{onClick:c,disabled:!a.length||"loading"===s.status,"aria-label":(0,T.t)("living_designs.properties_panel.interactions.add_button.label")},"loading"===s.status?o.createElement(aq.k,null):o.createElement(a2.W,null))),appendedClassName:"living_designs_panel--textareaRow--V8RnZ"}),o.createElement(aI.Ad,{label:"Model ID",input:o.createElement(o0,null)})),n.props&&!!n.props.length&&o.createElement("div",{className:S.cx.flex.flexColumn.gap12.$},o.createElement("span",{className:S.cx.textBodyMediumStrong.px16.$},(0,T.t)("living_designs.properties_panel.properties_header")),n.props.map(e=>o.createElement("div",{key:e.name,className:S.cx.$},o.createElement(oY,{prop:e,onChange:t=>p(e.name,t)})))))),o.createElement(o8,null),e.guid===t?.guid&&o.createElement(na.Zk,{className:oJ.rq},o.createElement(aN.z,{onClick:()=>(0,ot.T9)(t),disabled:"loading"===s.status},(0,T.t)("living_designs.properties_panel.settings.reset_button"))))}function o2({message:e,artwork:t,variant:n="primary"}){return o.createElement("div",{className:S.cx.flex.px16.py4.gap8.$},t&&o.createElement("div",{style:{"--color-icon":"var(--color-icon-assistive)"}},t),o.createElement("div",null,o.createElement("span",{className:S.cx.textBodyMedium.case([["primary"===n,S.cx.colorText],["secondary"===n,S.cx.colorTextSecondary]]).$},e.content)))}function o4({value:e,placeholder:t,handleChange:n,minHeight:a,handleSubmit:r,disabled:l}){let{inputRef:i,inputProps:{onChange:s,onFocus:c,onMouseUp:d,onMouseLeave:p,onKeyUp:m}}=(0,a4.X)({onChange:function(e){n(e.target.value)}});return o.createElement(a6.v,{ref:e=>{e?.textarea&&(i.current=e.textarea)},value:e,placeholder:t,onChange:s,onFocus:c,onMouseUp:d,onMouseLeave:p,onKeyUp:m,minHeight:a,submit:r,bypassModifiers:!0,preventSubmitOnBlur:!0,disabled:l})}function o8(){let[e,t]=(0,v.fp)(on.Zl),n=(0,r.wA)(),a=n=>{t({...e,serializer:n})};return o.createElement(na.Zk,null,o.createElement(oe.r,{titleTx:o.createElement("span",null,(0,T.t)("living_designs.properties_panel.settings.header"))}),o.createElement(aI.Ad,{label:(0,T.t)("living_designs.properties_panel.settings.serializer_dropdown"),input:o.createElement("div",{className:S.cx.flex.flexColumn.gap4.$},o.createElement("select",{value:e.serializer,onChange:e=>a(e.target.value),className:`${S.cx.p8.$}`},[{label:"Hybrid",serializer:"hybrid"},{label:"Sites",serializer:"sites"},{label:"Sparse Tree Enrichment",serializer:"ste"}].map(({label:e,serializer:t})=>o.createElement("option",{key:e,value:t},e)))),alwaysShowLabel:!0}),o.createElement(aI.Ad,{label:(0,T.t)("living_designs.properties_panel.settings.eval_runs"),input:o.createElement(a7.Ht,{value:e.evaluationRuns,onValueChange:n=>{t({...e,evaluationRuns:n})},dispatch:n,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("living_designs.properties_panel.settings.eval_runs"),min:1,max:5}),alwaysShowLabel:!0}),o.createElement(aI.Ad,{label:(0,T.t)("living_designs.properties_panel.settings.backoff_delay"),input:o.createElement(a7.Ht,{value:e.evalBackoffDelay,onValueChange:n=>{t({...e,evalBackoffDelay:n})},dispatch:n,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("living_designs.properties_panel.settings.backoff_delay"),min:0,max:6e4}),alwaysShowLabel:!0}),o.createElement(aN.z,{onClick:()=>oc(n,e)},(0,T.t)("living_designs.properties_panel.settings.create_evals_button")))}function o3(){return o.createElement(tR.i,null,o.createElement(o1,null))}var o5=n(806787),o7=n(234587),o6=n(880934),o9=n(94500),re=n(832637),rt=n(742311),rn=n(259927),ra=n(775664),ro=n(750029),rr=n(205135);class rl extends tJ.o6{render(){return o.createElement(na.Zk,null,o.createElement(na.fI,null,o.createElement(na.xw,null,(0,T.tx)("proto.menu.background"))),o.createElement(ri,{...this.props}))}}function ri(e){let t=o.useRef(null),n=o.useRef(null),a=(0,em.GS)(),{dispatch:r,pickerShown:l,prototypeBackgroundColor:i}=e,s=o.useCallback(()=>{let e=a?no.findDOMNode(n.current):no.findDOMNode(t.current);if(l&&l.id===rn.$T)r(ed.XE());else if(e&&e instanceof HTMLElement){let t=(0,oK.cn)(e);r(ed.u1({id:rn.$T,initialX:t.x,initialY:t.y}))}},[r,l,a]),c=o.useCallback((e,t)=>{r((0,o9._P)({name:"Prototype Background Modified"})),t3.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[r]),d=(0,tU._W)(i,{r:0,g:0,b:0,a:1}),p=o.createElement("div",{className:"prototype_background_panel--colorValueContainer--CEbzl paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},o.createElement(ro.J,{onClick:s,color:d,opacity:d.a,recordingKey:tJ.Pt(e,"chit"),className:"prototype_background_panel--chit--F--d0 paint_panels--chit--twQEy"}),o.createElement(rr.AN,{className:"prototype_background_panel--color--e5Pc8 paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:ra.TI,property:d,onChange:c,recordingKey:tJ.Pt(e,"colorInput"),noBorderOnFocus:!0}));return o.createElement(o.Fragment,null,a?o.createElement(oB.TN,{ref:n},p):o.createElement(na.fI,{ref:t,className:"prototype_background_panel--colorRow--MtNeY"},p),l&&l.id===rn.$T&&o.createElement(oU.h3,{disabledVariableIds:new Set,initialPosition:new oM.Mi(l.initialX??0,l.initialY??0),color:d,boundVariable:null,onChange:c,recordingKey:tJ.Pt(e,"colorPicker")}))}rl.displayName="PrototypeBackgroundPanel";var rs=n(992271),rc=n(276660),rd=n(371435),rp=n(834447);let rm="prototype_device_panel--deviceSelect--wnOgI",ru="prototype_device_panel--deviceOption--rvW-q",rE="prototype_device_panel--inactiveLabel--UEKyk prototype_device_panel--activeLabel--l162n",ry="prototype_device_panel--labelInactive--pv4Sf",r_="prototype_device_panel--deviceDropdownChevron--kq9TV",rg="prototype_device_panel--deviceDropdownInput--AxG9E";var rh=n(537545),rv=n(64111);class rf extends rc.I{}class rb extends rc.Y{}class rS extends o.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>rs.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return rs.yr[e?.deviceName||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=rs.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;t3.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let a=o.createElement(rk,{dispatch:this.props.dispatch,presetIdentifier:this.deviceInfo().presetIdentifier,dropdownShown:this.props.dropdownShown,onChange:this.onModelChange,recordingKey:tJ.Pt(this.props,"modelDropdown")}),r=t?o.createElement(oB.dx,{left:a,right:n}):o.createElement(oB.TN,null,a);return o.createElement("div",null,!this.props.isUI3&&o.createElement(na.hl,null,o.createElement(na.UZ,{className:ry},(0,T.tx)("presets.device_panel.model"))),this.props.isUI3?r:o.createElement(na.fI,null,a))},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,tU._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=ra.z5.format(t),a=t.r>.9&&t.g>.9&&t.b>.9,r=`1px solid ${a?"#EFEFEF":"transparent"}`,l=o.createElement("div",{className:"prototype_device_panel--devicePreview--T2Tzn",style:{backgroundColor:n,border:r}},o.createElement("img",{className:"prototype_device_panel--deviceImage--Wpr8Y",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`}));return o.createElement("div",null,!this.props.isUI3&&o.createElement(na.hl,null,o.createElement(na.UZ,{className:ry},(0,T.tx)("presets.device_panel.preview"))),this.props.isUI3?o.createElement(oB.TN,{appendedClassName:rp.Rk},l):o.createElement("div",{className:"prototype_device_panel--devicePreviewContainer--pC-H4"},l))},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,a=t.rotation;a=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",t3.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:a}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=o.createElement(rP,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,dropdownShown:this.props.dropdownShown,recordingKey:tJ.Pt(this.props,"deviceDropdown")}),n=o.createElement(rf,{property:this.currentDeviceOrientation(),onChange:this.onChangeOrientation,recordingKey:tJ.Pt(this.props,"orientationControl"),className:"prototype_device_panel--orientationControl--YdZ-v"},o.createElement(rb,{value:"PORTRAIT",svg:rv.A}),o.createElement(rb,{value:"LANDSCAPE",svg:rh.A})),a=(0,rs.$X)(e.type||"NONE",e.presetIdentifier),r=o.createElement(na.fI,null,t,a&&n),l=this.deviceInfo()&&this.shouldShowModelDropdown(),i=a&&!l?o.createElement(oB.dx,{left:t,right:n}):o.createElement(oB.TN,null,t),s=o.createElement(rT,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:tJ.Pt(this.props,"deviceSizeInputs")});return o.createElement(na.Zk,null,o.createElement(na.fI,{className:"prototype_device_panel--panelTitleRowOuter--wkKKy collapsible_property_panel--panelTitleRowOuter--i5K0R"},o.createElement(na.xw,{extended:this.props.isUI3},this.props.isUI3?(0,T.tx)("presets.device_panel.prototype_settings"):(0,T.tx)("presets.device_panel.device"))),this.props.isUI3?i:r,this.renderModelDropdown(!!l,a,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s,this.props.isUI3&&o.createElement(ri,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:tJ.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s)}}function rT(e){let t=o.useCallback(t=>{t3.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=o.useCallback(t=>{t3.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),a=o.createElement(a7.$j,{className:"prototype_device_panel--scrubbableInputLeftCol--P2T66 prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--leftColInput--pAJSy prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.x,onValueChange:t,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("presets.device_panel.device_width_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:tJ.Pt(e,"deviceWidth")},o.createElement("span",{className:rE},(0,T.tx)("proto.device_panel.width"))),r=o.createElement(a7.$j,{className:"prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.y,onValueChange:n,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("presets.device_panel.device_height_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:tJ.Pt(e,"deviceHeight")},o.createElement("span",{className:rE},(0,T.tx)("proto.device_panel.height")));return(0,em.GS)()?o.createElement(oB.dx,{left:a,right:r}):o.createElement(na.fI,null,a,r)}rS.displayName="PrototypeDevicePanel";class rN extends oF.l6{}class rI extends oF.c${}class rP extends tJ.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,T.t)("proto.frame_preset_panel.no_device"):(0,T.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,T.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,T.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,o9.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,o9._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:v.zl.get(rd.h).modalStatus===rd.b.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,rs.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let a=n.framePresetSize;return o.createElement(rI,{value:n,key:t,recordingKey:tJ.Pt(this.props,n.deviceName)},o.createElement("div",{className:ru},o.createElement("span",null,n.getI18nDeviceName()),o.createElement("span",null,a.x,"\u200A\xd7\u200A",a.y)," "))}}render(){let e;return e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":rs.hY[this.props.prototypeDevice.presetIdentifier]||"NONE",o.createElement(rN,{className:rm,chevronClassName:r_,inputClassName:rg,id:"prototype-device-select",property:e,formatter:this.formatter,onChange:this.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:"prototype_device_panel--deviceDropdown--ufbuZ",recordingKey:tJ.Pt(this.props,"select"),dropdownAlignment:"right"},o.createElement(rI,{value:"NONE",recordingKey:tJ.Pt(this.props,"NONE")}),o.createElement(oF.sK,null),rs.r6.map(this.renderPresetOption),o.createElement(oF.sK,null),rs.J_.map(this.renderPresetOption),o.createElement(oF.sK,null),rs.AG.map(this.renderPresetOption),o.createElement(oF.sK,null),rs.$w.map(this.renderPresetOption),o.createElement(oF.sK,null),o.createElement(rI,{value:"CUSTOM",recordingKey:tJ.Pt(this.props,"CUSTOM")},o.createElement("div",{className:ru},o.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.custom_size")),o.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.fit")))),o.createElement(rI,{value:"PRESENTATION",recordingKey:tJ.Pt(this.props,"PRESENTATION")},o.createElement("div",{className:ru},o.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.presentation")),o.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.fill")))),o.createElement(oF.sK,null),rs.dr.map(this.renderPresetOption))}}rP.displayName="DeviceDropdown";class rC extends oF.l6{}class rA extends oF.c${}class rk extends tJ.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=rs.hY[e];return t?t.getI18nStyleName():(0,T.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return o.createElement(rA,{value:n,key:t,recordingKey:tJ.Pt(this.props,n)},rs.hY[n].getI18nStyleName())}}render(){let e=rs.hY[this.props.presetIdentifier];if(!e)return null;let t=rs.yr[e.deviceName],n=this.props.presetIdentifier;return o.createElement(rC,{className:rm,chevronClassName:r_,inputClassName:rg,id:"prototype-style-select",property:n,formatter:this.formatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:"prototype_device_panel--modelDropdown--WbHYJ",recordingKey:tJ.Pt(this.props,"select")},t.map(this.renderStyleOption))}}rk.displayName="ModelDropdown";var rw=n(45623),rO=n(536825),rx=n(304061),rD=n(939683),rR=n(529004),rM=n(522739),rL=n(163023),rV=n(723081),rK=n(46878),rU=n(634238),rF=n(234945),rB=n(279702),rG=n(113468),rz=n(107244),rY=n(248752);function rW(e){return e??"Default"}let rH=o.createContext({getNodeName:rW}),r$=o.memo(function({getNodeName:e=rW,children:t}){let n=o.useMemo(()=>({getNodeName:e}),[e]);return o.createElement(rH.Provider,{value:n},t)});var rX=n(325682),rQ=n(73349),rJ=n(38340),rj=n(908946),rq=n(987850),rZ=n(239737),r0=n(222478),r1=n(709731),r2=n(30075),r4=n(384775),r8=n(406385),r3=n(623590);function r5(){let e=(0,r.wA)(),t=(0,r.d4)(e=>(0,tB.Yh)(e.mirror.appModel,r0.JT.MAGIC_LINK)),n=(0,rZ.PE)(),{withinMeter:a}=(0,rq.X)(r0.JT.MAGIC_LINK);return n&&a?o.createElement("span",{className:"magic_link--magicLinkButton--CWefW","data-testid":"magic-link-entry"},o.createElement(nl.K,{recordingKey:tJ.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":(0,T.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip"),onClick:()=>{(0,r4.$I)({moduleToOpen:{type:"custom",module:o.createElement(r8.p,null),name:r2.Sn.MAGIC_LINK,beforeModuleOpen:()=>{e((0,o9.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,r1.B3)(r0.JT.MAGIC_LINK),t&&(0,r1.Ag)(r0.JT.MAGIC_LINK,r3.e,{})}},trackingData:{source:"prototype_magic_link_triggered"}})},htmlAttributes:{"data-tooltip":(0,T.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip"),"data-tooltip-type":nm.Ib.TEXT,"data-tooltip-show-above":!0}},o.createElement(rj.B,null))):null}var r7=n(422237);let r6=(0,r7.ex)("prototype_info",function(e){let{tooltipText:t}=e;return o.createElement("div",{className:S.cx.flex.justifyCenter.itemsCenter.$},o.createElement("span",{className:S.cx.m6.flexGrow1.$,style:{maxWidth:144}},t))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var r9=n(139055),le=n(447141),lt=n(930269),ln=n(819785),la=n(695038),lo=n(612325);let lr=new rV.JV,ll=new rV.Eq,li=new rV.sX,ls=o.memo(function({filterInteractionCategory:e}){let t=(0,r.wA)(),n=(0,r.d4)(rJ.Cy),a=(0,r.d4)(rJ.n9),l=(0,r.d4)(rJ.DV),c=(0,r.d4)(lm),d=(0,r.d4)(rF.dK),p=(0,r.d4)(rF.Xt),m=(0,rJ.a2)(),u=(0,rJ.R)(),E=(0,r.d4)(lE),y=(0,r.d4)(lp),_=Object.keys(p).length>1,g=ly(),h=function(){let e=ly(),t=(0,r.d4)(lu);return!!e&&!!t&&t.selectionOverrides[i.YnC.PROTOTYPE_INTERACTIONS]}(),v=(0,F.q5)(),f=(0,rD.U)(),b=(0,tv.cJ)(),S=o.useMemo(()=>new rV.cP(d),[d]),T=o.useCallback(e=>S.format(e),[S]),N=o.useRef(null),I=e=>{t3.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:rB.zk.NO_BUT_TRACK_AS_EDIT}),t3.Y5.commit()},P=(0,rt.Zj)(Object.keys(p)),C=o.createElement(lc,{interactionGroups:m,inheritedInternalInteractionGroups:u,mixed:_,isOrInInstance:g,openFile:v,dispatch:t,currentSelectedProperty:c,onChange:(e,t)=>{let o=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),r=new Set,l=[];for(let e of o){let t=o6.dI(e.id);if(t&&!r.has(t))l.push(e);else{if(!(t=i.glU.generateUniqueID()))continue;let n=o6.sH(t);if(!n)continue;l.push({...e,id:n})}t&&r.add(t)}t===rG.J.NORMAL?l=[...l,...a]:t===rG.J.INHERITED_INTERNAL&&(l=[...n,...l]),I(l)},onAddProperty:e=>{e.stopPropagation();let t=[],o=[];for(let e of Object.keys(p)){let n=i.glU.generateUniqueID();if(!n)return;let a=o6.sH(n);if(!a)return;let r={id:a,sourceNodeID:o6.sH(e)??o6.Hr,event:{interactionType:function(e,t=!1){let n=new Set;for(let{event:t}of e)n.add(t.interactionType);for(let e of l_)if((!(0,s.kc)().sts_interaction_interop||!t||"DRAG"!==e)&&!n.has(e))return e;return"ON_KEY_DOWN"}(m,b)}};r.stateManagementVersion=1,r.actions=[{connectionType:"NONE"}],t.push(r);let l=(0,rx.kh)(d,e);o.push(l?l.guid:"")}let r=t.map(e=>rR.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(r.length>0){i.glU.setSelectedInteractions(r);let e=no.findDOMNode(N.current),t=(0,oK.cn)(e);lb(new oM.Mi(t.x,t.y+(0,nA.jz)(lt.rightNavGridRowHeight)))}let l=[...n,...t,...a];f("prototype_interaction_added",{interactionCount:l.length,sourceTlfIds:JSON.stringify(o)}),I(l)},onDeleteProperty:(e,t)=>{let n=(t===rG.J.NORMAL?m:u).filter((t,n)=>e.has(n)),a=[];for(let e of n)a.push(...e.interactions);let o=lf(a);tH.l7.user("delete-prototype-interactions",()=>i.glU.deleteInteractions(o)),t3.Y5.deselectProperty()},shouldIgnoreKeyboardEvents:l.length>0||c.type!==i.rrT.PROTOTYPE_INTERACTION&&c.type!==i.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,isValidPrototypingSourceSelected:E,showResetInteractionsButton:h,toggleScrollBehaviorPicker:()=>{if(y?.id===rn.AO)t(ed.XE());else{let e=no.findDOMNode(N.current),n=(0,oK.cn)(e);t(ed.u1({id:rn.AO,initialX:n.x,initialY:n.y}))}},headerAccessory:P&&o.createElement(r5,null),inSites:b,filterInteractionCategory:e});return o.createElement(r$,{getNodeName:T},b?C:o.createElement(na.Zk,{"data-onboarding-key":"prototypePanel",ref:N,"data-testid":"prototype-interaction-list"},C))});function lc(e){let t=o.useRef(!1),n=(0,em.GS)(),a=(0,s.kc)().sts_interaction_interop&&!!e.filterInteractionCategory,r=!a||e.filterInteractionCategory===rG.J.NORMAL,l=e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0,c=a?e.filterInteractionCategory===rG.J.INHERITED_INTERNAL&&l:l,d=n?o.createElement("div",{className:"prototype_interaction_list--categoryRow--Xxfm4"},o.createElement(oD.J,{className:"prototype_interaction_list--categoryLabel--0dGOM"},(0,T.tx)("proto.interaction_list.variant_interactions"))):o.createElement(na.fI,null,o.createElement(na.UZ,{className:"prototype_interaction_list--label--dGwgy"},(0,T.tx)("proto.interaction_list.variant_interactions")));return o.createElement(o.Fragment,null,r&&o.createElement(rY.h6,{title:e.inSites?"":(0,T.t)("proto.title_interactions"),stylePickerShown:{isShown:!1},addProperty:e.onAddProperty,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,hideAddButton:!e.isValidPrototypingSourceSelected,renderProperty:(n,a,r,l,i,c,d,p,m)=>!(0,s.kc)().sts_interaction_interop&&e.inSites&&(0,r9.p4)(n.interactions)?o.createElement(o.Fragment,{key:a}):o.createElement(ld,{interactionGroups:e.interactionGroups,interactionGroup:n,index:a,selected:r,hasFocus:i,isDragging:l,singletonRow:e.interactionGroups.length<=1,onMouseDown:d,onMouseMove:p,onMouseUp:m,dispatch:e.dispatch,category:rG.J.NORMAL,autoOpenVariablePicker:t,recordingKey:tJ.Pt("prototypeInteractionList",a),key:a,inSites:e.inSites}),openFile:e.openFile,onChange:t=>e.onChange(t,rG.J.NORMAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:i.rrT.PROTOTYPE_INTERACTION,propertyList:e.interactionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,rG.J.NORMAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:"prototypeInteractionList",boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,showResetInteractionsButton:e.showResetInteractionsButton,onResetInteractions:tH.nc.user("reset-instance-interactions",()=>i.glU.resetSymbolOverrides(i.YnC.PROTOTYPE_INTERACTIONS)),headerAccessory:e.headerAccessory}),c&&d,c&&o.createElement(rY.h6,{title:"",stylePickerShown:{isShown:!1},addProperty:b.lQ,hideAddButton:!0,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,renderProperty:(n,a,r,l,i,s,c,d,p)=>o.createElement(ld,{interactionGroups:e.inheritedInternalInteractionGroups,interactionGroup:n,key:a,index:a,selected:r,hasFocus:i,isDragging:l,singletonRow:e.inheritedInternalInteractionGroups.length<=1,onMouseDown:c,onMouseMove:d,onMouseUp:p,dispatch:e.dispatch,category:rG.J.INHERITED_INTERNAL,autoOpenVariablePicker:t,recordingKey:tJ.Pt("prototypeInheritedInternalInteractionList",a),inSites:e.inSites}),openFile:e.openFile,onChange:t=>e.onChange(t,rG.J.INHERITED_INTERNAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:i.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,propertyList:e.inheritedInternalInteractionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,rG.J.INHERITED_INTERNAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:tJ.Pt("prototypeInheritedInternalInteractionList")}))}function ld({interactionGroups:e,interactionGroup:t,index:n,hasFocus:a,isDragging:l,selected:c,singletonRow:d,onMouseDown:p,onMouseMove:m,onMouseUp:u,dispatch:E,category:y,recordingKey:_,inSites:g}){let h=(0,em.GS)(),{getNodeName:f}=o.useContext(rH),S=(0,r.d4)(rJ.DV),N=(0,rJ.a2)(),I=(0,r.d4)(lp),P=I?.id===rn.o$?I:null,C=(0,r.d4)(rF.dK),[A,k]=o.useState(!1),w=(0,v.md)(rU.NE)?ll:lr,O=o.useContext(r9.qd),x=function(e,t){let n=new Set(t.map(e=>{let t=rR.s(e);return t?o6.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=o6.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,S),D=o.useRef(null),R=o.useRef(null),M=o.useCallback(()=>{let e=h&&g?R.current:no.findDOMNode(D.current);lb((0,oK.cn)(e))},[g,h]),L=o.useCallback(()=>{i.glU.setSelectedInteractions([]),E(ed.XE()),t3.Y5.deselectProperty()},[E]),V=n=>{if(!D||!R)return;let a=lv(t);if(n.metaKey||n.ctrlKey)x?a=S.filter(e=>!a.includes(e)):a.push(...S);else if(n.shiftKey){var o;let n,r;let l=(o=t.key,e.findIndex(({key:e})=>e===o));if(-1===l)return;let i=function(e,t){let n=1/0,a=e;for(let o of t){let t=Math.abs(e-o);t<n&&(a=o,n=t)}return a}(l,function(e,t){let n=new Set,a=new Set(t);for(let t=0;t<e.length;t++)lv(e[t]).some(e=>a.has(e))&&n.add(t);return n}(e,S)),s=(n=l,r=i,l>i&&(n=i,r=l),e.slice(n,r+1));for(let e of(a=[...S],s))a.push(...lv(e))}i.glU.setSelectedInteractions(a),t3.Y5.updateAppModel({currentSelectedProperty:{type:y===rG.J.NORMAL?i.rrT.PROTOTYPE_INTERACTION:i.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),a.length?P&&P.shouldPin?g&&(a.length>1||a.includes(S[0]))&&L():M():L()},K=(0,r.d4)(rz.ZM),U=!1,F=null,B=null;for(let e of t.interactions)if(!F&&e.actions&&e.actions.length>0)F=e.actions[0],B=e;else if(lh(F,f,h,K)!=lh((e.actions??[])[0],f,h,K)){U=!0;break}let G=()=>{let e=lf(t.interactions);i.glU.hoverInteractions(e),k(!0)},z=()=>{i.glU.hoverInteractions([]),k(!1)},Y=e=>{e.stopPropagation()},W=e=>{e.stopPropagation();let n=lf(t.interactions);tH.l7.user("delete-prototype-interactions",()=>i.glU.deleteInteractions(n)),t3.Y5.deselectProperty(),t3.Y5.commit()},H=!1,$=!1;if(y===rG.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=C.get(o6.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{H=!0;break}}}let a=i.glU.getContainingStateGroupOrSelf(o6.dI(e.sourceNodeID??o6.Hr))||"";if(""===a||""!==n&&a!==n){H=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),a=e.some(e=>"ON_HOVER"===e.event.interactionType);$=n&&a}H=y!==rG.J.INHERITED_INTERNAL&&H;let X=function(e,t,n){if(e!==rG.J.INHERITED_INTERNAL)return null;let a=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,a=void 0!==t.actions&&t.actions.length>=1;if(!n||!a)return!1;let o=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),r=e.actions.every(e=>o6.fn(e.transitionNodeID));var l=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){l=!0;break}return o&&r&&l}(e.interactions[0],t.interactions[0]));return a?.interactions[0]??null}(y,t,e),Q=(0,tX.ZC)(X),J=(0,rD.U)();if(o.useEffect(()=>{null===Q&&X&&J("prototype_interaction_conflict_override_created",{interaction_type:t.interactions[0].event?.interactionType,action_type:X.event?.interactionType})}),(0,s.kc)().sts_interaction_interop&&t.event.interactionType&&O&&O!==(0,rX.hD)(t.event.interactionType)||(0,s.kc)().sts_interaction_interop&&"mouse"===O&&(0,r9.zL)(t.interactions))return null;let j=y===rG.J.INHERITED_INTERNAL&&N.some(e=>e.key===t.key)&&!X,q=c&&a,Z=x&&!c,ee=new rV.js(h,K),et=(0,rV.mj)(F),en=B?.actions?.length??0,ea=(0,s.kc)().sts_interaction_interop&&en>1?(0,T.t)("sites.panel.interaction_summary",{numActions:en}):U||!F||"NONE"===et?void 0:ee.format(et),eo=o.createElement(rw.Z,null),er=H||$||j,el=H?(0,T.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip"):$?(0,T.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip"):j?(0,T.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip"):"",ei=o.createElement(aI.Y9,{ref:R,"data-testid":`prototypeInteractionItem-${n}`,singletonRow:d,dragging:l,onMouseDown:p,onMouseMove:m,onMouseUp:u,onMouseEnter:G,onMouseLeave:z,recordingKey:tJ.Pt(_,"draggableRow"),onClick:(0,s.kc)().sts_interaction_interop?V:b.lQ},o.createElement(aI.s2,{label:null,leftIcon:o.createElement(na.YW,{onClick:(0,s.kc)().sts_interaction_interop?b.lQ:V,selected:Z&&!!P,recordingKey:tJ.Pt(_,"interactionIcon"),onMouseDown:Y,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":er?el:lg(t.event,w,!!g),className:A&&(0,s.kc)().sts_interaction_interop?le.zY:void 0},er?eo:(0,rK.e7)(t.event.interactionType)),input:o.createElement(rM.D8,{onClick:(0,s.kc)().sts_interaction_interop?b.lQ:V,onMouseDown:Y,recordingKey:tJ.Pt(_,"interactionText")},lg(t.event,w,!!g),ea&&o.createElement("span",{className:"prototype_interaction_list--summaryText--hGpp4"},"\xa0\xb7\xa0",ea)),rightIcon:o.createElement("div",{hidden:(0,s.kc)().sts_interaction_interop&&!A},o.createElement(nl.K,{onClick:W,"aria-label":(0,T.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:tJ.Pt(_,"removeButton"),htmlAttributes:{onMouseDown:Y}},o.createElement(np.U,{svg:ln.A,fallbackSvg:la.A},o.createElement(rO.O,null))))}));return g?ei:o.createElement("div",null,o.createElement(nn.e,{ref:D,className:h?"prototype_interaction_list--interactionListRow---i0Rg ui3_rows--ui3OneInputOneIconRow--SMoQ9 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu":void 0,"data-testid":`prototypeInteractionItem-${n}`,selected:q,selectedSecondary:Z,singletonRow:d,dragging:l,onMouseDown:p,onMouseMove:m,onMouseUp:u,onMouseEnter:G,onMouseLeave:z,recordingKey:tJ.Pt(_,"draggableRow")},o.createElement(rM.D8,{className:eA()({"prototype_interaction_list--interactionButton--q-58Q":!0,"prototype_interaction_list--interactionButtonSelected--8YX9A":q,"prototype_interaction_list--interactionButtonSelectedSecondary--Nx73L":Z}),onClick:V,onMouseDown:Y,recordingKey:_},er&&o.createElement(rL.B,{className:"prototype_interaction_list--warningIcon--Mgr5O",svg:lo.A,"data-tooltip-type":nm.Ib.SPECIAL,"data-tooltip":r6,"data-tooltip-text":el}),o.createElement("div",{className:er?"prototype_interaction_list--interactionNameShort--5UMLL prototype_interaction_list--interactionName--zQsSL":"prototype_interaction_list--interactionName--zQsSL"},lg(t.event,w,!!g)),o.createElement(np.U,{className:"prototype_interaction_list--actionIcon--x-haP",svg:U?(0,rK.Yb)("NONE"):(0,rK.Yb)((0,rV.mj)(F))},(0,rK.av)((0,rV.mj)(F))),o.createElement("div",{className:"prototype_interaction_list--targetText--UMXyE",dir:"auto"},U?(0,T.t)("proto.variant_actions.mixed"):y===rG.J.INHERITED_INTERNAL?(0,T.t)("proto.variant_actions.change_to"):lh(F,f,h,K))),o.createElement("span",{className:"prototype_interaction_list--removeButton--g6aiQ"},o.createElement(nl.K,{onClick:W,"aria-label":(0,T.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:tJ.Pt(_,"removeButton"),htmlAttributes:{onMouseDown:Y}},o.createElement(np.U,{svg:ln.A,fallbackSvg:la.A},o.createElement(rO.O,null))))))}function lp(e){return e.pickerShown}function lm(e){return e.mirror.appModel.currentSelectedProperty}function lu(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function lE(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function ly(){let e=(0,r.d4)(rF.Xt),t=(0,r.d4)(rF.dK);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let l_=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function lg(e,t,n){let a=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,rQ._i)(e.keyTrigger.keyCodes),o=(0,rQ.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return(0,s.kc)().sts_interaction_interop&&n?(0,rQ.U8)(t):a+" ("+(0,rQ.U8)(t)+")";if(o)return(0,s.kc)().sts_interaction_interop&&n?o:a+" ("+o+")"}return a}function lh(e,t,n,a){let o=new rV.js(n,a);if(!e)return o.format("NONE");let r=(0,rV.mj)(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return o.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,tU.gl)(e.connectionURL))return(0,T.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return o.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return li.format(e)}return e.transitionNodeID?(0,tU.gl)(e.transitionNodeID)?(0,T.t)("fullscreen.mixed"):t(o6.dI(e.transitionNodeID)):o.format("NONE")}function lv(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>rR.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function lf(e){let t=[];for(let n of e){let{sourceNodeID:e,id:a}=n;e&&a&&t.push(rR.d({nodeID:e,interactionID:a}))}return t}function lb(e){t3.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:i.yxn.PROPERTIES_PANEL,x:e.x,y:e.y}})}var lS=n(889157),lT=n(797613),lN=n(974985),lI=n(256981),lP=n(43604),lC=n(263159);let lA=(0,o.memo)(function(e){return(0,lC.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,lC.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14 7.879v-1.88a1 1 0 0 0-1.707-.706L9.586 8H7.5A1.5 1.5 0 0 0 6 9.5v5c0 .383.144.733.38.998l.711-.71A.5.5 0 0 1 7 14.5v-5a.5.5 0 0 1 .5-.5H10l2-2 1-1v2.879zm0 4.242-1 1V18l-1-1-1.44-1.44-.706.708 2.439 2.439A1 1 0 0 0 14 18v-5.88m2.069-2.068.71-.71a3.501 3.501 0 0 1-1.217 5.993c-.29.092-.562-.144-.562-.448v-.03c0-.237.17-.437.392-.522a2.5 2.5 0 0 0 .677-4.283m-1.013 1.013.172-.172c.113-.056.248-.044.36.073.255.269.412.632.412 1.033s-.157.764-.412 1.033c-.238.25-.588.02-.588-.326v-1.415a.5.5 0 0 1 .056-.226m2.798-4.92a.5.5 0 0 1 0 .708l-11 11a.5.5 0 1 1-.708-.707l11-11a.5.5 0 0 1 .708 0",clipRule:"evenodd"})})});var lk=n(875533),lw=n(697945),lO=n(477633),lx=n(564734),lD=n(68710),lR=n(632319);function lM({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,tU.gl)(e)&&(0,tU.gl)(t)?n=(0,T.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:o.createElement(rL.B,{svg:lO.A,className:lw.eT}),speakerSvg:o.createElement(rL.B,{svg:lD.A,className:lw.To})}):(0,tU.gl)(e)?n=(0,T.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:o.createElement(rL.B,{svg:lO.A,className:lw.eT})}):(0,tU.gl)(t)&&(n=(0,T.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:o.createElement(rL.B,{svg:lD.A,className:lw.To})})),n?o.createElement(na.fI,null,o.createElement(na.UZ,{className:lw.pc},n)):null}let lL=e=>(0,tU.gl)(e)?"mixed":e,lV=e=>!0===e,lK=function(e){let t=()=>{let t=!lV(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,o9._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:lL(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},n=()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,o9._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:lL(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},a=o.createElement("span",{className:(0,em.GS)()?void 0:lw.hW},o.createElement(ox.S,{label:o.createElement(oD.J,{htmlAttributes:{"data-tooltip":(0,T.t)("proto.prototype_panel.default_video_playback_state"),"data-tooltip-type":nm.Ib.TEXT}},(0,T.tx)("proto.prototype_panel.autoplay")),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,o9._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:lL(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:lV(e.videoPlayback.autoplay),mixed:(0,tU.gl)(e.videoPlayback.autoplay)})),r=(0,em.GS)()?o.createElement(lT.f,{checked:lV(e.videoPlayback.mediaLoop),mixed:(0,tU.gl)(e.videoPlayback.mediaLoop),onIcon:o.createElement(np.U,{svg:lO.A},o.createElement(lN.p,null)),offIcon:o.createElement(np.U,{svg:lx.A},o.createElement(lI.U,null)),onChange:t,recordingKey:tJ.Pt(e,"videoLoopToggle"),"aria-label":(0,T.t)("proto.prototype_panel.loop"),htmlAttributes:{"data-tooltip":(0,T.t)("proto.prototype_panel.loop"),"data-tooltip-type":nm.Ib.TEXT}}):o.createElement(lk.m,{toggled:lV(e.videoPlayback.mediaLoop),svg:e.videoPlayback.mediaLoop?lO.A:lx.A,fallbackSvg:e.videoPlayback.mediaLoop?lO.A:lx.A,onMouseDown:t,recordingKey:tJ.Pt(e,"videoLoopToggle"),"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.loop"),dataTestId:"videoLoopToggle",className:lw.BM}),l=(0,em.GS)()?o.createElement(lT.f,{checked:lV(!e.videoPlayback.muted),mixed:(0,tU.gl)(e.videoPlayback.muted),onIcon:o.createElement(np.U,{svg:lD.A},o.createElement(lP.L,null)),offIcon:o.createElement(np.U,{svg:lR.A},o.createElement(lA,null)),onChange:n,recordingKey:tJ.Pt(e,"videoSoundToggle"),"aria-label":(0,T.t)("proto.prototype_panel.sound"),htmlAttributes:{"data-tooltip":(0,T.t)("proto.prototype_panel.sound"),"data-tooltip-type":nm.Ib.TEXT}}):o.createElement(lk.m,{toggled:!e.videoPlayback.muted,svg:lV(e.videoPlayback.muted)?lR.A:lD.A,fallbackSvg:lV(e.videoPlayback.muted)?lR.A:lD.A,onMouseDown:n,recordingKey:tJ.Pt(e,"videoSoundToggle"),"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.sound"),dataTestId:"videoSoundToggle",className:lw.BM}),i=(0,em.GS)()?o.createElement(aI.pG,{input:a,leftIcon:r,rightIcon:l}):o.createElement(na.fI,{className:lw.kh},a,o.createElement("div",{className:lw.zc},r,l));return o.createElement(na.Zk,null,o.createElement(na.fI,null,o.createElement(na.xw,{extended:!0},(0,T.tx)("proto.prototype_panel.video"))),i,o.createElement(lM,{videoPlayback:e.videoPlayback}))};var lU=n(794272),lF=n(555074),lB=n(420450),lG=n(955136);function lz(e){let{type:t}=e;return o.createElement("div",{className:S.cx.flex.justifyCenter.itemsCenter.$},o.createElement(rL.B,{className:S.cx.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?lB.A:lG.A}),o.createElement("span",{className:S.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,T.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")))}let lY=(0,r7.ex)("prototype_scroll_horizontal_info",lz,()=>({type:"horizontal",unconstrainWidth:!0})),lW=(0,r7.ex)("prototype_scroll_vertical_info",lz,()=>({type:"vertical",unconstrainWidth:!0})),lH="scroll_behavior_panel--inactiveLabel--IexW8",l$="scroll_behavior_panel--inactiveLabelContainer--lQjAi";var lX=n(591363);function lQ(e){let{scrollDirection:t,showScrollWarning:n,disableOverflowBehaviorItem:a,disableScrollBehaviorItem:l,dropdownShown:s,updateSelectionProperties:c}=e,d=(0,r.wA)(),[p,m]=function(){let e=(0,er.J2)(i.Ez5.propertiesPanelState().shownPropertiesPanels)[i.ibQ.OVERFLOW_ITEM],t=(0,o7.cJ)(),n=(0,lF.kl)("isSection"),a=(0,lF.kl)("anyTopLevelFramesInSelection");return[e,!t&&!n&&!a]}(),u=(0,em.GS)()?o.createElement(oe.mS,{titleTx:(0,T.tx)("proto.scroll_panel.scroll_behavior_title")}):o.createElement(na.fI,null,o.createElement(na.xw,{className:"scroll_behavior_panel--panelTitle--kN-Nl"},(0,T.tx)("proto.scroll_panel.scroll_behavior_title")));return p||m?o.createElement(tZ.k,{name:"scroll_behavior_panel"},o.createElement(na.Zk,null,u,m&&o.createElement(na.fI,null,o.createElement("div",{className:l$},o.createElement("span",{className:lH},(0,T.tx)("proto.scroll_panel.position_dropdown.position"))),o.createElement(l2,{recordingKey:tJ.Pt(e,"scrollBehavior"),dropdownShown:s,disabled:l})),p&&o.createElement(na.fI,null,o.createElement("div",{className:l$},o.createElement("span",{className:lH},(0,T.tx)("proto.scroll_panel.overflow_dropdown.overflow"))),n&&o.createElement(rL.B,{className:"scroll_behavior_panel--infoIcon--FeXbf",svg:lX.A,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":nm.Ib.SPECIAL,"data-tooltip":"HORIZONTAL"===t?lY:lW,"data-tooltip-show-immediately":!0}),o.createElement(lZ,{className:n?"scroll_behavior_panel--scrollDirectionShort--w6iSo":"scroll_behavior_panel--scrollDirection--XSmzK",property:t,dispatch:d,dropdownShown:s,onChange:e=>{d((0,o9._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,tU._W)(t,"MIXED")}})),c({scrollDirection:e})},disabled:a,recordingKey:tJ.Pt(e,"scrollDirection")})))):null}class lJ extends oF.c${}class lj extends oF.l6{}let lq=["NONE","HORIZONTAL","VERTICAL","BOTH"];class lZ extends o.PureComponent{render(){return o.createElement(lj,{id:"scroll-direction-select",className:this.props.className,chevronClassName:"scroll_behavior_panel--scrollDirectionChevron--5keRt",inputClassName:"scroll_behavior_panel--scrollDirectionInput--vJSqu",property:this.props.property||"NONE",formatter:rV.Rk,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,disabled:this.props.disabled,recordingKey:this.props.recordingKey,dataTestId:"scroll-direction-dropdown"},lq.map(e=>o.createElement(lJ,{key:e,value:e,recordingKey:tJ.Pt(this.props,e)})))}}lZ.displayName="ScrollDirectionDropdown";class l0 extends oF.l6{}class l1 extends oF.c${}function l2(e){let t=(0,r.wA)(),n=(0,lF.kl)("scrollBehavior"),{fixedScrollingDisabled:a}=(0,lU.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}}),l="scroll-behavior-select",s=e.dropdownShown&&e.dropdownShown.type===l?rV.Ge:rV.wi;return o.createElement(l0,{id:l,className:"scroll_behavior_panel--scrollPosition--YAyUM",formatter:s,property:n||"SCROLLS",onChange:e=>{t((0,o9._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?i.KjJ.FIXED:"STICKY_SCROLLS"===e?i.KjJ.STICKY_SCROLLS:i.KjJ.SCROLLS;tH.l7.user("set-scroll-behavior",()=>i.X3B.aggressivelySetScrollBehaviorOfSelection(n)),t3.Y5.commit()},dispatch:t,dropdownShown:e.dropdownShown,dropdownClassName:"scroll_behavior_panel--fullWidth--reSmx",recordingKey:e.recordingKey,disabled:e.disabled,dataTestId:"scroll-behavior-dropdown"},o.createElement(l1,{value:"SCROLLS"}),o.createElement(l1,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:a}),o.createElement(l1,{value:"STICKY_SCROLLS"}))}var l4=n(105020),l8=n(548183),l3=n(854547),l5=n(654784),l7=n(351731);function l6(){return o.createElement(re.u,{idForTests:"create-connection-hint",title:(0,T.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:l3.A,iconFallback:l5.A,hintText:(0,T.t)("proto.onboarding.select_a_frame_or_object_hint")})}function l9(){return o.createElement(re.u,{idForTests:"delete-connection-hint",title:(0,T.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:l4.A,iconFallback:l8.A,hintText:(0,T.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function ie(){return o.createElement(re.u,{idForTests:"play-button-hint",title:(0,T.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:l7.A,hintText:(0,T.t)("proto.onboarding.use_the_play_button_hint")})}function it({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:a}){let r=0===a&&!e,l=0!==a&&!t,i=!n,s=o.useMemo(()=>r?D.c.CREATING_A_CONNECTION:l?D.c.REMOVING_A_CONNECTION:i?D.c.RUNNING_YOUR_PROTOTYPE:null,[r,l,i]);return s?o.createElement(R.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:s}},o.createElement(na.Zk,null,o.createElement("div",null,r&&o.createElement(l6,null),l&&o.createElement(l9,null),i&&o.createElement(ie,null)))):null}class ia extends o.PureComponent{constructor(){super(...arguments),this.onClickShowPrototypeSettings=()=>{this.props.dispatch((0,o9._P)({name:"Show Prototype Settings Clicked"})),ee.wr()}}renderOnboardingPanel(){let e=!!this.props.userFlags.dismissed_create_connection_hint,t=!!this.props.userFlags.dismissed_delete_connection_hint,n=!!this.props.userFlags.dismissed_play_button_hint,a=this.props.selectionProperties.numTransitionsOnCurrentPage;return o.createElement(it,{dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:a})}renderPrototypeSettingsPanel(){return o.createElement(tZ.k,{name:"show_prototype_settings_panel"},o.createElement(na.Zk,{className:this.props.isUI3?oJ.rq:void 0},o.createElement(aN.z,{onClick:this.onClickShowPrototypeSettings,recordingKey:tJ.Pt(this.props,"prototypeSettingsButton")},(0,T.tx)("proto.menu.show_prototype_settings"))))}renderDevicePanel(){(0,tz.KF)((0,tU.hS)(this.props.selectionProperties.prototypeDevice),"should not have mixed device selection");let e=(0,o9.Qx)(this.props.selectionProperties.prototypeDevice);return o.createElement(rS,{key:"device-panel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,prototypeDevice:e,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:"devicePanel",isUI3:this.props.isUI3,pickerShown:this.props.pickerShown})}render(){let e=!(0,tU.hS)(this.props.selectionProperties.transitionNodeID)||o6.fn((0,tU.E7)(this.props.selectionProperties.transitionNodeID)),t=this.props.selectionProperties.numSelected??!1,n=!this.props.isSites&&!!this.props.selectionProperties.numVideosSelected,a=this.props.selectionProperties.isInstanceSelected||this.props.selectionProperties.isInstanceSublayerSelected,r=this.props.selectionProperties.isInstanceSublayerSelected,l=!this.props.isSites&&this.props.selectionProperties.prototypeStartingPointsInfo&&this.props.selectionProperties.prototypeStartingPointsInfo.length>0,i=!this.props.isSites&&!e,s=!this.props.isSites&&((this.props.selectionProperties.isValidPrototypingSourceSelected??!0)||this.props.selectionProperties.isSectionSelected&&(0,rt.YR)());if(!t)return o.createElement("div",null,!this.props.isSites&&this.renderDevicePanel(),!this.props.isUI3&&o.createElement(rl,{recordingKey:tJ.Pt(this.props,"backgroundPanel"),prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,pickerShown:this.props.pickerShown,dispatch:this.props.dispatch}),l&&o.createElement(aQ.A,null),!this.props.isSites&&i&&this.renderOnboardingPanel(),o.createElement(aa.Mw,{panelName:aa.ON.PROTOTYPE}));{let e=o.createElement(lQ,{dropdownShown:this.props.dropdownShown,scrollDirection:this.props.selectionProperties.scrollDirection??"NONE",showScrollWarning:this.props.selectionProperties.showWontScrollWarning??!1,disableOverflowBehaviorItem:!!a,disableScrollBehaviorItem:!!r,recordingKey:tJ.Pt(this.props,"scrollBehaviorPanel"),updateSelectionProperties:t3.Y5.updateSelectionProperties});return o.createElement("div",null,!this.props.isSites&&this.props.selectionProperties.isTopLevelFrameAndValidPrototypeSourceSelected&&o.createElement(lS.A,{recordingKey:tJ.Pt(this.props,"startingPointPanel")}),s&&o.createElement(ls,null),e,n&&o.createElement(lK,{updateSelectionProperties:t3.Y5.updateSelectionProperties,dispatch:this.props.dispatch,videoPlayback:function(e){let{videoMediaLoop:t,videoAutoplay:n,videoMuted:a,numVideosSelected:o}=e;return(0,tz.B1)(t),(0,tz.B1)(n),(0,tz.B1)(a),(0,tz.B1)(o),{autoplay:n,muted:a,mediaLoop:t,numVideosSelected:o}}(this.props.selectionProperties)}),!this.props.isSites&&this.renderPrototypeSettingsPanel(),i&&this.renderOnboardingPanel(),o.createElement(aa.Mw,{panelName:aa.ON.PROTOTYPE}))}}}ia.displayName="PrototypePanel";let io=(0,R.kp)(function(e){let{bigNudgeAmount:t,smallNudgeAmount:n}=(0,tb.sT)(),a=(0,em.GS)(),r=(0,o7.cJ)();return o.createElement(ia,{...e,bigNudgeAmount:t,smallNudgeAmount:n,isUI3:a,isSites:r})},a$.e0.PROTOTYPE_PANEL);function ir({appModel:e,colorFormat:t,dropdownShown:n,expandedFramePresetType:a,library:l,pickerShown:s,sceneGraphSelection:c,selectedStyleProperties:d,selectionProperties:p,shownPanels:m,userFlags:u}){let E=(0,r.wA)(),y=(0,F.q5)(),_=(0,o7.cJ)(),g=(0,tx.RB)(d)?d:p,h=!m[i.ibQ.FRAME_PRESETS]&&!m[i.ibQ.PENCIL_TOOL]&&!g.containsResponsiveSets;return o.createElement(tR.i,null,o.createElement(tL.VF,{isVisible:m[i.ibQ.FRAME_PRESETS]},()=>o.createElement(tV.nl,{key:"frame-presets",recordingKey:"framePresetPanel",dispatch:E,expandedFramePresetType:a})),!_&&o.createElement(tL.VF,{isVisible:m[i.ibQ.PENCIL_TOOL]},()=>o.createElement(tK.q,{id:"pencilToolPanel",key:"pencilToolPanel",recordingKey:"pencilToolPanel",openFile:y})),o.createElement(tL.VF,{isVisible:h},()=>o.createElement(io,{key:"prototype",recordingKey:"prototypePanel",dispatch:E,selectionProperties:g,appModel:e,pickerShown:s,dropdownShown:n,currentTool:e.currentTool,colorFormat:t,sceneGraphSelection:c,editModeType:e.activeCanvasEditModeType,library:l,openFile:y,userFlags:u})))}function il({scrollContainer:e,refMainScrollContainer:t,...n}){(0,aH.S2)();let a=n.user,r=(0,tv.my)()===tP.nT.Design,l=(0,tg.Kf)({isDesign:r,isUnauth:!a})(),c=n.appModel.topLevelMode,d=n.propertiesPanelTab,p=n.appModel.isReadOnly,m=c!==i.lyf.PREVIEW&&(c!==i.lyf.BRANCHING||!(0,tx.S4)(n.appModel,n.user))&&c!==i.lyf.DEV_HANDOFF&&d===i.FAf.DESIGN,u=c!==i.lyf.PREVIEW&&c!==i.lyf.BRANCHING&&d===i.FAf.PROTOTYPE,E=c===i.lyf.PREVIEW&&!n.userStateLoaded&&!l||d===i.FAf.INSPECT,y=(0,s.kc)().livefish&&c===i.lyf.LAYOUT&&!p&&d===i.FAf.LIVING_DESIGNS,_=d===i.FAf.EXPORT,g=d===i.FAf.COMMENT;return o.createElement(o.Fragment,null,m&&o.createElement(az,{scrollContainer:e,...n}),u&&o.createElement(ir,{appModel:n.appModel,colorFormat:n.colorFormat,dropdownShown:n.dropdownShown,expandedFramePresetType:n.expandedFramePresetType,library:n.library,pickerShown:n.pickerShown,sceneGraphSelection:n.sceneGraphSelection,selectedStyleProperties:n.selectedStyleProperties,selectionProperties:n.selectionProperties,shownPanels:n.shownPanels,userFlags:n.userFlags}),E&&o.createElement(aJ,{scrollContainer:e,selectionProperties:n.selectionProperties}),y&&o.createElement(o3,null),_&&o.createElement(aW,{appModel:n.appModel,dropdownShown:n.dropdownShown,pickerShown:n.pickerShown,saveAsState:n.saveAsState,sceneGraphSelection:n.sceneGraphSelection,selectedStyleProperties:n.selectedStyleProperties,selectionProperties:n.selectionProperties}),g&&o.createElement(n.commentsPanel,null))}function ii(e){let{dispatch:t,...n}=e,a=null,r=e=>{a=e};return o.createElement(o5.j,{recordingKey:n.recordingKey,activeTab:n.propertiesPanelTab,refMainScrollContainer:r},o.createElement(il,{...n,scrollContainer:a,refMainScrollContainer:r}))}var is=n(16771),ic=n(59434);let id=o.memo(function(){let e=(0,r.wA)(),t=(0,r.d4)(e=>(0,tN.getPermissionsState)(e)),n=(0,U.aV)(),a=(0,r.d4)(e=>e.loadingState),l=(0,r.d4)(e=>e.mirror.appModel),s=(0,v.md)(tI.wm),c=(0,r.d4)(e=>e.mirror.sceneGraphSelection),d=(0,r.d4)(e=>e.mirror.selectionPaints),p=(0,r.d4)(e=>e.mirror.selectionProperties),m=(0,r.d4)(e=>e.mirror.selectedStyleProperties),u=(0,r.d4)(e=>e.currentUserOrgId),E=(0,r.d4)(e=>e.dropdownShown),y=(0,r.d4)(e=>e.fonts),_=(0,r.d4)(e=>e.fileVersion),g=(0,r.d4)(e=>e.installedPluginVersions),h=(0,r.d4)(e=>e.library),f=(0,r.d4)(e=>e.localPlugins),b=(0,r.d4)(e=>e.modalShown),S=(0,r.d4)(e=>e.multiplayer),T=(0,r.d4)(e=>e.openFile),N=(0,r.d4)(e=>e.pickerShown),I=(0,r.d4)(e=>e.pickerInStyleCreationShown),P=(0,r.d4)(e=>e.publishedPlugins),C=(0,r.d4)(e=>e.saveAsState),A=(0,r.d4)(e=>e.selectedView),k=(0,r.d4)(e=>e.voice.showWidget),w=(0,r.d4)(e=>e.stylePickerListLayout),O=(0,r.d4)(e=>e.stylePickerShown),x=(0,r.d4)(e=>e.stylePreviewShown),D=(0,r.d4)(e=>e.styleSets),R=(0,r.d4)(e=>e.usedKeyboardShortcuts),M=(0,r.d4)(e=>e.user),L=(0,r.d4)(e=>e.userFlags),V=(0,r.d4)(e=>e.userStateLoaded),K=(0,r.d4)(e=>e.repos),F=(0,r.d4)(e=>e.folders),B=(0,r.d4)(e=>e.teams),G=(0,r.d4)(e=>e.orgById),z=(0,r.d4)(e=>e.orgUsersByOrgId),Y=(0,r.d4)(e=>e.userEduGracePeriods),W=(0,r.d4)(e=>e.licenseGroups),H=(0,em.GS)(),$=(0,tv.my)()===tP.nT.Design,X=(0,eN.iZ)(),Q=(0,tg.Kf)({isDesign:$,isUnauth:!X})(),J=(0,tT.VP)(a,"edit_button_upgrading_to_edit"),j=n||J,q=(0,er.ut)((0,ee.aY)(),i.FAf.DESIGN),Z=(0,er.J2)(i.Ez5.propertiesPanelState().shownPropertiesPanels),et=(0,er.J2)(i.Ez5.propertiesPanelState().strokePanelMode),en=(0,er.J2)(i.Ez5.propertiesPanelState().strokePanelTerminalPointCount),ea=(0,er.J2)((0,tb.UK)().expandedFramePresetType),eo=(0,tb.Ku)(),el=(0,tb.qw)(),ei=(0,tf.b)(),es=(0,er.J2)(i.Ez5.uiState().showPropertiesPanel),ec=!(0,th.Oo)()&&H&&es,ed=(0,er.J2)((0,tb.UK)().renderRulers),{isRightPanelCollapsed:ep}=(0,o.useContext)(tC.t),{inProductHelpViewType:eu}=(0,tA.A5)(),eE=(0,er.J2)(i.Ez5.uiState().inProductHelpSidePanelWidth),ey=(0,tS.Tn)(),e_=(0,tS.qM)(),eg=(0,o.useMemo)(()=>Q?i.FAf.COMMENT:q,[q,Q]);return(0,o.useEffect)(()=>{eg!==q&&ee.aY()?.set(eg)},[eg,q]),o.createElement(ic.o,{boundaryKey:"PropertiesPanel",loggedOutDesktopRevampExpAvaialable:$},o.createElement(ii,{recordingKey:"propertiesPanel",isCollapsed:ep,propertiesPanelTab:eg,strokePanelMode:et,strokePanelTerminalPointCount:en,commentsPanel:is.L,dispatch:e,isLoading:j,shouldAnimateLoadingState:n,shouldShowBackgroundGradient:ec,shownPanels:Z,rulersVisible:ed,isInsetEditorEnabled:ei,expandedFramePresetType:ea,colorFormat:eo,propertiesPanelSplitPosition:el,permissionsState:t,key:(0,t_.tw)()??void 0,appModel:l,sceneGraph:s,sceneGraphSelection:c,selectionPaints:d,selectionProperties:p,selectedStyleProperties:m,currentUserOrgId:u,dropdownShown:E,fonts:y,fileVersion:_,allSavedPlugins:g,library:h,localPlugins:f,modalShown:b,multiplayer:S,openFile:T,pickerShown:N,pickerInStyleCreationShown:I,publishedPlugins:P,saveAsState:C,selectedView:A,stylePickerListLayout:w,stylePickerShown:O,stylePreviewShown:x,styleSets:D,usedKeyboardShortcuts:R,user:M,userFlags:L,userStateLoaded:V,repos:K,folders:F,teams:B,orgById:G,orgUsersByOrgId:z,userEduGracePeriods:Y,licenseGroups:W,isUI3:H,showVoiceWidget:k,hasMergedDimensionsAndAutolayout:H,inProductHelpViewType:eu,inProductHelpSidePanelWidth:eE,justChangedMinimizeUIValue:ey,isUIMinimized:e_}))});var ip=n(366417),im=n(889085),iu=n(648836),iE=n(481483),iy=n(544750),i_=n(75888),ig=n(677859),ih=n(541524),iv=n(630978),ib=n(695342),iS=n(221537),iT=n(12519);let iN="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",iI="stack_controls--scrubbableControl--b1ChI",iP="stack_controls--inputSvg--wFizL",iC="stack_controls--stackSpacingRow--Uus3H";function iA(){let e=(0,er.J2)(i.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===i.RN9.SPACING?o.createElement(iw,{focusOnMount:n}):t===i.RN9.COUNTER_SPACING?o.createElement(iO,{focusOnMount:n}):o.createElement(ix,{stackRegion:t,focusOnMount:n})}let ik=e=>{if(e.keyCode===nu.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;i.Qa7.tabActiveStackRegion(t)}};function iw({focusOnMount:e}){return o.createElement(na.fI,{className:iC},o.createElement(iT.KI,{focusOnMount:e,outerClassName:iI,inputClassName:iN,svgClassName:iP,onBlur:i.Qa7.clearActiveStackRegion,onKeyDown:ik,onPaste:iD,noBorderOnFocus:!0,recordingKey:"stackSpacingControl",inputTestId:"stackSpacingControl",source:"canvas",onCanvasUI:!0}))}function iO({focusOnMount:e}){return o.createElement(na.fI,{className:iC},o.createElement(iv.q,{focusOnMount:e,outerClassName:iI,inputClassName:iN,svgClassName:iP,onBlur:i.Qa7.clearActiveStackRegion,onKeyDown:ik,onPaste:iD,noBorderOnFocus:!0,recordingKey:"stackCounterSpacingControl",inputTestId:"stackCounterSpacingControl",source:"canvas",onCanvasUI:!0}))}function ix({stackRegion:e,focusOnMount:t}){let[n]=(0,iS.HF)(e),a=Array.isArray(n)?n.length:0;return e===i.RN9.SPACING?null:o.createElement(na.fI,{className:eA()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":a>3})},o.createElement(ib.s,{paddingSelection:e,focusOnMount:t,outerClassName:iI,inputClassName:iN,onBlur:i.Qa7.clearActiveStackRegion,onKeyDown:ik,onPaste:iD,noBorderOnFocus:!0,svgClassName:iP,recordingKey:"stackPaddingControl",inputTestId:"stackPaddingControl",source:"canvas",disableVariablesEntryPoint:!0}))}function iD(e){(0,ih.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),tH.l7.user("paste-in-stack",()=>{i.glU.triggerAction("paste",{})}))}let iR=o.memo(function(){return(0,r.d4)(e=>e.mirror.appModel.isReadOnly)?null:o.createElement(iM,null)});function iM(){return o.createElement(iu.k,{isShown:!0},o.createElement(i_.IA,null,o.createElement(iL,{testID:"DesignInlineMenu"})))}function iL({testID:e}){let t=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t)});return(0,r.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?o.createElement(ig.W1,{size:"small",testID:e},o.createElement(iE.jk,null),o.createElement(iy.x,null)):t?o.createElement(ig.W1,{testID:e,darkModePreferred:!0},o.createElement(iA,{key:"stackControls"})):null}var iV=n(284321),iK=n(100303),iU=n(137345),iF=n(293775);let iB=(0,o.memo)(function(e){return(0,lC.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,lC.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18.364 5.636a8.96 8.96 0 0 1 2.535 5.016C21.206 12.688 19.4 14 17.73 14H15.5a1.5 1.5 0 0 0-1.5 1.5v2.231c0 1.67-1.312 3.475-3.348 3.168a9 9 0 1 1 7.712-15.263m1.546 5.165c.188 1.246-.918 2.199-2.179 2.199H15.5a2.5 2.5 0 0 0-2.5 2.5v2.231c0 1.26-.953 2.367-2.2 2.18a8 8 0 1 1 9.11-9.11M13 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-4.134 3.5a1 1 0 1 0-1.732-1 1 1 0 0 0 1.732 1m7.634.366a1 1 0 1 1-1-1.732 1 1 0 0 1 1 1.732M7.134 15.5a1 1 0 1 0 1.732-1 1 1 0 0 0-1.732 1",clipRule:"evenodd"})})});var iG=n(342691),iz=n(703990),iY=n(694598),iW=n(886133),iH=n(934533),i$=n(215932),iX=n(38329);function iQ(e,t,n){iX.D.dispatch(d.F.enqueue({message:e,type:n,icon:t,timeoutOverride:3e3}))}function iJ(){let e=(0,v.md)(i$.m7);return(0,o.useMemo)(()=>(function(e){let t=(0,iz.r8)();if(!t)return{};let n={};for(let a of e.values())for(let e of a.values()){let a=t.getRuleById(e.ruleId);if(!a)continue;let o=a.group,r=iq[o];n[o]||(n[o]={label:r,rulesToViolations:{}}),n[o].rulesToViolations[e.ruleId]||(n[o].rulesToViolations[e.ruleId]=[]),n[o].rulesToViolations[e.ruleId]?.push(e)}return n})(e),[e])}function ij(){let e=(0,v.md)(i$.m7),t=0;for(let[n,a]of e)t+=a.size;return t}let iq={[iY.e.DESIGN_HEURISTICS]:(0,T.tx)("design_linter.group_names.design_heuristics"),[iY.e.DESIGN_SYSTEMS]:(0,T.tx)("design_linter.group_names.design_systems")};var iZ=n(371591),i0=n(139689),i1=n(755020),i2=n(370903),i4=n(995382);function i8({shouldDisplay:e}){return e?o.createElement("div",{className:S.cx.p12.flex.justifyCenter.$},(0,T.tx)("design_linter.penalty_box.no_violations")):null}function i3(){return o.createElement("div",{onPointerUp:e=>e.stopPropagation(),role:"button"},o.createElement(nl.K,{onClick:()=>{i.Ez5?.uiState().showDesignLinter.set(!1)},"aria-label":(0,T.t)("general.close")},o.createElement(i0.A,null)))}function i5(){let e=ij();return o.createElement("div",{className:S.cx.bb1.colorBorder.bSolid.flex.flexRow.justifyBetween.p8.pl16.itemsCenter.$},o.createElement("div",{className:S.cx.flex.textBodyMediumStrong.$},o.createElement("span",{className:S.cx.mr2.$},(0,T.tx)("design_linter.penalty_box.title")),o.createElement("span",null,e?`(${e})`:"")),o.createElement(i3,null))}function i7({onNavigateBack:e,title:t}){return o.createElement("div",{className:S.cx.bb1.colorBorder.bSolid.$},o.createElement("div",{className:S.cx.p8.flex.itemsCenter.justifyBetween.$,onPointerUp:e,role:"button",tabIndex:0},o.createElement("div",{className:S.cx.flex.itemsCenter.$},o.createElement(i1.C,null),o.createElement("span",{className:S.cx.textBodyMediumStrong.$},t)),o.createElement(i3,null)))}function i6({children:e}){return o.createElement("div",{className:"design_linter_panel--displayContents--uRenD"},o.createElement("div",{className:S.cx.flex.flexColumn.wFull.hFull.overflowHidden.overflowYScroll.$},e))}function i9({onNext:e,onPrev:t,hasNext:n,hasPrev:a,title:r}){return o.createElement("div",{className:S.cx.flex.flexRow.itemsCenter.justifyBetween.p8.pl16.$},o.createElement("div",null,r),o.createElement("div",{className:S.cx.flex.flexRow.$},o.createElement(nl.K,{onClick:e=>{e.currentTarget.blur(),t()},disabled:!a,"aria-label":(0,T.t)("general.previous")},o.createElement(rL.B,{svg:i4.A})),o.createElement(nl.K,{onClick:t=>{t.currentTarget.blur(),e()},disabled:!n,"aria-label":(0,T.t)("general.next")},o.createElement(rL.B,{svg:i2.A}))))}function se(){let e=(0,F.q5)(),t=ij(),n=function(){let e=iJ();return(0,o.useMemo)(()=>Object.entries(e).map(([e,{rulesToViolations:t}])=>({group:e,count:Object.values(t).reduce((e,t)=>e+t.length,0)})),[e])}(),a=function(){let e=iJ();return(0,o.useMemo)(()=>Object.values(e).flatMap(e=>Object.entries(e.rulesToViolations).map(([e,t])=>({rule:e,count:t.length}))),[e])}(),[r,l]=(0,o.useState)(0),i=(0,e4.UN)().getCurrentPage();if((0,ew.h)(()=>{if(!i)return;let e=0;(0,rx.hV)(i,()=>{e++}),l(e)}),!i||!e)return null;let s=e._name??"File",c=i.name;return o.createElement("div",{className:S.cx.px16.$},o.createElement("span",{className:S.cx.textHeadingMedium.block.$},"Debug view"," "),o.createElement("span",{className:S.cx.textBodyMedium.block.$},`${s} - ${c}`," "),o.createElement("span",{className:S.cx.textBodyMedium.block.$},`Total layers: ${r}`," "),o.createElement("span",{className:S.cx.textBodyMedium.block.$},`Total violations: ${t}`," "),o.createElement("span",{className:S.cx.textHeadingSmall.block.pt8.$},"Violations per group"," "),o.createElement("ol",null,n.map(e=>o.createElement("span",{key:e.group,className:S.cx.textBodyMedium.block.$},`${e.group}: ${e.count}`," "))),o.createElement("span",{className:S.cx.textHeadingSmall.block.pt8.$},"Violations per rule"),o.createElement("ol",null,a.map(e=>o.createElement("span",{key:e.rule,className:S.cx.textBodyMedium.block.$},`${e.rule}: ${e.count}`," "))))}function st({violation:e,onFix:t}){if(!e)return null;let n=(0,e4.UN)();if(!n)return null;let{ruleId:a,guid:r,context:l}=e;return n.get(r)?o.createElement("div",{className:S.cx.bb1.colorBorder.bSolid.$},o.createElement("div",{className:S.cx.pt8.pb8.$},o.createElement("div",{className:S.cx.flex.itemsCenter.h24.bRadius4.colorBgSecondary.p4.mx16.my4.$},o.createElement(sn,{ruleId:a,context:l})),o.createElement("div",{className:S.cx.flex.itemsCenter.h24.bRadius4.colorBgSecondary.p4.mx16.mt4.mb8.$}),o.createElement("div",{className:S.cx.flex.justifyEnd.mr16.$},o.createElement(aT.$n,{variant:"secondary",onClick:()=>t(e)},(0,T.tx)("design_linter.penalty_box.fix"))))):null}function sn({ruleId:e,context:t}){return e===iY.C.REQUIRE_COLOR_TOKENS?o.createElement(sa,{context:t}):null}function sa({context:e}){if(!("color"in e))return null;let t=e.color;if(!t)return null;let n=(0,oR.tK)(t);return n?o.createElement(o.Fragment,null,o.createElement("div",{className:"design_linter_panel--chit--aOnAd paint_panels--chit--twQEy"},o.createElement(ro.J,{color:n,opacity:1})),o.createElement(rr.AN,{disabled:!0,formatter:ra.TI,property:n,onChange:b.lQ,noLeftBorder:!0})):null}var so=(e=>(e[e.GROUPS=0]="GROUPS",e[e.RULES=1]="RULES",e[e.VIOLATIONS=2]="VIOLATIONS",e))(so||{});function sr(){if(!(0,s.kc)().aip_flower_garden)return null;let e=(0,s.kc)().aip_flower_garden_debug;return o.createElement(i6,null,o.createElement(sl,null),e&&o.createElement(se,null))}function sl(){let[e,t]=(0,o.useState)({view:0,selectedGroup:null,selectedRule:null}),n=iJ();if((0,v.md)(iz.vo)===iz.td.DETECTING)return o.createElement("div",{className:S.cx.flex.mt12.justifyCenter.$},o.createElement(iW.y$,null));let{view:a,selectedGroup:r,selectedRule:l}=e;return 0!==a&&r?1!==a&&l?2===a?o.createElement(sd,{onBack:()=>{t({view:1,selectedGroup:r,selectedRule:null})},rule:l,violations:r.rulesToViolations[l.id]??[]}):null:o.createElement(sc,{group:r,onBack:()=>t({view:0,selectedGroup:null,selectedRule:null}),selectRule:(e,n)=>t({view:2,selectedGroup:n,selectedRule:e})}):o.createElement(ss,{selectGroup:e=>t({view:1,selectedGroup:e,selectedRule:null}),violationGroups:n})}let si={[iY.e.DESIGN_HEURISTICS]:iF.C,[iY.e.DESIGN_SYSTEMS]:iB};function ss({selectGroup:e,violationGroups:t}){let n=Object.keys(t);return o.createElement("div",{className:S.cx.flex.flexColumn.$},o.createElement(i5,null),o.createElement(tR.i,null,n.map((n,a)=>{let r=si[n];return r?o.createElement("div",{className:S.cx.bb1.colorBorder.bSolid.$,key:n,onMouseUp:()=>{e(t[n])},role:"button",tabIndex:a},o.createElement("div",{className:S.cx.p16.flex.itemsCenter.justifyBetween.$},o.createElement("div",{className:S.cx.flex.itemsCenter.$},o.createElement("div",{className:S.cx.p8.b1.colorBorder.bRadius4.mr12.$},o.createElement(r,null)),o.createElement("div",{className:S.cx.maxW100.truncate.mr12.textBodyMediumStrong.$},t[n]?.label??"")),o.createElement(iG.a,null))):null})),o.createElement(i8,{shouldDisplay:!n.length}))}function sc({group:e,onBack:t,selectRule:n}){let a=(0,iz.r8)();if(!a)return null;let r=Object.keys(e.rulesToViolations);return o.createElement(o.Fragment,null,o.createElement(i7,{onNavigateBack:t,title:e?.label??""}),r.map(t=>{let r=a.getRuleById(t),l=(e.rulesToViolations[t]??[]).length;return r?o.createElement("div",{className:S.cx.p16.flex.justifyBetween.itemsCenter.bb1.colorBorder.bSolid.$,key:t,onPointerUp:()=>n(r,e),role:"button"},o.createElement("div",{className:S.cx.flex.flexColumn.$},o.createElement("div",{className:S.cx.textBodyMediumStrong.pb2.$},r?.name??"",o.createElement("span",{className:S.cx.pl2.colorTextTertiary.$},`(${l})`)),o.createElement("div",{className:S.cx.textBodyMedium.colorTextSecondary.$},r?.label??"")),o.createElement(iG.a,{className:S.cx.colorTextTertiary.$})):null}),o.createElement(i8,{shouldDisplay:!r.length}))}function sd({rule:e,violations:t,onBack:n}){let[a,r]=(0,o.useState)(t[0]?.guid??null),[l,i]=(0,o.useState)(null),[s,c]=(0,o.useState)(0),d=(0,o.useRef)(null),p=e=>`violation-row-${e}`;(0,ew.h)(()=>{d.current?.focus()});let m=(0,o.useCallback)(e=>{document.getElementById(p(e))?.focus()},[]),u=function(){let e=(0,iz.r8)(),[t,n]=(0,v.fp)(i$.m7);return(0,o.useCallback)(async a=>{if(e)try{if(await e.fixSingleViolation(a)){let e=new Map(t),o=e.get(a.guid);o&&(o.delete(a.ruleId),0===o.size?e.delete(a.guid):e.set(a.guid,o)),n(e)}else iQ((0,T.t)("design_linter.penalty_box.fix_failed_bell"),iH.zX.EXCLAMATION,"error")}catch(e){iQ((0,T.t)("design_linter.penalty_box.fix_failed_bell"),iH.zX.EXCLAMATION,"error")}},[e,t,n])}(),E=(0,o.useCallback)((e,t)=>{t3.Y5.triggerAction("goto-layer",{args:{nodeId:e}}),r(e),c(t),m(e)},[m]),y=(0,o.useCallback)(()=>{let e=s+1;e<t.length&&E(t[e].guid,e)},[s,t,E]),_=(0,o.useCallback)(()=>{let e=s-1;e>=0&&E(t[e].guid,e)},[s,E,t]),g=(0,o.useCallback)(e=>{switch(e.key){case"ArrowUp":case"ArrowLeft":_();break;case"ArrowDown":case"ArrowRight":y();break;default:return}},[y,_]),h=(0,e4.UN)();return h?o.createElement(o.Fragment,null,o.createElement(i7,{onNavigateBack:n,title:e.name}),o.createElement(st,{violation:t[s],onFix:u}),o.createElement(i9,{onNext:y,onPrev:_,hasNext:s<t.length-1,hasPrev:s>0,title:t.length>1?(0,T.t)("design_linter.penalty_box.layer_count",{count:t.length}):""}),o.createElement("div",{className:S.cx.overflowYScroll.$},t.map((e,t)=>{let n=h.get(e.guid);if(!n)return null;let r=l===n.guid,s=a===n.guid;return o.createElement("div",{key:t,id:p(n.guid),ref:0===t?d:null,className:eA()(S.cx.p16.flex.justifyBetween.itemsCenter.$,{"design_linter_panel--violation--PNRW9":!0,"design_linter_panel--selectedViolation--YEw2j":s,"design_linter_panel--hoveredViolation--q0-nl":r&&!s}),onMouseEnter:()=>{(0,ee.Uc)(n.guid),i(n.guid)},onMouseLeave:()=>{(0,ee.Uc)(""),i(null)},onPointerUp:()=>{E(n.guid,t)},onKeyDown:g,role:"button",tabIndex:s?0:-1},o.createElement("div",{className:S.cx.flex.itemsCenter.$},o.createElement(iZ.Bf,{guid:n.guid}),o.createElement("span",{className:S.cx.textBodyMedium.mx6.$},n.name)))}),o.createElement(i8,{shouldDisplay:!t.length}))):null}var sp=n(286723),sm=n(876743),su=n(439872),sE=n(412371),sy=n(624488),s_=n(515288),sg=n(936486),sh=n(237701);let sv=new Map,sf=o.memo(function(){let e=(0,v.md)((0,iV.Xh)(void 0)),t=(0,F.q5)(),n=(0,em.GS)(),a=(0,U.aV)();(0,eB.bi)();let r=(0,j.X0)(),l=!!t&&e;return o.useEffect(()=>{l&&(0,eL.YQ)({id:"Found Updates To Publish"})},[l]),o.createElement(sm.Q,{ignoreRulers:a},o.createElement(s_.s,null),o.createElement(sy.$,null,n&&o.createElement(sh.n,null),n&&o.createElement(sg.d,{shouldUseBottomBorder:!r}),o.createElement(sb,null)))});function sb(){let e=(0,r.d4)(e=>e.leftPanel),t=(0,eB.cT)(),{pagesList:n,pageToNumChangesMap:a,isComparingChanges:l}=function(){let e=(0,eB.n0)(),t=(0,r.d4)(e=>!!(0,s.kc)().version_diffing&&e.mirror.appModel.activeCanvasEditModeType===i.m1T.COMPARE_CHANGES),n=(0,r.d4)(e=>e.versionHistory.compareId);return o.useMemo(()=>{if(!t||!n)return{pagesList:e,pageToNumChangesMap:sv,isComparingChanges:t};let a=(0,sp.ee)(e);return{pagesList:e,pageToNumChangesMap:a,isComparingChanges:t}},[t,n,e])}(),c=(0,sE.g)({pagesList:n}),d=(0,eB.GQ)(),p=(0,er.J2)(i.Ez5.uiState().showCanvasSearch),m=(0,er.J2)(i.Ez5.uiState().showDesignLinter);return p?o.createElement(iK.EA.Provider,{value:!0},o.createElement(iU.f,{showFilter:!0})):(0,s.kc)().aip_flower_garden&&m?o.createElement(sr,null):n.length>0?o.createElement(su.y,{recordingKey:"pagesPanel",isReadOnly:t,width:d,pagesList:n,activeTab:e.activeTab,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:l,pageToNumChanges:a,onPageContextMenu:c}):null}var sS=n(319008),sT=n(988889),sN=n(959369),sI=n(359919);let sP=(0,o.memo)(function(e){return(0,lC.jsxs)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,lC.jsx)("mask",{id:"fpl-icon-24-mail-a",fill:"#fff",children:(0,lC.jsx)("path",{fillRule:"evenodd",d:"M5.88 7h12.24a.88.88 0 0 1 .88.88v.82l-7 3.733L5 8.7v-.82A.88.88 0 0 1 5.88 7M4 8.99v7.13A1.88 1.88 0 0 0 5.88 18h12.24A1.88 1.88 0 0 0 20 16.12V7.88A1.88 1.88 0 0 0 18.12 6H5.88A1.88 1.88 0 0 0 4 7.88zm15 .843v6.287a.88.88 0 0 1-.88.88H5.88a.88.88 0 0 1-.88-.88V9.833l6.765 3.608.235.126.235-.126z",clipRule:"evenodd"})}),(0,lC.jsx)("path",{fill:"var(--color-icon)",d:"m19 8.7.47.882L20 9.3v-.6zm-7 3.733-.47.883.47.25.47-.25zM5 8.7H4v.6l.53.282zm-1 .31h1v-.02zm0-.02 1 .02v-.02zm16 .02-1-.02v.02zm0-.02h-1v.02zm-1 .843h1V8.167l-1.47.784zm-14 0 .47-.882L4 8.167v1.666zm6.765 3.608-.47.882zm.235.126-.47.882.47.251.47-.251zm.235-.126.471.882zM18.12 6H5.88v2h12.24zM20 7.88A1.88 1.88 0 0 0 18.12 6v2a.12.12 0 0 1-.12-.12zm0 .82v-.82h-2v.82zm-7.53 4.616 7-3.734-.94-1.764-7 3.733zM4.53 9.582l7 3.734.94-1.765-7-3.733zM4 7.88v.82h2v-.82zM5.88 6A1.88 1.88 0 0 0 4 7.88h2a.12.12 0 0 1-.12.12zM5 8.99v.02l-2-.04v.06zm-2 .02v7.11h2V9.01zm0 7.11A2.88 2.88 0 0 0 5.88 19v-2a.88.88 0 0 1-.88-.88zM5.88 19h12.24v-2H5.88zm12.24 0A2.88 2.88 0 0 0 21 16.12h-2a.88.88 0 0 1-.88.88zM21 16.12V9.01h-2v7.11zm-2-7.11v-.02l2 .04v-.06zm2-.02V7.88h-2v1.11zm0-1.11A2.88 2.88 0 0 0 18.12 5v2a.88.88 0 0 1 .88.88zM18.12 5H5.88v2h12.24zM5.88 5A2.88 2.88 0 0 0 3 7.88h2A.88.88 0 0 1 5.88 7zM3 7.88v1.11h2V7.88zm17 8.24V9.833h-2v6.287zM18.12 18A1.88 1.88 0 0 0 20 16.12h-2a.12.12 0 0 1 .12-.12zM5.88 18h12.24v-2H5.88zM4 16.12A1.88 1.88 0 0 0 5.88 18v-2a.12.12 0 0 1 .12.12zm0-6.287v6.287h2V9.833zm8.235 2.726L5.471 8.95l-.941 1.765 6.764 3.608zm.236.125-.236-.125-.94 1.765.235.125zm-.706-.125-.236.125.942 1.765.235-.126zm6.764-3.608-6.764 3.608.941 1.765 6.765-3.608z",mask:"url(#fpl-icon-24-mail-a)"})]})});var sC=n(137035),sA=n(737947),sk=n(27087),sw=n(809840),sO=n(218997),sx=n(15839),sD=n(233286);function sR(){let e=(0,L.e)({overlay:$.Dqt,priority:Y.N.DEFAULT_MODAL});(0,M.E)(e.uniqueId,"commentThreadMobileAnnouncementClicked",()=>{(0,ek.sx)("sidebar_announcement_mobile_app_download_prompt_modal_shown"),e.show({})});let t=(0,o.useCallback)(async()=>{(0,ek.sx)("sidebar_announcement_mobile_app_download_prompt_email_me_cta_clicked"),await sk.Ay.post("/api/send_mobile_download_email"),e.complete()},[e]);return o.createElement(sO.h,{isShowing:e.isShowing,modalType:sx.q3.FEATURE_UPDATE,closeButtonStyle:sx.M_.ON_DARK,element:()=>o.createElement(sM,{onEmailClick:t}),trackingContextName:"mobile_comment_announcement",onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}function sM(e){return o.createElement("div",{className:"modal_comment_sidebar_announcement--container--5oh-p"},o.createElement("div",{className:"modal_comment_sidebar_announcement--imageContainer--Vuo-V"},o.createElement("img",{alt:"Background",src:(0,s.ck)("e19f2f58bc09414847ad59ff9228e07032e8842c"),className:"modal_comment_sidebar_announcement--image--lyA61"}),o.createElement("div",{className:"modal_comment_sidebar_announcement--spacer--m02YT"}),o.createElement(sD.T,null)),o.createElement("div",{className:"modal_comment_sidebar_announcement--textContainer--btaTy"},o.createElement("div",{className:"modal_comment_sidebar_announcement--title--eiyLq"},o.createElement(sw.E,{fontSize:24,fontWeight:"semi-bold"},(0,T.t)("rcs.mobile_comment_announcement.title"))),o.createElement("div",{className:"modal_comment_sidebar_announcement--description--Y8AJE"},o.createElement(sw.E,{fontSize:14},(0,T.t)("rcs.mobile_comment_announcement.description")))),o.createElement("div",{className:"modal_comment_sidebar_announcement--buttonsContainer--UTcgc"},o.createElement(aT.$n,{variant:"secondary",onClick:e.onEmailClick,iconPrefix:o.createElement(sP,null)},(0,T.t)("rcs.mobile_comment_announcement.email_download_link")),o.createElement(aT.$n,{variant:"primary",onClick:()=>{(0,ek.sx)("sidebar_announcement_mobile_app_download_prompt_learn_more_cta_clicked"),sA.Ay.unsafeRedirect("https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app#download","_blank")},iconPrefix:o.createElement(sC.b,null)},(0,T.t)("rcs.rcs_shared.learn_more"))))}var sL=n(723215),sV=n(631437),sK=n(866206),sU=n(355819),sF=n(457630),sB=n(83695),sG=n(344780),sz=n(820286),sY=n(175290),sW=n(503965);let sH=(0,r7.ex)("prototype_action_info",function(){return o.createElement("div",{className:S.cx.flex.itemsCenter.justifyCenter.$},o.createElement(rL.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:sW.A}),o.createElement("span",{className:S.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,T.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")))},()=>({unconstrainWidth:!0})),s$=(0,o.memo)(function(e){return(0,lC.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,lC.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 6a.5.5 0 0 1 .5.5V11a1 1 0 0 0 1 1h4.5a.5.5 0 0 1 0 1H13a2 2 0 0 1-2-2V6.5a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})})});var sX=n(995672),sQ=n(647899);class sJ extends oF.c${}class sj extends oF.l6{}function sq({action:e}){return o.createElement("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY"},o.createElement(np.U,{svg:(0,rK.Yb)(e)},(0,rK.av)(e)))}function sZ(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,a=(0,tU.E7)(e.action),l=(0,rK.Yb)(a),i=(0,rK.av)(a),s=(0,em.GS)(),c=(0,r.d4)(rz.ZM),d=new rV.js(s,c),p=new rV.Z6(s,c),m=n?d:p,u=!(0,r.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0),E=o.useCallback(e=>e-24,[]),y=o.useCallback(e=>e+24,[]),[_,g]=o.useState(void 0),h=o.createElement(sX.Q,{setMaxWidth:g,options:s0(e),formatOption:e=>e&&e.props.value?m.format(e.props.value):"",getIcon:()=>o.createElement(sq,{action:"NAVIGATE_TO"})}),v=eA()({[e.className??""]:!0,"prototype_action_dropdown--select--b3Ssx":!s}),f=o.createElement(np.U,{svg:l},i);return o.createElement(o.Fragment,null,o.createElement(sj,{disabled:u,id:t,dataTestId:"action-select",className:v,chevronClassName:"prototype_action_dropdown--prototypeActionChevron--ZL1Q4",inputClassName:"prototype_action_dropdown--prototypeActionInputWithSvg--Atfua",property:e.action,formatter:m,onChange:e.onChange,dispatch:e.dispatch,dropdownShown:e.dropdownShown,icon:f,iconClassName:"prototype_action_dropdown--selectActionSvg--XfhUx",recordingKey:tJ.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,t_.nl)(),dropdownAlignment:E,dropdownWidth:s?_:y},s0(e)),s&&h)}function s0(e){let t=(0,o7.cJ)(),n=(0,em.GS)(),a=o.createElement(sJ,{key:"NONE",value:"NONE",icon:o.createElement(sq,{action:"NONE"}),recordingKey:tJ.Pt(e,"clear-option"),disabled:!1}),r=o.createElement(sJ,{key:"NAVIGATE_TO",value:"NAVIGATE_TO",icon:o.createElement(sq,{action:"NAVIGATE_TO"}),recordingKey:tJ.Pt(e,"navigate-to-option"),disabled:!1}),l=o.createElement(sJ,{key:"SWAP_STATE_TO",value:"SWAP_STATE_TO",icon:o.createElement(sq,{action:"SWAP_STATE_TO"}),recordingKey:tJ.Pt(e,"swap-state-to-option"),disabled:!i.glU.isSelectionContainedInStateOrStateInstance()}),c=o.createElement(sJ,{key:"GO_BACK",value:"GO_BACK",icon:o.createElement(sq,{action:"GO_BACK"}),recordingKey:tJ.Pt(e,"back-option"),disabled:!1}),d=o.createElement(sJ,{key:"SCROLL_TO",value:"SCROLL_TO",icon:o.createElement(sq,{action:"SCROLL_TO"}),recordingKey:tJ.Pt(e,"scroll-to-option"),disabled:!1}),p=o.createElement(sJ,{key:"OPEN_URL",value:"OPEN_URL",icon:o.createElement(sq,{action:"OPEN_URL"}),recordingKey:tJ.Pt(e,"url-option"),disabled:!1}),m=o.createElement(sJ,{key:"OPEN_OVERLAY",value:"OPEN_OVERLAY",icon:o.createElement(sq,{action:"OPEN_OVERLAY"}),recordingKey:tJ.Pt(e,"open-overlay-option"),disabled:!1}),u=o.createElement(sJ,{key:"SWAP_WITH",value:"SWAP_WITH",icon:o.createElement(sq,{action:"SWAP_WITH"}),recordingKey:tJ.Pt(e,"swap-with-option"),disabled:!1}),E=o.createElement(sJ,{key:"CLOSE_OVERLAY",value:"CLOSE_OVERLAY",icon:o.createElement(sq,{action:"CLOSE_OVERLAY"}),recordingKey:tJ.Pt(e,"close-option"),disabled:!1}),y=o.createElement(sJ,{key:"SET_VARIABLE",value:"SET_VARIABLE",icon:o.createElement(sq,{action:"SET_VARIABLE"}),recordingKey:tJ.Pt(e,"set-variable"),disabled:!1}),_=(0,s.kc)().prototype_set_mode_action&&o.createElement(sJ,{key:"SET_VARIABLE_MODE",value:"SET_VARIABLE_MODE",icon:o.createElement(sq,{action:"SET_VARIABLE_MODE"}),recordingKey:tJ.Pt(e,"set-variable-mode"),disabled:!1}),g=!e.isNestedInConditional&&o.createElement(sJ,{key:"CONDITIONAL",value:"CONDITIONAL",icon:o.createElement(sq,{action:"CONDITIONAL"}),recordingKey:tJ.Pt(e,"conditional"),disabled:!1}),h=o.createElement(oF.sK,{key:"first-divider"}),v=o.createElement(oF.sK,{key:"second-divider"}),f=o.createElement(oF.sK,{key:"third-divider"}),{getConfig:b}=(0,sQ.I7)("exp_prototyping_reorder_actions"),S=!!b().getValue("new_ordering",!1),T=(0,s.kc)().sts_interaction_interop&&t?[l,c,d,h,y,g]:n?S?[a,h,r,l,c,d,p,v,y,_,g,f,m,u,E]:[a,h,r,l,c,d,p,v,m,u,E,f,y,_,g]:[a,h,r,l,c,v,y,_,g,d,p,f,m,u,E];if(e.showVideoActions&&!t){let t=[o.createElement(oF.sK,{key:"fourth-divider"}),o.createElement(sJ,{key:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",icon:o.createElement(sq,{action:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"}),recordingKey:tJ.Pt(e,"update-media-play-pause-options"),disabled:!1}),o.createElement(sJ,{key:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",icon:o.createElement(sq,{action:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"}),recordingKey:tJ.Pt(e,"update-media-mute-unmute-options"),disabled:!1}),o.createElement(sJ,{key:"UPDATE_MEDIA_SKIP_TO",value:"UPDATE_MEDIA_SKIP_TO",icon:o.createElement(sq,{action:"UPDATE_MEDIA_SKIP_TO"}),recordingKey:tJ.Pt(e,"update-media-skip_to"),disabled:!1}),o.createElement(sJ,{key:"UPDATE_MEDIA_SKIP_BY_OPTIONS",value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",icon:o.createElement(sq,{action:"UPDATE_MEDIA_SKIP_BY_OPTIONS"}),recordingKey:tJ.Pt(e,"update-media-skip-by-options"),disabled:!1})];T=T.concat(t)}return T.filter(Boolean)}var s1=n(983405),s2=n(773833),s4=n(736656),s8=n(533573),s3=n(712685),s5=n(843709);let s7="prototype_action_verbose_title--actionNameInsertion--aF4kI",s6="prototype_action_verbose_title--actionName--qWJL3",s9="prototype_action_verbose_title--actionNameUI3--JAYsG",ce=()=>{let e=(0,r.d4)(e=>e.mirror.sceneGraph);return o.useMemo(()=>new rV.cP(e),[e])};function ct({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:a}){let r=(0,rX.YT)()===rX.Oz.TWO_COL,l=o.useContext(s4.c),s=r&&l===s4.P.LEFT,c=t||n,d=(0,aA.u)((0,tU.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),p=(0,tU.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,s2.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,m=d?.name??p?.name,u=ce(),E=new rV.Z6((0,em.GS)()),y=(0,rV._X)(e),_=(0,tU.E7)(y),g=o.createElement(np.U,{svg:(0,rK.Yb)(_)},(0,rK.av)(_)),h=e=>{if(!e.connectionType||(0,tU.gl)(e.connectionType))return null;let t=eA()({[s6]:!0,[s9]:r}),n=eA()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":r});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":case"OBJECT_ANIMATION":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let a=e.transitionNodeID;if((0,tU.gl)(a))return o.createElement("div",{className:t},(0,T.t)("proto.variant_actions.mixed"));if(void 0===a)return null;let r=o6.dI(a),l=u.format(r);return o.createElement("div",{className:n},l)}case"URL":{let a=e.connectionURL;if(!a)return null;if((0,tU.gl)(a))return o.createElement("div",{className:t},(0,T.t)("proto.variant_actions.mixed"));return o.createElement("div",{className:n},a)}case"SET_VARIABLE":if(!e.targetVariableData||(0,tU.gl)(e.targetVariableData))return null;return o.createElement("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy"},o.createElement(sB.y3,{targetVariableData:e.targetVariableData,onClick:b.lQ,showVariableThumbnails:!1,isNarrowPanel:c,isInConditional:!0}));case"CONDITIONAL":{if((0,tU.gl)(e)||(0,tU.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return o.createElement(sB.y3,{targetVariableData:t,onClick:b.lQ,isInConditional:!0,showVariableThumbnails:!1})}default:(0,tz.xb)(e.connectionType)}},v=eA()({[s5.Li]:c&&!r,[s5.O8]:!c&&!r,[s5.kE]:r}),f=eA()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":r});return o.createElement("div",{className:v,onClick:a,role:"button",tabIndex:0},o.createElement(s1.Y1,{horizontalAlignItems:"space-between",width:"fill-parent"},o.createElement("div",{className:f},g),(e=>{let t=_?E.format(_):"Undefined",n=eA()({[s6]:!0,[s9]:r});if((0,tU.gl)(e.connectionType)&&(t=(0,T.t)("fullscreen.mixed")),!e.connectionType||(0,tU.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t));var a=h(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,T.t)("proto.action_change_to")),a);if(a){if("OVERLAY"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:s7},(0,T.tx)("proto.action_overlay_title",{overlayFrameName:o.createElement("span",null,a)})));if("SWAP"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,T.t)("proto.action_swap_overlay_title")),a)}return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"UPDATE_MEDIA_RUNTIME":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"URL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},a?(0,T.t)("proto.action_url_title"):(0,T.t)("proto.action_open_link")),a);case"SET_VARIABLE":{let l=e.targetVariableData&&(0,tU.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===i.rXF.COLOR,c=eA()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":r});if(m&&a)return o.createElement(o.Fragment,null,o.createElement("div",{className:l?c:s7},(0,T.tx)("proto.action_set_variable_title",{variableName:o.createElement("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2"},o.createElement(s3.wG,{text:m,isDeleted:!!d&&(0,s8.eF)(d),disableHover:s})),variableValue:o.createElement("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2"},a)})));return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t))}case"SET_VARIABLE_MODE":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,T.t)("proto.action_set_variable_mode")));case"CONDITIONAL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},r?(0,T.t)("proto.if"):(0,T.t)("proto.action_conditional_title")),a);case"OBJECT_ANIMATION":return o.createElement(o.Fragment,null);default:(0,tz.xb)(e.connectionType)}})(e)))}var cn=n(494387),ca=n(789529),co=n.n(ca),cr=n(636149),cl=n.n(cr),ci=n(675551),cs=n.n(ci),cc=n(184058),cd=n.n(cc),cp=n(154483),cm=n(564092),cu=n(896850);let cE="prototype_set_variable_mode_controls--dropdownRow--vl5z4",cy="missing";class c_ extends oF.l6{}class cg extends oF.c${}class ch extends oF.l6{}class cv extends oF.c${}let cf={},cb=(0,cp.fv)();function cS(){let e=(0,aA.h6)()||cf,t=(0,cm.iR)(),n=o.useMemo(()=>{let n=cs()(t,(e,t)=>({collectionID:e.node_id,collectionName:e.name,key:e.key,modeOptions:e.modes?.map(t=>({modeId:{guid:t.id,collectionKey:e.key},name:t.name,isCompatible:!0}))||[],explicitMode:null,inheritMode:null,fileKey:cb(e),libraryKey:e.library_key}));return co()({},e,n)},[t,e]),a=o.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.fileKey})),[n]),l=o.useMemo(()=>Object.values(a).filter(e=>e.modeData?.modeOptions&&e.modeData?.modeOptions.length>1),[a]),s=o.useMemo(()=>cd()(l.map(e=>e.modeData.fileKey??cu.BH)),[l]),c=(0,aA.el)(s),[d,p]=o.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=cl()(l,e=>e.isLocal?"_local":e.modeData.fileKey&&void 0===c[e.modeData.fileKey]?"_unknownFile":e.modeData.fileKey),a=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{fileKey:e,fileName:c[e]},...t]).flat(1);return t&&(a.push({fileKey:cu.BH,fileName:(0,T.t)("variables.mode_properties_panel.used_variables.subheading")}),a.push(...t)),[e??[],a]},[c,l]),m=(0,cm.d2)(),u=o.useCallback(e=>{let t=m[(0,tW.yG)(e)],n=l.find(t=>t.setKey===e);if(n)return(e=>{if(e)return void 0===t&&(t=e.modeData.modeOptions[0].modeId.guid),e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&(t=e.modeId.guid,!0))?.modeId.guid})(n)},[m,l]),E=l.length>0?l[0]:void 0,y=E?.setKey,_=E?.modeData.collectionID,g=o.useMemo(()=>y&&u(y),[y,u]),h=(0,r.wA)();return{localVariableSets:d,allVariableSets:l,firstVariableSet:E,firstVariableSetID:_,firstVariableSetMode:g,getDefaultNewModeForVariableCollectionKey:u,reportAnalyticsEventWhenSelected:e=>{let t=i.mSn.getVariableSetInfoForSetModeAnalytics(e);h((0,o9.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:p}}function cT({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,updateSelectionProperties:a,recordingKey:r,actionIndexPath:l}){let{getDefaultNewModeForVariableCollectionKey:i,allVariableSets:s,reportAnalyticsEventWhenSelected:c}=cS(),{shouldShowAdvancedPrototypingPaywall:d,showAdvancedPrototypingVariablesModal:p}=(0,rX.zt)(),m=(0,em.GS)();o.useEffect(()=>{if(!n||(0,tU.gl)(n))return;let e=s.find(e=>e.setKey===n);e?((0,tM.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),a({targetVariableSetKey:void 0,targetVariableSetID:e?.modeData.collectionID})):((0,tM.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),a({targetVariableSetKey:void 0}))},[n,s,a]);let[u,E]=o.useMemo(()=>{let t=(0,tU.gl)(e)||void 0===e?e:function(e,t){let n=e.find(e=>e.modeData.collectionID===t);if(n)return n;let a=cn.gr.toRefIfSubscribed(t);if(a)return e.find(e=>e.setKey===a.key)}(s,e)||cy,n=(()=>{if(!(0,tU.gl)(t)&&void 0!==t&&t!==cy)return t})();return[t,n]},[e,s]),y=o.createElement(cP,{selectedVariableSet:u,onChange:e=>{d?p():(c(e.modeData.collectionID),a({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:i(e.setKey)}))},actionIndexPath:l}),_=m?o.createElement(oB.cS,{input:y,label:(0,T.tx)("proto.set_variable_mode.collection_label")}):o.createElement(na.fI,{recordingKey:tJ.Pt(r,"selectTargetVariableSet")},y),g=o.createElement(ck,{selectedVariableSetKey:E&&E.setKey,selectedVariableModeID:t,onChange:e=>{d?p():a({targetVariableModeID:e})},actionIndexPath:l}),h=m?o.createElement(oB.cS,{input:g,label:(0,T.tx)("proto.set_variable_mode.mode_label")}):o.createElement(na.fI,{recordingKey:tJ.Pt(r,"selectTargetVariableMode")},g);return o.createElement("div",{className:m?void 0:S.cx.relative.$},_,E&&h)}let cN={format:e=>void 0===e?(0,T.t)("proto.prototype_panel.edit_set_mode.none"):e===cy?(0,T.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName,isEqual:(e,t)=>void 0!==e&&void 0!==t&&e!==cy&&t!==cy&&(e.setKey===t.setKey||e.modeData.collectionID===t.modeData.collectionID)};function cI(e,t){return"fileKey"in e?[t&&o.createElement(oF.sK,{key:e.fileKey+"divider"}),o.createElement(cg,{isHeader:!0,key:e.fileKey+"header",formattedValue:e.fileName})]:o.createElement(cg,{key:e.setKey,value:e})}function cP({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let a=(0,r.wA)(),l=(0,nK.Um)(),i="set-variable-mode--select-variable-set-"+n,{localVariableSets:c,allVariableSets:d,subscribedVariableSetsWithSections:p}=cS();return o.createElement(c_,{id:i,className:cE,property:e,formatter:cN,dispatch:a,dropdownShown:l?.type===i?l:null,onChange:e=>{(0,tU.gl)(e)||void 0===e||e===cy||t(e)}},d.length>0?[c.length>0&&o.createElement(cg,{key:tJ.Pt(i,"local_variables"),isHeader:!0,formattedValue:(0,s.kc)().ds_variable_props_unified_ui?(0,T.t)("variables.mode_properties_panel.assets_created_in_file.subheading"):(0,T.t)("variables.mode_properties_panel.local_variables.subheading")}),...c.map(e=>cI(e,!1)),...p.map((e,t)=>cI(e,c.length>0||t>0))]:[])}let cC={format:e=>void 0===e?(0,T.t)("proto.prototype_panel.edit_set_mode.none"):e===cy?(0,T.t)("proto.prototype_panel.edit_set_mode.missing_mode"):e?.name??""};function cA(e){return o.createElement(cv,{key:e.modeId.guid,value:e})}function ck({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:a}){let l=(0,r.wA)(),i=(0,nK.Um)(),s="set-variable-mode--select-variable-mode-"+a,{allVariableSets:c}=cS(),d=o.useMemo(()=>c.find(t=>t.setKey===e)?.modeData.modeOptions,[e,c]),p=o.useMemo(()=>(0,tU.gl)(t)||void 0===t?t:d?.find(e=>e.modeId.guid===t)||cy,[t,d]);return o.createElement(ch,{id:s,className:cE,property:p,formatter:cC,dispatch:l,dropdownShown:i?.type===s?i:null,onChange:e=>{!e||(0,tU.gl)(e)||e===cy||n(e.modeId.guid)}},d&&d?.map(cA))}var cw=n(910392),cO=n(909666),cx=n(442458);let cD=ra.TI;function cR({children:e}){return(0,em.GS)()?o.createElement(oB.TN,null,e):o.createElement(na.fI,{className:"overlay_panel--fplCheckboxRow--EYTAZ checkbox--_checkboxRow--oEhow"},e)}function cM({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:a}){let[l,s]=o.useState(!1),[c,d]=o.useState(new oM.Mi),p=(0,r.wA)(),m=(0,em.GS)(),u="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:E,destinationOverlayBackgroundType:y,destinationOverlayPositionType:_,destinationOverlayBackgroundInteraction:g}=(0,lU.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[u]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[u]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[u]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[u]?.destinationOverlayBackgroundInteraction})),h=o.useRef(),v=o.useRef(),f=o.useCallback(()=>{s(!1)},[s]),b=o.useCallback(()=>{if(l)f();else{s(!0);let e=m?no.findDOMNode(v.current):no.findDOMNode(h.current);d((0,oK.cn)(e))}},[l,f,m]),S=o.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";tH.l7.user("overlay-background-type-edit-scope",()=>{i.X3B.setOverlayBackgroundType(o6.dI(a),t)}),p((0,o9._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[p,a]),N=o.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";tH.l7.user("overlay-background-interaction-edit-scope",()=>{i.X3B.setOverlayBackgroundInteraction(o6.dI(a),t)}),p((0,o9._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[p,a]),I=o.useCallback(()=>(0,tU._W)(E,{r:0,g:0,b:0,a:.25}),[E]),P=o.useCallback((e,t)=>{t!==rB.zk.NO&&tH.l7.user("overlay-background-color-edit-scope",()=>{i.X3B.setOverlayBackgroundColor(o6.dI(a),e)})},[a]),C=o.useCallback((e,t)=>{P(e,rB.zk.YES)},[P]),A=o.useCallback((e,t)=>{let n=I();P({r:n.r,g:n.g,b:n.b,a:e},t)},[I,P]),k=o.useCallback(e=>{tH.l7.user("overlay-position-type-edit-scope",()=>{i.X3B.setOverlayPositionType(o6.dI(a),e)}),p((0,o9._P)({name:"Overlay position changed",params:{position:e}}))},[p,a]),w=I(),O=I().a,x=(0,tU.E7)(_),D="CLOSE_ON_CLICK_OUTSIDE"===(0,tU.E7)(g),R="SOLID_COLOR"===(0,tU.E7)(y),M=o.createElement("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},o.createElement(ro.J,{onClick:R?b:()=>{},color:w,opacity:O,recordingKey:tJ.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),o.createElement(rr.AN,{className:m?"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13":"overlay_panel--colorInput--6yyym paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:cD,property:w,disabled:!R,onChange:C,recordingKey:tJ.Pt(t,"colorInput"),noBorderOnFocus:!0}),o.createElement(a7.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:O,onValueChange:A,dispatch:p,disabled:!R,noBorderOnFocus:!0,recordingKey:tJ.Pt(t,"opacity")}));return o.createElement(na.Zk,{className:m?"overlay_panel--overlayPanelUI3--GLqgD":"overlay_panel--overlayPanel--l-Hts"},!m&&o.createElement(na.fI,null,o.createElement(na.xw,{faded:!0,className:"overlay_panel--overlayPanelTitle--e9pjs"},(0,T.tx)("proto.overlay_settings"))),o.createElement(cG,{overlayPositionType:x,onOverlayPositionTypeChange:k,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&o.createElement(cR,null,o.createElement(ox.S,{label:o.createElement(oD.J,null,(0,T.tx)("proto.close_when_clicking_outside")),recordingKey:tJ.Pt(t,"closeOnClickOutside"),onChange:N,checked:D})),o.createElement(cR,null,o.createElement(ox.S,{label:o.createElement(oD.J,null,m?(0,T.tx)("proto.overlay_panel.background"):(0,T.tx)("proto.add_background")),recordingKey:tJ.Pt(t,"addBackgroundBehindOverlay"),onChange:S,checked:R})),R&&(m?o.createElement(oB.cS,{ref:v,label:(0,T.tx)("proto.overlay_panel.background"),input:M}):o.createElement(na.fI,{ref:h}," ",M," ")),l&&o.createElement(oU.h3,{disabledVariableIds:new Set,initialPosition:c,color:w,boundVariable:null,onChange:P,onClose:f,recordingKey:tJ.Pt(t,"colorPicker")}))}class cL extends oF.l6{}class cV extends oF.c${}class cK extends o.PureComponent{constructor(){super(...arguments),this.titleFormatter=new rV.Cr,this.renderOverlayPositionOption=(e,t)=>o.createElement(cV,{key:t,value:e,recordingKey:tJ.Pt(this.props,e)})}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return o.createElement(cL,{id:this.props.recordingKey??"overlay-position_select",className:this.props.className,chevronClassName:"overlay_panel--chevron--7RTA-",inputClassName:"overlay_panel--input--tGHHB",dropdownWidth:ny.DxS,property:this.props.property,formatter:this.titleFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:tJ.Pt(this.props,"select")},e,o.createElement(oF.sK,null),this.renderOverlayPositionOption("MANUAL",10))}}cK.displayName="OverlayPositionDropdown";class cU extends rc.I{}class cF extends rc.Y{}class cB extends o.PureComponent{render(){return o.createElement(cU,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},o.createElement(cF,{value:"CENTER",tooltip:(0,T.t)("proto.tooltip_overlay_position_center"),svg:cO.A,recordingKey:tJ.Pt(this.props,"center")}),o.createElement(cF,{value:"TOP_LEFT",tooltip:(0,T.t)("proto.tooltip_overlay_position_top_left"),svg:cx.A,recordingKey:tJ.Pt(this.props,"top-left")}),o.createElement(cF,{value:"BOTTOM_CENTER",tooltip:(0,T.t)("proto.tooltip_overlay_position_bottom_center"),svg:cw.A,recordingKey:tJ.Pt(this.props,"bottom-center")}))}}function cG({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,em.GS)(),l=(0,r.wA)(),i=(0,nK.Um)(),s=o.createElement(cK,{className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:l,dropdownShown:i,onChange:t,recordingKey:tJ.Pt(n,"overlayPositionDropdown")}),c=o.createElement(cB,{property:e,onChange:t,recordingKey:tJ.Pt(n,"overlayPositionControl"),className:"overlay_panel--overlayPositionControl--SWngJ"});return a?o.createElement(oB.cS,{label:(0,T.tx)("proto.overlay_panel.position"),input:s}):o.createElement(na.fI,null,s,c)}var cz=n(171447),cY=n(301036),cW=n(112976),cH=n(728587);let c$=e=>`interaction-panel-create-action-${e}`;function cX(e){let t=c$(e.recordingKey);var{showing:n,toggle:a,hide:l}=(0,nK.BK)(t);let i=(0,o.useRef)(null),{recordingKey:s,addButtonPressed:c,presetInteractions:d}=e,{shouldShowAdvancedPrototypingPaywall:p,showAdvancedPrototypinglMultipleActionsModal:m}=(0,rX.zt)(),u=(0,o.useCallback)(()=>{!e.skipPaywall&&p?m():a()},[e.skipPaywall,p,m,a]),E=tJ.rf(tJ.Pt(s,"createActionDropdown"),"click",u),y=(0,rX.YT)()===rX.Oz.TWO_COL,_=(0,rX.hP)(),g=(0,em.GS)(),h=(0,o7.cJ)(),v=(0,rX.He)({showVideoActions:_,isNestedInConditional:e.isNestedInConditional,isSites:h,isUI3:g,showPresetActions:!!e.presetInteractions}),f=(0,r.wA)(),b=(0,o.useCallback)(e=>{c((0,rX.Bs)(e)),l()},[c,l]),S=eA()({[s5.x1]:e.renderButton,[s5.xm]:!e.renderButton&&!y,[s5.U3]:!e.renderButton&&y}),N=[];return v.forEach(e=>{(0,rX.vc)(e)?N.push(cW.w):e===rX.Xk&&d?.length?N.push(...d,cW.w):N.push(function({actionType:e,clickCb:t,recordingKey:n,isUI3:a}){let r=(0,rK.Yb)(e),l=(0,rK.av)(e),i=new rV.Z6(a),s=e?i.format(e):"Undefined";return{className:s5.BP,callback:()=>t(e),icon:o.createElement(np.U,{className:s5.QE,svg:r},l),displayText:s,recordingKey:tJ.Pt(n,"createActionOption",e)}}({clickCb:b,recordingKey:s,actionType:e,isUI3:g}))}),o.createElement(o.Fragment,null,o.createElement("button",{ref:i,className:S,onClick:E,"aria-label":(0,T.t)("proto.prototype_panel.create_action_button"),"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":e.isNestedInConditional?(0,T.t)("proto.prototype_panel.add_nested_action"):(0,T.t)("proto.prototype_panel.add")},e.renderButton?o.createElement(np.U,{svg:nT.A},o.createElement(n$.e,null)):(0,T.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")),n&&i.current&&o.createElement(cH.j,{minWidth:130,lean:"center",parentRect:i.current.getBoundingClientRect(),hidePointWhenContentOffScreen:!0,showPoint:!0,items:N,dispatch:f,onSelectItem:e=>e.callback?.(),recordingKey:"actionDropdown"}))}let cQ="prototype_conditional_controls--conditionalRowUI3--rQlu6",cJ="prototype_conditional_controls--conditionIcon--Npk57";var cj=n(381809),cq=n(527967),cZ=n(5068);function c0({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:a,updateActions:r,onAddAction:l,autoOpenVariablePicker:s,isSelected:c,handleMouseDownUI3:d,...p}){let m=p.conditionalActions,u=m?.actions?m?.actions:[],E=m?.condition?m?.condition:void 0,y=(0,rX.YT)()===rX.Oz.TWO_COL,_=y?cQ:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",g=o.createElement(sB.KN,{resolvedType:i.rXF.BOOLEAN,targetVariableData:E,updateSelectionProperties:n,recordingKey:p.recordingKey,updateConditionInConditionalAction:a,showVariableThumbnails:!0,isNarrowPanel:!0}),h=o.createElement("div",{className:"prototype_conditional_controls--addButton--vlYLn"},o.createElement(cX,{addButtonPressed:l,recordingKey:tJ.Pt(p.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})),v=o.createElement(o.Fragment,null,y?o.createElement("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0"},(0,T.tx)("proto.else")):o.createElement(rL.B,{className:cJ,svg:cj.A}),!y&&u.length>0&&o.createElement("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn"},o.createElement(cX,{addButtonPressed:l,recordingKey:tJ.Pt(p.recordingKey,"addActionToElseButton"),renderButton:!y,isNestedInConditional:!0}))),f=y?o.createElement(nr.E,{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onClick:d},v):o.createElement(na.fI,{className:y?cQ:"prototype_conditional_controls--conditionalRow--u0PaS"},v);return o.createElement(o.Fragment,null,p.ifStatement&&o.createElement("div",{className:_},!y&&o.createElement(sY.Y,{direction:"horizontal",spacing:4},o.createElement("span",{className:y?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7"},o.createElement(sY.Y,{direction:"horizontal",spacing:0},o.createElement(rL.B,{className:cJ,svg:cq.A}),o.createElement(sY.Y,{direction:"horizontal",spacing:0},(0,tU.hS)(E)&&g),o.createElement(rL.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:cZ.default}))),!y&&u.length>0&&h)),!p.ifStatement&&f,u&&u.map((a,r)=>o.createElement(dK,{key:r,updateMultipleDestinationNodes:t.appendActionIndex(r),action:a,recordingKey:tJ.Pt(p.recordingKey,"conditional-action-row",r),updateSelectionProperties:n.appendActionIndex(r),onDeleteAction:()=>e(r),interactionType:p.interactionType,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],r],numActions:u.length,isNestedInConditional:!0,stateManagementVersion:p.stateManagementVersion,selectedInteractions:p.selectedInteractions,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onAddAction:l,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:s})),0===u.length&&o.createElement(dK,{key:0,updateMultipleDestinationNodes:t.appendActionIndex(0),action:p.emptyAction,recordingKey:tJ.Pt(p.recordingKey,"conditional-action-row",0),updateSelectionProperties:n.appendActionIndex(0),onDeleteAction:()=>e(0),interactionType:p.interactionType,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],0],numActions:u.length,isNestedInConditional:!0,stateManagementVersion:p.stateManagementVersion,selectedInteractions:p.selectedInteractions,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onAddAction:l,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:s}))}function c1(e,t,n){return function(a){var o=[...t];o.length>e?o[e].condition=a:o.push({condition:0===e?a:void 0,actions:[]},{condition:1===e?a:void 0,actions:[]}),n({conditionalActions:o})}}function c2({onDrop:e,onSelect:t,onExpand:n,action:a,updateMultipleDestinationNodes:l,updateSelectionProperties:i,interactionType:s,recordingKey:c,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:m,selectedActionIndex:u,expandedRows:E,autoOpenVariablePicker:y,onNewActionAdded:_,handleMouseDownUI3:g}){let h=(0,r.wA)(),v=(0,U.p8)("currentPage"),f=(0,rX.YT)()===rX.Oz.TWO_COL,b=f?u.equals(m):void 0,{shouldShowAdvancedPrototypingPaywall:S,showAdvancedPrototypingConditionalActionsModal:N}=(0,rX.zt)(),I=(0,tU.hS)(a.conditionalActions)&&a.conditionalActions?a.conditionalActions:[],P=e=>function(t){var n=[...I];n.length>e?n[e].actions=[...t]:n.push({actions:t}),i({conditionalActions:n})},C=e=>function(t){var n=[...I],a=0;if(n.length>e){var o=n[e].actions;o?o.push(t):o=[t],a=o.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),a=1;"SET_VARIABLE"===t.connectionType&&(y.current=!0),i({conditionalActions:n}),_&&_(new cY.Op([m[0],e,a-1])),h((0,o9._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:v,actionInConditionalAction:!0}}))},A=e=>function(t){if(S)N();else{var n=[...I];let a=I[e],o=[];if(a&&a.actions)for(let e=0;e<a.actions.length;e++){let n=a.actions[e];e!==t?o.push(n):h((0,o9._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:v,actionInConditionalAction:!0}}))}n[e].actions=o,i({conditionalActions:n})}},k=I.length>0?I[0]:void 0,w=I.length>1?I[1]:void 0;return o.createElement("div",{style:f?{position:"relative"}:void 0},(0,tU.gl)(a.conditionalActions)&&o.createElement(s1.Y1,null,o.createElement(nr.E,{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),i({conditionalActions:e})}},(0,T.t)("fullscreen.properties_panel.click_to_replace_mixed_content"))),(0,tU.hS)(a.conditionalActions)&&o.createElement(o.Fragment,null,o.createElement(c0,{key:0,conditionalActions:k,recordingKey:tJ.Pt(c,"conditional-block",0),updateCondition:c1(0,I,i),updateActions:P(0),onAddAction:C(0),updateMultipleDestinationNodes:l.appendActionIndex(0),onDeleteAction:A(0),interactionType:s,updateSelectionProperties:i.appendActionIndex(0),ifStatement:!0,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:[m[0],0],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:u,autoOpenVariablePicker:y,expandedRows:E,emptyAction:{ifStatement:!0,action:a},isSelected:b,handleMouseDownUI3:g}),o.createElement(c0,{key:1,conditionalActions:w,recordingKey:tJ.Pt(c,"conditional-block",1),updateCondition:c1(1,I,i),updateActions:P(1),onAddAction:C(1),updateMultipleDestinationNodes:l.appendActionIndex(1),onDeleteAction:A(1),interactionType:s,updateSelectionProperties:i.appendActionIndex(1),ifStatement:!1,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:[m[0],1],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:u,autoOpenVariablePicker:y,expandedRows:E,emptyAction:{ifStatement:!1,action:a},isSelected:b,handleMouseDownUI3:g})))}function c4({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,...r}){let l=t.length>0?t[0]:void 0,s=l?.condition?l?.condition:void 0,c=eA()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!s});return o.createElement(o.Fragment,null,o.createElement(oB.cS,{input:null,label:(0,T.tx)("proto.condition")}),o.createElement(aI.Ad,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,tU.hS)(s)?o.createElement("div",{className:c},o.createElement(sB.KN,{resolvedType:i.rXF.BOOLEAN,targetVariableData:s,updateSelectionProperties:e.appendActionIndex(0),recordingKey:r.recordingKey,updateConditionInConditionalAction:c1(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,showVariableThumbnails:!0,isNarrowPanel:!0})):null}))}var c8=n(510879),c3=n(830002),c5=n(731262);class c7 extends oF.c${}class c6 extends oF.l6{}class c9 extends o.PureComponent{constructor(e){super(e),this.loadDestinationsFromFullscreen=()=>{let e=i.baT.ALL;"SCROLL_TO"===this.props.action?e=i.baT.SCROLL_TO:"SWAP_STATE_TO"===this.props.action&&(e=i.baT.STATES);let{viableIds:t,disabledIds:n}=i.X3B.getTransitionDestinationsOnActiveCanvas(e);return new Promise((e,a)=>{this.setState({viableIds:t,disabledIds:n},e)})},this.onOptionFocus=e=>{ee.Uc(e??"")},this.renderGroupedScrollableNodes=(e,t)=>{let n=cl()(e.filter(e=>this.nodeNameFormatter.hasNameForNode(e)),e=>e===t&&(0,tU.hS)(t)?rx.Ql(this.props.scene,e)?.guid:this.props.scene.get(e)?.parentGuid),a=Object.keys(n);(0,rx.X4)(a,this.nodeNameFormatter.format.bind(this.nodeNameFormatter));let{tlfId:r,index:l}=(0,rx.H_)(this.props.scene,a);return r&&l&&(a.splice(l,1),a=[r,...a]),a.reduce((e,t,a)=>(0!==a&&e.push(o.createElement(oF.sK,{key:a})),e.push(o.createElement(c7,{key:`disabled-${t}`,value:t+" ",recordingKey:tJ.Pt(this.props,`disabled-option-${t}`),disabled:!0})),n[t].forEach((t,n)=>{e.push(o.createElement(c7,{key:`enabled-${t+n}`,value:t,recordingKey:tJ.Pt(this.props,`viable-option-${n}`),disabled:!1}))}),e),[])},this.state={viableIds:[],disabledIds:[]},this.nodeNameFormatter=new rV.cP(e.scene)}render(){let e=this.props.nodeId===tU.oV?tU.oV:o6.dI(this.props.nodeId),t=this.state.viableIds;(0,tU.hS)(e)&&e!==o6.AD&&-1===t.indexOf(e)&&(t=t.concat([e]));let n=this.state.disabledIds,a=`prototype-destination-select-${this.props.recordingKey}`,r="SCROLL_TO"!==this.props.action?t.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(c7,{key:`enabled-${e}`,value:e,recordingKey:tJ.Pt(this.props,`viable-option-${t}`),disabled:!1})):this.renderGroupedScrollableNodes(t,e),l=n.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(c7,{key:`disabled-${e}`,value:e,recordingKey:tJ.Pt(this.props,`disabled-option-${t}`),disabled:!0})),i=this.props.isUI3?o.Fragment:na.fI;return o.createElement(i,null,o.createElement(c6,{id:a,dataTestId:"destination-select",className:this.props.className,chevronClassName:"prototype_destination_dropdown--chevron--pmWtI",inputClassName:"prototype_destination_dropdown--input--rzglN",dropdownWidth:ny.DxS,property:e,formatter:this.nodeNameFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:tJ.Pt(this.props,"select"),willShowDropdown:this.loadDestinationsFromFullscreen,onOptionFocus:this.onOptionFocus,hideDropdownWhenContainerMoves:!(0,t_.nl)()},r,0!==n.length&&0!==t.length&&o.createElement(oF.sK,null),l))}}let de=o.memo(function(e){let t=(0,F.tS)(),n=(0,F._G)(),a=(0,r.d4)(dt),l=(0,r.d4)(rF.qd),s=(0,r.d4)(rF.dK),c=(0,c8.D)(l,s),d=(0,r.d4)(dn),p=o.useMemo(()=>(0,c5.cP)(d,t,n,e.actionIndexPath),[d,t,n,e.actionIndexPath]),m=o.useMemo(()=>(0,c5.cP)(a,t,n),[a,t,n]),u=p||m;if(!u||u.mode!==i.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:E,stateGroupModel:y,selectedStates:_,selectedStatesPropertyValues:g}=u,h=y.propertySortOrder||[],v=y.propertyValues;return v?o.createElement(c3.lS,{sortedProperties:h,stateGroupPropertyValues:v,selectedStatesPropertyValues:g,selectedStates:_,allStates:E,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let a=t[e].symbol.node_id;for(let t of(n[e]=a,c[e]||[]))n[t]=a;for(let e of l)n[e]||(n[e]=a)}e.onChange(n)},recordingKey:e.recordingKey,hideErrorsPanel:!0,shouldIndent:!0,extended:!0}):null});function dt(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function dn(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var da=n(169231),dr=n(511787),dl=n(939143),di=n(720531);let ds="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",dc="prototype_set_variable_controls--icon---HzDt",dd="prototype_set_variable_controls--placeholderText--PBIqf";function dp({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:a,...l}){let c=o.useRef(null),d=(0,r.wA)(),p=(0,em.GS)(),m=(0,r.d4)(e=>e.variablePickerShown),u=(0,aA.tZ)((0,tU.hS)(t)&&"id"in t?t.id:void 0),E=(0,aA.u)((0,tU.hS)(t)&&"id"in t?t.id:void 0),[y,_]=o.useState("");(0,ew.h)(()=>{a&&!0===a.current&&(h(),a.current=!1)});let g=(0,aA.BQ)((0,tU.hS)(t)&&"id"in t?t.id:void 0)??(0,s2.m9)((0,tU.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);o.useEffect(()=>{void 0!==e&&g&&"MIXED"!==g&&(0,tU.hS)(e)&&e.resolvedType!==g.resolvedType&&!((0,s2.tz)(e.resolvedType)&&(0,s2.tz)(g.resolvedType))&&n({targetVariableData:void 0})},[g,n,e]);let h=()=>{let e=c.current.getBoundingClientRect();d((0,da.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:i.rXF.STRING,initialPosition:new oM.Mi(e.left-20,e.top),key:l.recordingKey,onVariableSelected:I}))},v=o.useCallback(()=>{d((0,da.B)())},[d]),[f,N]=o.useState(!1),I=o.useCallback(t=>{if(void 0!==t&&t.node_id){let a={targetVariable:{id:t.node_id}},o=i.CWU.getVariableResolvedValue(t.node_id,new Map);!e&&t.resolvedType===i.rXF.COLOR&&o&&(a.targetVariableData=o??void 0),n(a),d((0,o9.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),N(!0)}},[d,e,n]),P=o.useCallback(e=>{e.value.stablePath.map(e=>o6.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),N(!0))},[n]),C=o.useMemo(()=>({type:"LOCAL_VARIABLES",layout:"list"}),[]);o.useEffect(()=>{let e=i.Ez5.prototypingEditorState().colorPickerEyedropperVarData;return(0,er.lu)(e,{onChangeImmediate(){let t=e.getCopy();t&&n({targetVariableData:t})}})},[n]);let A="nodeFieldAlias"in t?(0,s2.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,k=A?(0,s2.Xx)(A.varValue.resolvedType):null,w=null;if((0,tU.gl)(t))w=null;else if(g?.resolvedType===i.rXF.COLOR)w=(0,tU.gl)(e)?o.createElement("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu"},(0,T.t)("fullscreen.mixed")):o.createElement(o.Fragment,null,o.createElement(di.gJ,{variableValue:e??g,onChange:e=>{n({targetVariableData:e})},recordingKey:tJ.Pt(l.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"}));else{let t=l.isNestedInConditional?"prototype_set_variable_controls--absoluteIconInConditional--BbEmW":"prototype_set_variable_controls--absoluteIcon--1XpBF",a=i.rXF.BOOLEAN;E?a=E.resolvedType:A&&(a=A.varValue.resolvedType===i.rXF.TEXT_DATA?i.rXF.STRING:A.varValue.resolvedType),w=o.createElement("div",{className:p?void 0:S.cx.ml12.$},o.createElement("div",{className:ds},o.createElement(sB.KN,{resolvedType:a,targetVariableData:e,autoOpenExpressionBuilder:f,setAutoOpenExpressionBuilder:N,updateSelectionProperties:n,recordingKey:l.recordingKey,isNarrowPanel:l.isNarrowPanel,showVariableThumbnails:!0}),!p&&o.createElement(rL.B,{className:eA()(dc,t),svg:cZ.default})))}let O=eA()({"prototype_set_variable_controls--targetVariableDropdown--IZwoF":!p&&!l.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownNarrow--WWi-t prototype_set_variable_controls--targetVariableDropdown--IZwoF":!p&&l.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":p,[dd]:p&&!(u||A)}),x=(0,r.d4)(rz.ZM),D=(0,s.kc)().ds_variable_props_unified_ui&&x?(0,T.t)("proto.select_variable_unified"):p?(0,T.t)("proto.select_variable.short"):(0,T.t)("proto.select_variable"),R=o.createElement(rM.D8,{recordingKey:tJ.Pt(l.recordingKey,"selectTargetVariable"),onClick:h},o.createElement("div",{className:p?void 0:(0,tU.hS)(t)?"prototype_set_variable_controls--targetVariableLabel--AFCqK":"prototype_set_variable_controls--targetVariableLabelInactive--zHWCC prototype_set_variable_controls--targetVariableLabel--AFCqK",ref:c},o.createElement(sY.Y,null,o.createElement("div",{className:O},o.createElement("div",{className:ds},(0,tU.gl)(t)?o.createElement("div",{className:eA()(S.cx.pt2.$,S.cx.pb2.$)},(0,T.t)("fullscreen.mixed")):u?o.createElement(s3.wG,{text:u,thumbnailValue:g,isDeleted:!!E&&(0,s8.eF)(E)}):A?o.createElement(s3.wG,{text:A.name,thumbnailValue:k,isDeleted:!1,colorTheme:s3.J2.COMPONENT}):o.createElement("div",{className:eA()(S.cx.pt2.$,S.cx.pb2.$,p?"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N":void 0)},D),!p&&o.createElement(rL.B,{className:dc,svg:cZ.default})))))),M=p?o.createElement(oB.cS,{input:R,label:(0,s.kc)().ds_variable_props_unified_ui?(0,T.tx)("proto.target"):(0,T.tx)("proto.variable")}):R,L=eA()({"prototype_set_variable_controls--setVariableToContainerNarrow--HHbHQ prototype_set_variable_controls--setVariableToContainer--kxsCZ":!p&&l.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainer--kxsCZ":!p&&!l.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":p,[dd]:p&&!e&&g?.resolvedType!==i.rXF.COLOR}),V=o.createElement("div",{className:L,"data-testid":"set-variable-container"},w),K=p?null!==w?o.createElement(oB.cS,{label:(0,T.tx)("proto.variable.value"),input:V}):null:V;return o.createElement("div",{className:p?void 0:S.cx.relative.$},M,m.isShown&&"variable-picker-set-variable-action"===m.type&&m.key===l.recordingKey?o.createElement(o.Fragment,null,o.createElement(oh.vx,{title:"",headerSize:"hidden",initialPosition:m.initialPosition,onClose:v,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0},o.createElement(dl.YK,{selectedItem:E,disabledVariableIds:new Set,currentView:C,toggleLayout:b.lQ,pickerType:"set-variable",setControlRightButtons:o.createElement(dr.f,{resolvedTypes:[i.rXF.BOOLEAN,i.rXF.STRING,i.rXF.FLOAT,i.rXF.COLOR]}),onVariableSelected:I,onClose:v,recordingKey:tJ.Pt(l.recordingKey,"variablePickerForSelection"),searchQuery:y,onSearchInputChange:_,onComponentPropSelected:(0,s.kc)().ds_variable_props_proto?P:void 0})),o.createElement(dl.$3,{onClose:v})):null,K)}var dm=n(896474),du=n(394781);let dE=(0,r7.ex)("prototype_state_management_info",function(){let e=o.createElement(u.N,{newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295",htmlAttributes:{rel:"noopener noreferrer",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}}},(0,T.tx)("proto.state_management.info_tooltip_learn_more")),t=o.createElement("span",null,o.createElement("strong",null,(0,T.tx)("proto.animation_panel.preserve_scroll_position")));return o.createElement("div",{className:"prototype_state_management_info_tooltip--stateManagementMoreInfo---gER1 tooltip--text--Ll1mS"},(0,T.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e}))}),dy="prototype_state_management_panel--checkboxRow--2u02e checkbox--_checkboxRow--oEhow",d_="prototype_state_management_panel--expandCaret--uuDge";function dg({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:l,showResetInteractiveComponentState:i,updateSelectionProperties:s,stateManagementVersion:c,selectedInteractions:d}){let p=(0,r.wA)(),m=(0,em.GS)(),[u,E]=o.useState(!m),y=o.useContext(s4.c);if((0,rX.YT)()===rX.Oz.TWO_COL&&y===s4.P.LEFT)return null;let _=(0,rX.LH)(c),g=o.createElement(ox.S,{onChange:t=>{p((0,o9._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),s({...function(e){if((0,tU.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,tU.gl)(e.preserveScroll),recordingKey:tJ.Pt(n,"preserve-scroll-check"),label:o.createElement(oD.J,null,(0,T.tx)("proto.animation_panel.preserve_scroll_position"))}),h=m?o.createElement(oB.TN,null,g):o.createElement(na.fI,{className:dy},g),v=o.createElement(ox.S,{onChange:t=>{p((0,o9._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:du.zZ.haveAnyInteractionsBeenUpgraded(d)}})),s({...function(e){if((0,tU.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,tU.gl)(e.resetScrollPosition),recordingKey:tJ.Pt(n,"reset-scroll-position-check"),label:o.createElement(oD.J,null,(0,T.tx)("proto.animation_panel.reset_scroll_position"))}),f=o.createElement("div",{"data-tooltip-type":nm.Ib.SPECIAL,"data-tooltip":dE,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240,className:m?"prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3":void 0},o.createElement(dm.In,{icon:"info-16"})),b=m?o.createElement(oB.TN,null,v," ",f):o.createElement(na.fI,{className:dy},v),S=o.createElement(ox.S,{onChange:t=>{p((0,o9._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:du.zZ.haveAnyInteractionsBeenUpgraded(d)}})),s({...function(e){if((0,tU.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,tU.gl)(e.resetInteractiveComponents),recordingKey:tJ.Pt(n,"reset-component-state-check"),label:o.createElement(oD.J,null,(0,T.tx)("proto.animation_panel.reset_component_state"))}),N=m?o.createElement(oB.TN,null,S):o.createElement(na.fI,{className:dy},S),I=o.createElement(ox.S,{onChange:t=>{p((0,o9._P)({name:"Reset Video Position Changed",params:{newValue:t}})),s({...function(e){if((0,tU.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,tU.gl)(e.resetVideoPosition),recordingKey:tJ.Pt(n,"reset-video-position-check"),label:o.createElement(oD.J,null,(0,rX.LH)(c)?(0,T.tx)("proto.state_management.reset_video_state"):(0,T.tx)("proto.animation_panel.reset_video_state"))}),P=m?o.createElement(oB.TN,null,I):o.createElement(na.fI,{className:dy},I),C=o.createElement(na.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,rX.kM)(c)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`},!m&&o.createElement(na.fI,null,o.createElement(na.xw,{className:"prototype_state_management_panel--panelTitle--Nr4Eh",faded:!0},(0,T.tx)("proto.state_management")),!(0,rX.kM)(c)&&f),(0,rX.uU)(c)&&a&&h,l&&(0,rX.uU)(c)&&P,_&&b,_&&i&&N,_&&l&&P,(0,tU.gl)(c)&&o.createElement(sY.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12}},o.createElement(na.UZ,null,(0,T.tx)("proto.state_management.mixed_state_update")))),A=o.createElement(np.U,{svg:u?nb.A:nS.A},u?o.createElement(ns.O,{className:d_}):o.createElement(ni.k,{className:d_})),k=o.createElement(nr.E,{key:"expand-caret",recordingKey:tJ.Pt(n,"expand-caret"),onClick:()=>{E(!u)},actionOnPointerDown:!0,className:"prototype_state_management_panel--expandRow--RVDCp"},A,o.createElement("span",null,(0,T.tx)("proto.state")));return o.createElement(tZ.k,{name:"prototype_state_management_panel"},m&&k,(u||!m)&&C)}class dh extends oF.c${}class dv extends oF.l6{}let df=o6.AD;class db extends rV.cP{format(e){return e===df||null===e?(0,T.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function dS(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:l,targetVideoNodeID:i,isVideoSelected:s,onChange:c}=e,d=(0,r.wA)(),[p,m]=o.useState(()=>s?new db(a):new rV.cP(a));t.sort((e,t)=>{let n=p.format(e),a=p.format(t);return n.localeCompare(a)}),s&&t.unshift(df);let u=t.length>0&&n.length>0,E=`prototype-target-video-select-${e.recordingKey}`,y=(0,em.GS)(),_=o.createElement(dv,{id:E,dataTestId:"target-video-select",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",inputClassName:"prototype_target_video_dropdown--input--infAK",property:(0,tU.gl)(i)?i:o6.dI(i),formatter:p,onChange:c,dispatch:d,dropdownShown:l,recordingKey:tJ.Pt(e,"select"),onOptionFocus:e=>{ee.Uc(e??"")},dropdownAlignment:"left"},t.filter(e=>p.hasNameForNode(e)).map((t,n)=>o.createElement(dh,{key:`enabled-${n}`,value:t,recordingKey:tJ.Pt(e,`viable-option-${n}`),disabled:!1})),u&&o.createElement(oF.sK,null),n.filter(e=>p.hasNameForNode(e)).map((t,n)=>o.createElement(dh,{key:`disabled-${n}`,value:t,recordingKey:tJ.Pt(e,`viable-option-${n}`),disabled:!0})));return y?o.createElement(oB.cS,{input:_,label:(0,T.tx)("proto.video_dropdown.label")}):_}var dT=n(946689);function dN({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:a}){let r=(0,em.GS)(),l=o.createElement(dT.ks,{className:r?"prototype_open_url_action_options--urlInputUI3--H-JfT":"prototype_open_url_action_options--urlInput--T-tGT",dataTestId:"url-input",placeholder:(0,T.t)("proto.interaction.example_com"),value:(0,tU.gl)(e.connectionURL)?(0,T.t)("fullscreen.mixed"):(0,tU._W)(e.connectionURL,""),onChange:n,recordingKey:tJ.Pt(t,"urlTextInput"),autoFocus:!1}),i=o.createElement(ox.S,{label:o.createElement(oD.J,null,(0,T.tx)("proto.action_open_url_in_new_tab")),onChange:a,recordingKey:tJ.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return o.createElement(o.Fragment,null,r?o.createElement(oB.cS,{label:(0,T.tx)("proto.open_url.text_input_label"),input:l}):l,r?o.createElement(oB.TN,null,i):o.createElement(na.fI,{className:"prototype_open_url_action_options--checkboxRow--mu17T checkbox--_checkboxRow--oEhow"},i))}var dI=n(588599);function dP({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:l}){let{smallNudgeAmount:i,bigNudgeAmount:s}=(0,tb.sT)(),c=(0,r.wA)(),d=(0,em.GS)(),p=(t,n)=>(a,o)=>{t&&e({extraScrollOffset:{...t,[n]:a}},{shouldCommit:o})},m=(0,tU._W)(n,{x:0,y:0});if(!a||"SCROLL_TO"!==t)return null;let u=o.createElement(a7.gq,{className:d?void 0:s5.U,inputClassName:d?s5.oM:s5.hF,value:m.y,wheelMultiplier:i,scrubMultiplier:i,smallNudgeAmount:i,bigNudgeAmount:s,onValueChange:p(m,"y"),dispatch:c,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.y_offset"),tooltipForScreenReadersOnly:!1,recordingKey:tJ.Pt(l,"extraScrollOffsetY")},d?o.createElement("span",{className:s5.QK},(0,T.tx)("proto.scroll_options.scroll_offset.y")):o.createElement(rL.B,{className:s5.QK,svg:dI.A})),E=o.createElement(a7.gq,{className:d?void 0:s5.sC,inputClassName:d?s5.oM:s5.hF,value:m.x,wheelMultiplier:i,scrubMultiplier:i,smallNudgeAmount:i,bigNudgeAmount:s,onValueChange:p(m,"x"),dispatch:c,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.x_offset"),tooltipForScreenReadersOnly:!1,recordingKey:tJ.Pt(l,"extraScrollOffsetX")},d?o.createElement("span",{className:s5.QK},(0,T.tx)("proto.scroll_options.scroll_offset.x")):o.createElement(rL.B,{className:s5.Kh,svg:dI.A}));return d?o.createElement(oB.Cm,{label:(0,T.tx)("proto.scroll_options.offset"),leftInput:E,rightInput:u}):o.createElement(na.fI,null,u,E)}let dC=(0,o.memo)(function(e){return(0,lC.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,lC.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0m1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"})})}),dA="prototype_video_action_options--chevron--mkNyv",dk="prototype_video_action_options--input--3-cEi",dw=new rV.js,dO=new rV.Z6;function dx({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:l}){let i=(0,em.GS)(),s=(0,rV.Od)(e),c=(0,tU.E7)(e.mediaAction),d="UPDATE_MEDIA_RUNTIME"===(0,tU.E7)(e.connectionType),p="SKIP_TO"===c,m="SKIP_FORWARD"===c||"SKIP_BACKWARD"===c,u="PLAY"===c||"PAUSE"===c||"TOGGLE_PLAY_PAUSE"===c,E="MUTE"===c||"UNMUTE"===c||"TOGGLE_MUTE_UNMUTE"===c,y=(0,r.wA)(),_=(0,tb.RU)(),g=o.useCallback(e=>{n({mediaSkipToTime:e}),y((0,o9._P)({name:"Media skip to time changed",params:{value:e}}))},[y,n]),h=`prototype-media-action-select-${l}`,v="prototype_video_action_options--shortDropdown--NOXXv",f=a&&a.type===h?dw:dO,b=o.createElement(sj,{id:h,dataTestId:"media-play-pause-select",className:v,chevronClassName:dA,inputClassName:dk,property:s,formatter:f,onChange:t,dispatch:y,dropdownShown:a,recordingKey:tJ.Pt(l,"select")},o.createElement(sJ,{key:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:tJ.Pt(l,"toggle-play-pause-option"),disabled:!1}),o.createElement(sJ,{key:"UPDATE_MEDIA_PLAY",value:"UPDATE_MEDIA_PLAY",recordingKey:tJ.Pt(l,"play-option"),disabled:!1}),o.createElement(sJ,{key:"UPDATE_MEDIA_PAUSE",value:"UPDATE_MEDIA_PAUSE",recordingKey:tJ.Pt(l,"pause-option"),disabled:!1})),S=o.createElement(sj,{id:h,dataTestId:"media-mute-unmute-select",className:v,chevronClassName:dA,inputClassName:dk,property:s,formatter:f,onChange:t,dispatch:y,dropdownShown:a,recordingKey:tJ.Pt(l,"select")},o.createElement(sJ,{key:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:tJ.Pt(l,"toggle-mute-unmute-option"),disabled:!1}),o.createElement(sJ,{key:"UPDATE_MEDIA_MUTE",value:"UPDATE_MEDIA_MUTE",recordingKey:tJ.Pt(l,"mute-option"),disabled:!1}),o.createElement(sJ,{key:"UPDATE_MEDIA_UNMUTE",value:"UPDATE_MEDIA_UNMUTE",recordingKey:tJ.Pt(l,"unmute-option"),disabled:!1})),N=o.createElement(sj,{id:h,dataTestId:"media-skip-by-select",className:v,chevronClassName:dA,inputClassName:dk,property:s,formatter:f,onChange:t,dispatch:y,dropdownShown:a,recordingKey:tJ.Pt(l,"select"),dropdownWidth:160},o.createElement(sJ,{key:"UPDATE_MEDIA_SKIP_FORWARD",value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:tJ.Pt(l,"skip-forward-option"),disabled:!1}),o.createElement(sJ,{key:"UPDATE_MEDIA_SKIP_BACKWARD",value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:tJ.Pt(l,"skip-backward-option"),disabled:!1})),I=o.createElement(a7.qd,{className:"prototype_video_action_options--timestampContainer---DdaI",inputClassName:"prototype_video_action_options--timestamp--luOrs",dataTestId:"mediaSkipToTime-input",dispatch:y,value:e.mediaSkipToTime||0,onValueChange:g,wheelMultiplier:_/1e3,scrubMultiplier:_/1e3,max:3600,displayFractions:!0,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.timestamp_to_set_to"),tooltipForScreenReadersOnly:!0,recordingKey:tJ.Pt(l,"mediaSkipToTimeInput")},i?o.createElement(dC,null):void 0),P="SKIP_BACKWARD"===c?(0,T.t)("proto.trigger.duration_to_jump_backward"):(0,T.t)("proto.trigger.duration_to_jump_forward"),C=o.createElement(a7.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn",dataTestId:"mediaSkipByAmount-input",dispatch:y,value:e.mediaSkipByAmount||5,onValueChange:e=>{n({mediaSkipByAmount:e}),y((0,o9._P)({name:"Media skip by amount changed",params:{value:e}}))},wheelMultiplier:_/1e3,scrubMultiplier:_/1e3,max:3600,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":P,tooltipForScreenReadersOnly:!0,recordingKey:tJ.Pt(l,"mediaSkipByAmountInput")});if(!d)return null;if(i){if(u)return o.createElement(oB.cS,{input:b,label:(0,T.tx)("proto.video_options.behavior")});if(E)return o.createElement(oB.cS,{input:S,label:(0,T.tx)("proto.video_options.behavior")});if(m)return o.createElement(o.Fragment,null,o.createElement(oB.cS,{input:N,label:(0,T.tx)("proto.video_options.direction")}),o.createElement(oB.cS,{input:C,label:(0,T.tx)("proto.video_options.offset")}));if(p)return o.createElement(oB.cS,{input:I,label:(0,T.tx)("proto.video_options.timestamp")})}return o.createElement(na.fI,null,u&&b,E&&S,m&&N,m&&C,p&&I)}function dD({action:e,recordingKey:t,interactionType:n,onActionChange:a,updateMultipleDestinationNodes:l,updateSelectionProperties:s,stateManagementVersion:c,autoOpenVariablePicker:d,autoOpenExpressionBuilder:p,setAutoOpenExpressionBuilder:m,...u}){let E=(0,r.wA)(),y=(0,nK.Um)(),{scene:_,selectionProperties:g}=(0,lU.R)(e=>({scene:e.mirror.sceneGraph,selectionProperties:e.mirror.selectionProperties})),h=(0,em.GS)(),v=(0,rX.YT)(),f=v===rX.Oz.SINGLE_COL,b=v===rX.Oz.TWO_COL,N=o.useContext(s4.c),I=b&&N===s4.P.RIGHT,P="SET_VARIABLE"===(0,tU.E7)(e.connectionType),C="SET_VARIABLE_MODE"===(0,tU.E7)(e.connectionType),A="CONDITIONAL"===(0,tU.E7)(e.connectionType),k="INTERNAL_NODE"===(0,tU.E7)(e.connectionType),w="INTERNAL_NODE"===(0,tU.E7)(e.connectionType)&&"SWAP_STATE"===(0,tU.E7)(e.navigationType),O="URL"===(0,tU.E7)(e.connectionType),x=k||"BACK"===(0,tU.E7)(e.connectionType)||"CLOSE"===(0,tU.E7)(e.connectionType),D="UPDATE_MEDIA_RUNTIME"===(0,tU.E7)(e.connectionType),R=(0,rK.dq)(g),M=(0,o_.uQ)(),L=[],V=[];if(M){let{viableIds:e,disabledIds:t}=i.X3B.getVideoNodesOnSameTlfAsNode(M);L=e,V=t}let K=o6.dI((0,tU.E7)(e.transitionNodeID)),U=null!=K&&K!==o6.AD,F=k&&(!(0,tU.hS)(e.transitionNodeID)||U),B=(0,tU.E7)(e.navigationType),G=k&&"OVERLAY"===(0,tU.E7)(B),z=(0,rX.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),Y=x&&!G&&("INSTANT"===z.behavior||"DISSOLVE"===z.behavior),W=k&&"OVERLAY"===(0,tU.E7)(e.navigationType)&&U,H=k&&(G||"SWAP"===(0,tU.E7)(B)),$=!D&&(0,rX.oc)(e),X=(0,rX.GB)(e),Q=(0,rX.uU)(c)?Y||$:(0,rX.Fp)(c,e.connectionType,e.navigationType),{selectedInteractions:J}=(0,rJ.Ay)(rG.J.NORMAL),j=J.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>rR.d({nodeID:e.sourceNodeID,interactionID:e.id})),q=o.useCallback(e=>{let t=o6.sH(e);t&&s({transitionNodeID:t}),E((0,o9._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(j),destinationTlfId:e}}))},[E,s,j]),Z=o.useCallback(e=>{l(e),E((0,o9._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),E((0,o9._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(j)}}))},[l,E,j]),ee=o.useCallback(e=>{s({connectionURL:e.target.value})},[s]),et=(0,rV.Od)(e),en=eA()({[s5.Ph]:!h,[s5.Ti]:u.isNestedInConditional&&!f&&!I}),ea=k&&!w,eo=o.createElement(c9,{className:s5.iR,dispatch:E,dropdownShown:y,onChange:q,nodeId:e.transitionNodeID||o6.Hr,scene:_,recordingKey:tJ.Pt(t,"destinationDropdown"),action:et,isUI3:h}),er=o.createElement(dP,{action:et,showScrollToOptions:"SCROLL_TO"===et,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:s,recordingKey:tJ.Pt(t,"scrollOptionsPanel")}),el=o.createElement(cM,{interactionType:n,updateSelectionProperties:s,recordingKey:tJ.Pt(t,"overlaySettings"),actionIndexPath:u.actionIndexPath,nodeId:e.transitionNodeID||o6.Hr});return o.createElement("div",{className:en},ea&&(h?o.createElement(o.Fragment,null,o.createElement(oB.cS,{label:H?(0,T.tx)("proto.overlay"):(0,T.tx)("proto.destination"),input:eo}),er,W&&el):eo),O&&o.createElement(dN,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{s({openUrlInNewTab:e}),E((0,o9._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:ee}),D&&o.createElement(dS,{dropdownShown:y,scene:_,targetVideoNodeID:e.transitionNodeID||o6.Hr,recordingKey:tJ.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:L,disabledSameFrameVideoIds:V,isVideoSelected:R,onChange:q}),o.createElement(dx,{dropdownShown:y,action:e,onChange:a,updateSelectionProperties:s,recordingKey:t}),!h&&er,P&&o.createElement("div",{className:h?void 0:S.cx.ml4.$},o.createElement(dp,{className:s5.PB,dispatch:E,onChange:q,nodeId:e.transitionNodeID||o6.Hr,targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:s,recordingKey:tJ.Pt(t,"setVariableControls"),action:et,isNestedInConditional:u.isNestedInConditional,isNarrowPanel:u.isNestedInConditional||u.isNarrowPanel,autoOpenVariablePicker:d})),C&&o.createElement("div",{className:h?void 0:S.cx.ml4.$},o.createElement(cT,{dispatch:E,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:s,recordingKey:tJ.Pt(t,"setVariableControls"),actionIndexPath:u.actionIndexPath.join(",")})),A&&(I?o.createElement(c4,{recordingKey:tJ.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:p,setAutoOpenExpressionBuilder:m,updateSelectionProperties:s,conditionalActions:(0,tU.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):o.createElement(c2,{updateSelectionProperties:s,recordingKey:tJ.Pt(t,"conditionalActionSection"),action:e,updateMultipleDestinationNodes:l,interactionType:n,stateManagementVersion:c,selectedInteractions:u.selectedInteractions,actionIndexPath:u.actionIndexPath,onDrop:u.onDrop,onSelect:u.onSelect,onExpand:u.onExpand,onNewActionAdded:u.onNewActionAdded,selectedActionIndex:u.selectedActionIndex,expandedRows:u.expandedRows,autoOpenVariablePicker:d,handleMouseDownUI3:u.handleMouseDownUI3})),w&&o.createElement("div",{className:S.cx.ml0.$},o.createElement(de,{onChange:Z,nodeId:e.transitionNodeID||o6.Hr,recordingKey:tJ.Pt(t,"consumption"),actionIndexPath:u.actionIndexPath})),F&&o.createElement(o.Fragment,null,h&&o.createElement("div",{className:s5.x}),o.createElement(cz.X7,{transition:z,interactionType:n,navigationType:e.navigationType,recordingKey:tJ.Pt(t,"animationPanel"),updateSelectionProperties:s,isNarrowPanel:u.isNestedInConditional||u.isNarrowPanel,stateManagementVersion:c})),W&&!h&&el,Q&&o.createElement(o.Fragment,null,h&&o.createElement("div",{className:s5.x}),o.createElement(dg,{connectionType:e.connectionType,transition:z,navigationType:e.navigationType,recordingKey:tJ.Pt(t,"stateManagementPanel"),updateSelectionProperties:s,showPreserveScrollPosition:Y,showResetVideoState:!!$,showResetInteractiveComponentState:!!X,stateManagementVersion:c,selectedInteractions:u.selectedInteractions})))}var dR=n(584999),dM=n(323110),dL=n(482725);let dV=Symbol("ACTION_ROW");function dK({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:a,selectedInteractions:l,autoOpenVariablePicker:i,autoOpenExpressionBuilder:s,setAutoOpenExpressionBuilder:c,...d}){let p=(0,r.wA)(),{shouldShowAdvancedPrototypingPaywall:m,showAdvancedPrototypingVariablesModal:u,showAdvancedPrototypingConditionalActionsModal:E}=(0,rX.zt)(),y=(0,nK.Um)(),_=(0,rX.hP)(),{firstVariableSetMode:g,firstVariableSetID:h}=cS(),f=d.action,b=d.isNestedInConditional&&(0,cY.qQ)(d.action),S=!!f.connectionType&&"CONDITIONAL"===f.connectionType,N=(0,em.GS)(),I=(0,rX.YT)(),P=I===rX.Oz.SINGLE_COL,C=I===rX.Oz.TWO_COL,A=o.useContext(s4.c),k=C&&A===s4.P.RIGHT,w=C&&A===s4.P.LEFT,O=!((0,tU.gl)(d.action)||["CLOSE","NONE"].includes(f.connectionType))&&!N;var x=d.selectedActionIndex.equals(d.actionIndexPath);let D=1===d.selectedActionIndex.path.length&&d.isNestedInConditional&&d.actionIndexPath[0]===d.selectedActionIndex.path[0];var R=void 0===d.expandedRows||void 0!==d.expandedRows.find(e=>e.equals(d.actionIndexPath));N&&(R=!!P||!w||S);let M=o.useCallback(()=>{(O||P)&&d.onExpand(d.actionIndexPath)},[O,P,d]),[L,V]=o.useState(!1);o.useEffect(()=>{if(S){let e=setTimeout(()=>{V(!0)},0);return()=>clearTimeout(e)}V(!0)},[S]);let K=S&&!R,U=S&&R,F=o.useRef(null),[B,G]=(0,v.fp)(rX.hV),{position:z,dragItem:Y}=(0,sz.h4)(()=>({type:dV,element:F,item:d.action,dropPositionThreshold:U?.2:K?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!w||!R,onDrop(e){d.onDrop(e),G(!0)}})),W=o.useMemo(()=>{let e=F.current;if(!e||!z||k)return;if(Y&&"CONDITIONAL"===Y.connectionType&&d.isNestedInConditional||(0,cY.qQ)(Y)){G(!1);return}let t=b?sz.Nz.BEFORE:z;var n=void 0;let a=e.offsetParent?.firstElementChild?.scrollTop??0;return t===sz.Nz.BEFORE?n=e.offsetTop-a:t===sz.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-a),G(!0),n},[z,k,Y,d.isNestedInConditional,b,G]),H=z&&S&&!R&&z===sz.Nz.INSIDE&&"CONDITIONAL"!==Y.connectionType,$=tJ.rf(d.recordingKey,"mousedown",e=>{R||(x=!0,d.onSelect(d.actionIndexPath,!0))}),X=tJ.rf(d.recordingKey,"mousedown",e=>{x=!1,d.onSelect(d.actionIndexPath,!1)}),Q=tJ.rf(d.recordingKey,"click",e=>{d.onSelect(d.actionIndexPath,!0)}),J=tJ.rf(d.recordingKey,"mousedown",e=>{(0,cY.qQ)(d.action)||d.onSelect(d.actionIndexPath,!0)}),j=e=>{var n=!0,a=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":m?(n=!1,u()):(t({connectionType:"SET_VARIABLE"}),i.current=!0);break;case"SET_VARIABLE_MODE":m?(n=!1,u()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:h,targetVariableModeID:g});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":a=!0,m?(n=!1,E()):(t({connectionType:"CONDITIONAL"}),N&&c&&c(!0))}if(N||R||M(),C&&d.onExpand(d.actionIndexPath,a),n){let t=l.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>rR.d({nodeID:e.sourceNodeID,interactionID:e.id}));p((0,o9._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},q=d.isNestedInConditional?s5.It:s5.ft,Z=eA()({[s5.wu]:!w,[s5.zX]:w&&B}),ee=o.createElement(np.U,{svg:dM.A},o.createElement(s$,{className:s5._2}));if(b&&d.onAddAction)return o.createElement("div",{className:w?s5.LW:void 0},W&&o.createElement("hr",{className:q,style:{transform:`translateY(${W}px)`}}),w&&d.isNestedInConditional&&ee,o.createElement("div",{className:Z,ref:F},o.createElement(cX,{addButtonPressed:d.onAddAction,recordingKey:tJ.Pt(d.recordingKey,"addAction"),isNestedInConditional:!0})));let et=(0,rV._X)(f),en="NONE"!==et,ea=(R||!en)&&!w,eo=d.numActions>1,er=(d.numActions>1||d.isNestedInConditional)&&!w,el=eA()({[s5.$l]:!0,[s5.KY]:w&&!d.isNestedInConditional,[s5.Iw]:w&&!d.isNestedInConditional&&B,[s5.DM]:w&&d.isNestedInConditional,[s5.vs]:w&&d.isNestedInConditional&&B,[s5.M9]:w&&d.isNestedInConditional&&D&&B,[s5.I_]:w&&S&&!x&&B,[s5.Cu]:x&&!N,[s5.PE]:x&&w&&!d.isNestedInConditional,[s5.Ze]:H,[s5.Op]:d.isNestedInConditional&&!N}),ei=eA()({[s5.rn]:!0,[s5.Gu]:w,[s5.Ti]:d.isNestedInConditional&&!N&&!k,[s5.Yo]:d.isNestedInConditional&&N&&!k}),es=o.createElement(rL.B,{key:"expand-caret",className:s5.GE,svg:R?nb.A:nS.A,recordingKey:tJ.Pt(d.recordingKey,"expandCaret"),onClick:M}),ec=o.createElement(ct,{action:f,isNestedInConditional:d.isNestedInConditional,isNarrowPanel:d.isNarrowPanel&&eo,onClick:N?Q:void 0}),ed=o.createElement(sZ,{className:"NONE"===et||N?void 0:dR.fH,dispatch:p,dropdownShown:y,onChange:j,action:et,recordingKey:tJ.Pt(d.recordingKey,"actionDropdown"),showVideoActions:_,isNestedInConditional:d.isNestedInConditional}),ep=o.createElement(na.K0,{className:N?s5.gG:s5.hH,onClick:n,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.delete"),"aria-label":(0,T.t)("proto.prototype_panel.delete"),recordingKey:tJ.Pt(d.recordingKey,"actionDeleteButton")},o.createElement(np.U,{svg:dL.A},o.createElement(rO.O,null))),eu=o.createElement(na.fI,{className:ei,onDoubleClick:M},O&&es,ea?o.createElement("span",{className:s5.P2},ed):ec,er&&ep),eE=ea?ed:ec,ey=o.createElement(rM.D8,{className:ei,onDoubleClick:M},O&&es,er?o.createElement(aI.DE,{appendedClassName:s5.Jw,label:null,input:eE,icon:ep}):o.createElement(aI.Ad,{appendedClassName:s5.Jw,label:null,input:eE})),e_=(0,T.tx)("proto.action"),eg=o.createElement(rM.D8,{className:ei},P||k?o.createElement(oB.cS,{label:e_,input:eE}):eE),eh=N?eg:ey,ev=eA()({[s5.Oe]:!0,[s5.h2]:x,[s5.Ob]:S});return o.createElement("div",{className:el,ref:F,role:"button",tabIndex:0,onMouseDown:N?void 0:$,onMouseUp:N?void 0:X},void 0!==W&&o.createElement("hr",{className:q,style:{transform:`translateY(${W}px)`}}),w?o.createElement("div",{className:ev,role:"button",tabIndex:0,onMouseDown:N?J:void 0},d.isNestedInConditional&&ee,eh):N?eh:eu,R&&L&&o.createElement(dD,{updateMultipleDestinationNodes:e,action:f,onActionChange:j,recordingKey:d.recordingKey,updateSelectionProperties:t,interactionType:d.interactionType,stateManagementVersion:a,selectedInteractions:l,isNestedInConditional:d.isNestedInConditional,isNarrowPanel:d.isNarrowPanel,actionIndexPath:d.actionIndexPath,onDrop:d.onDrop,onSelect:d.onSelect,onExpand:d.onExpand,onNewActionAdded:d.onNewActionAdded,selectedActionIndex:d.selectedActionIndex,expandedRows:d.expandedRows,autoOpenVariablePicker:i,autoOpenExpressionBuilder:s,setAutoOpenExpressionBuilder:c,handleMouseDownUI3:J}))}var dU=n(427113),dF=n(682331);function dB({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:a}){let r;let l=(0,rQ._i)(t?.keyCodes),i=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[s,c]=o.useState(!1),d=o.useRef(null);o.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&d.current&&(a(!1),d.current.focus(),c(!0))},[a,n,t]),o.useEffect(()=>{if(!s)return()=>{};let t=new dF.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,s]);let p=null,m=(0,rQ.E8)(t),u=(0,em.GS)();return s?r=o.createElement(dG,null,u?(0,T.tx)("proto.keyCapture.press_key_lowercase"):(0,T.tx)("proto.keyCapture.press_key")):t?.triggerDevice==="KEYBOARD"&&l?p=(0,rQ.U8)(l):m?p=m:r=o.createElement(dG,null,u?(0,T.tx)("proto.keyCapture.click_to_set_key"):(0,T.tx)("proto.keyCapture.click_to_select")),o.createElement(na.rp,{ref:d,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":nm.Ib.TEXT,"data-tooltip":p&&p.length>10?p:null,onFocus:()=>c(!0),onBlur:()=>c(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!rQ.RI.has(t)&&rQ.pu[t]&&(t===l?.keyCode&&e.repeat?i((0,rQ.wb)({keyCode:t,metaKey:e.metaKey||l.metaKey,shiftKey:e.shiftKey||l.shiftKey,ctrlKey:e.ctrlKey||l.ctrlKey,altKey:e.altKey||l.altKey})):i((0,rQ.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture"},p??r)}function dG({children:e}){return o.createElement("span",{className:"prototype_key_capture_field--placeholder--gWUKF"},e)}class dz extends oF.l6{}class dY extends oF.c${}let dW=new rV.VG,dH=new rV.EX,d$=new rV.JV,dX=new rV.Eq;function dQ(e){let t=(0,r.wA)(),n=(0,nK.Um)(),a=(0,em.GS)(),l=(0,o7.cJ)(),{showVideoV2Triggers:s}=(0,lU.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===i.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,rK.dq)(e.mirror.selectionProperties)})),c=(0,v.md)(rU.NE),d=(t,n)=>{let r=o.createElement("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby"},(0,rK.e7)(t));return o.createElement(dY,{key:n,value:t,icon:a?r:void 0,recordingKey:tJ.Pt(e,t),disabled:!function(t){if("NONE"===t)return!0;let n=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&o6.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,tU.hS)(e.property),a=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,tU.hS)(e.property)&&e.property!==t;return(!n&&!a||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?s:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t)})},p=(l?[]:["NONE"]).map(d),m=["ON_CLICK",...l?[]:["DRAG"],"ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(d),u=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(d),E=(l?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(d),y=["AFTER_TIMEOUT"].map(d),_=c?"ON_MEDIA_HIT"!==e.property?dH:dX:"ON_MEDIA_HIT"!==e.property?dW:d$,g=o.useCallback(e=>e-24,[]),h=(0,tU.E7)(e.property);return o.createElement(dz,{id:"interaction-type-select",className:e.className,chevronClassName:"transition_interaction_dropdown--chevron--pyzhq",dataTestId:"interaction-select",property:e.property,formatter:_,icon:a&&h?(0,rK.e7)(h):void 0,onChange:e.onChange,dispatch:t,dropdownShown:n,recordingKey:tJ.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,t_.nl)(),dropdownAlignment:g,dropdownWidth:160},p,!l&&o.createElement(oF.sK,null),m,o.createElement(oF.sK,null),u,!l&&o.createElement(oF.sK,null),y,!l&&s&&[o.createElement(oF.sK,{key:""}),...E])}let dJ={keyCodes:[],triggerDevice:"KEYBOARD"};function dj(e,t,n,a){return n?o.createElement(oB.cS,{label:e,input:t,appendedClassName:a?void 0:s5.dU}):o.createElement(na.fI,null,t)}function dq(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:a}=(0,rJ.Ay)(e.category),{interactionType:l="NONE",transitionTimeout:i=.8,mediaHitTime:s=0,interactionMaintained:c=!1,interactionDuration:d=.3,keyTrigger:p=dJ}=t.interactionEvent,m=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,tU.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},u=void 0!==t.interactionActions.find(e=>m(e,"URL")),E=void 0!==t.interactionActions.find(e=>m(e,"UPDATE_MEDIA_RUNTIME")),y=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,_=void 0!==t.interactionActions.find(e=>m(e,"CONDITIONAL"));return function(e){let t=(0,r.wA)(),n=e.updateSelectionProperties,a=(0,tb.RU)(),[l,i]=o.useState(!1),s=(0,em.GS)(),c=(0,rX.YT)(),d=c===rX.Oz.SINGLE_COL,p=c===rX.Oz.TWO_COL,m=!0===(0,tU.E7)(e.maintained),u=(0,tU.E7)(e.keyTrigger),E="ON_KEY_DOWN"===(0,tU.E7)(e.interactionType),y="AFTER_TIMEOUT"===(0,tU.E7)(e.interactionType),_="ON_MEDIA_HIT"===(0,tU.E7)(e.interactionType),g=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,tU.E7)(e.interactionType)||"")>-1,h=o.createElement(dQ,{className:s5.sQ,property:e.interactionType,onChange:a=>{sG.sn.start("interaction_details_changed"),n({interactionType:a}),t((0,o9._P)({name:"Prototype Interaction Type Changed",params:{newType:a,oldType:(0,tU._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===a&&i(!0)},interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,recordingKey:tJ.Pt(e,"interactionDropdown"),interactionsOnSelectedNodes:e.interactionsOnSelectedNodes}),v=s?d?o.createElement(oB.cS,{label:(0,T.tx)("proto.trigger"),input:h}):o.createElement("div",{className:s5.BX},h):o.createElement(na.fI,{className:eA()(s5.SG,s5.QT)},h,o.createElement("div",{className:s5.LY},e.headerButtons)),f=o.createElement(o.Fragment,null,y&&dj((0,T.tx)("proto.delay"),o.createElement(a7.W4,{className:s?s5.Lp:s5.Zp,inputClassName:s?s5.Gl:void 0,dataTestId:"timeout-input",dispatch:t,value:e.timeout,onValueChange:e=>{n({transitionTimeout:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:20,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:tJ.Pt(e,"timeoutInput")},s?o.createElement(dU.A,null):void 0),s,d),E&&dj((0,T.tx)("proto.key"),o.createElement(dB,{onChange:e=>{n({keyTrigger:e})},value:u,shouldFocusKeyCaptureField:l,setShouldFocusKeyCaptureField:i}),s,d),_&&dj((0,T.tx)("proto.time"),o.createElement(a7.qd,{displayFractions:!0,className:s5.Ym,inputClassName:s5.vE,dataTestId:"mediaHitTime-input",dispatch:t,value:e.mediaHitTime,onValueChange:e=>{n({mediaHitTime:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:3600,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.video_hit_time"),tooltipForScreenReadersOnly:!0,recordingKey:tJ.Pt(e,"mediaHitTimeInput")},s?o.createElement(dC,null):void 0),s,d),g&&dj((0,T.tx)("proto.delay"),o.createElement(a7.W4,{className:s?s5.Lp:s5.aq,inputClassName:s?s5.Gl:s5.p0,dataTestId:"duration-input",dispatch:t,value:m?e.interactionDuration:void 0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},min:0,allowEmpty:!0,placeholder:(0,T.t)("proto.trigger.add_delay_placeholder"),wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,"data-tooltip-type":nm.Ib.TEXT,"data-tooltip":(0,T.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:tJ.Pt(e,"delayInput")},s?o.createElement(dU.A,null):void 0),s,d));return s?o.createElement("div",{className:p?s5.eU:void 0},v,f):o.createElement("div",{className:s5.cF},v,f)}({...e,updateSelectionProperties:a,interactionType:l,interactionContainsOpenLinkAction:u,interactionContainsUpdateMediaRuntime:E,interactionOnlyContainsBack:y,interactionContainsConditionalAction:_,timeout:i,maintained:c,interactionDuration:d,mediaHitTime:s,keyTrigger:p,interactionsOnSelectedNodes:n,recordingKey:tJ.Pt(e.recordingKey,rX.Qe)})}let dZ="prototype_interaction_edit_modal--contentContainer--bo2b4",d0="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",d1="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",d2="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",d4="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8";function d8(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:a,differentLengthActions:r,mergedActions:l}=(0,rJ.Ay)(e.category),i="NONE"!==(0,tU.E7)(e.interactionType),s=void 0!==l.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:c,onSelect:d}=e,p=(0,em.GS)(),m=(0,rX.YT)(),u=m===rX.Oz.SINGLE_COL,E=m===rX.Oz.TWO_COL,{expandedRows:y,setExpandedRows:_,deleteButtonPressed:g,newActionIndexPath:h,resetNewActionIndexPath:v}=e;o.useEffect(()=>{h&&!h?.equals([])&&(p?d(h.path,!0):(_([...y,h]),d([],!1)),v())},[y,_,h,v,d,p]);let f=o.useCallback(e=>{y.find(t=>t.equals(e))?_(y.filter(t=>!t.equals(e))):_([...y,new cY.Op(e)])},[y,_]),b=o.useCallback(n=>{var a=n.dropItem;if((0,tU.gl)(a)||(0,cY.qQ)(n.dragItem))return;let o=e.interactionsOnSelectedNodes;if(!o||!t)return;for(var r=0;r<t?.length;r++){let e=t[r];if(e&&e.actions){let o=e.actions,l=(0,cY.Vp)(o,c,y,a,n.position);if(l.newSelectedActionIndex&&E&&d(l.newSelectedActionIndex.path,!0),l.newActions&&(t[r].actions=l.newActions,p||d([],!1)),l.newExpandedRows){if(E){let e=[];l.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new cY.Op([n]))}),_(e)}else _(l.newExpandedRows)}}}let l=o.map(e=>t.find(t=>t.id===e.id)??e);t3.Y5.updateSelectionProperties({prototypeInteractions:l})},[y,_,e.interactionsOnSelectedNodes,c,t,d,p,E]),S=eA()({"prototype_interaction_edit_modal--panelUI3--WK3CN":p,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":E});return o.createElement(sz.hh,null,o.createElement(na.Zk,{className:S},e.shouldHideTitle?null:o.createElement(na.fI,null,o.createElement(na.U8,{title:(0,T.t)("proto.interaction.interaction"),dataTooltipContentKey:sH,dataTooltipTimeoutDelay:50})),o.createElement("div",null,(i||p)&&o.createElement(o.Fragment,null,u&&o.createElement(o.Fragment,null,o.createElement(dq,{category:e.category,recordingKey:rX.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})),r&&o.createElement(sY.Y,{direction:"horizontal",padding:{horizontal:16,vertical:12}},o.createElement(na.UZ,null,(0,T.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!r&&o.createElement(o.Fragment,null,l?.map((r,i)=>o.createElement(dK,{key:i,updateMultipleDestinationNodes:a(i),action:r,recordingKey:tJ.Pt(e.recordingKey,rX.eG,i),updateSelectionProperties:n(i),onDeleteAction:()=>g(i),interactionType:e.interactionType,actionIndexPath:[i],numActions:l.length,isNestedInConditional:!1,isNarrowPanel:!s,stateManagementVersion:e.stateManagementVersion,selectedInteractions:t,onDrop:b,onSelect:e.onSelect,onExpand:f,selectedActionIndex:c,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:y,onNewActionAdded:e.onNewActionAdded,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder})))))))}function d3({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:a,selectedInteractions:l}){let i=(0,r.wA)(),s=(0,em.GS)(),c=(0,rX.YT)()===rX.Oz.SINGLE_COL,p=()=>{for(let t of(ek.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:l.length,preserve_scroll_position_value:!!e.preserveScroll}),l))(0,rX.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&du.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,tU.hS)(e.preserveScroll)&&(0,tU.hS)(a)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),i(d.F.enqueue({type:"state-management-updated",message:(0,T.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,T.t)("proto.state_management.visual_bell_update_all"),action:()=>{t3.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),i(d.F.enqueue({type:"state-management-updated-all",message:(0,T.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},m=()=>{ek.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:l.length}),n({stateManagementVersion:0})},E=1===a?o.createElement(aT.$n,{variant:"link",recordingKey:tJ.Pt(t,"revert-state-management-version"),onClick:m,htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,T.tx)("proto.state_management.revert_controls")):o.createElement(aT.$n,{variant:"secondary",recordingKey:tJ.Pt(t,"update-state-management-version"),onClick:p},(0,T.tx)("proto.state_management.update_controls")),y=c?aT.IK:aT.$n,_=1===a?o.createElement(y,{variant:"secondary",onClick:m,recordingKey:tJ.Pt(t,"revert-state-management-version"),htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,T.tx)("proto.state_management.revert_controls")):o.createElement(y,{variant:"primary",onClick:p,recordingKey:tJ.Pt(t,"update-state-management-version")},(0,T.tx)("proto.state_management.update_controls")),g=1===a?(0,T.tx)("proto.state_management.new_controls"):(0,T.tx)("proto.state_management.old_controls"),h=o.createElement(u.N,{trusted:!0,newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295"},s?(0,T.tx)("proto.state_management.controls_help_link_new"):(0,T.tx)("proto.state_management.controls_help_link")),v=o.createElement("div",{className:"prototype_state_management_version_panel--versionControls--siAOf"},o.createElement(na.JU,{className:"prototype_state_management_version_panel--label--vvYMX"},g,h),o.createElement("div",{className:"prototype_state_management_version_panel--buttonContainer--rJZ-y"},E)),f=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG"},o.createElement(oD.J,null,g),o.createElement(oD.J,null,h),_),b=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u"},o.createElement("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A"},o.createElement(oD.J,null,g)),o.createElement("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC"},h),_);return o.createElement(tZ.k,{name:"prototype_state_management_version_panel"},o.createElement(na.Zk,{className:s?"prototype_state_management_version_panel--panelUI3--8-Db5":void 0},s?c?f:b:v))}let d5="created_noodle";function d7(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:a}=e,r=(0,rX.YT)()===rX.Oz.TWO_COL,{detailProps:l,detailPropsMultipleActions:i,interactionsOnSelectedNodesAndComponents:s,updateSelectionProperties:c,selectedInteractions:d}=(0,rJ.Ay)(e.category);(0,ew.h)(()=>{if(void 0!==sG.sn.get(d5)){let e=sG.sn.stop(d5);(0,ek.sx)(d5,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:p,transition:m}=(0,rX.n6)(l,i,d),{interactionType:u="NONE",interactionMaintained:E=!1,interactionDuration:y=.3,keyTrigger:_=dJ,transitionTimeout:g=.8,mediaHitTime:h=0}=i.interactionEvent,v=(0,rX.iC)(d),f=o.createElement(d8,{interactionType:u,timeout:g,mediaHitTime:h,maintained:E,interactionDuration:y,keyTrigger:_,recordingKey:tJ.Pt(e,rX.Qe),shouldHideTitle:t,interactionsOnSelectedNodes:s,category:n,stateManagementVersion:v,autoOpenVariablePicker:e.autoOpenVariablePicker,newActionIndexPath:a,resetNewActionIndexPath:e.resetNewActionIndexPath,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,selectedActionIndex:e.selectedActionIndex,expandedRows:e.expandedRows,setExpandedRows:e.setExpandedRows,deleteButtonPressed:e.deleteButtonPressed,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder});return o.createElement("div",null,f,!r&&p&&o.createElement(d3,{transition:m,recordingKey:tJ.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:c,stateManagementVersion:v,selectedInteractions:d}))}var d6=n(360803),d9=n(102165);function pe(e,t,n){let[a,o,r]=e.path,l=t[a].conditionalActions;if((0,tU.hS)(l)){let e=l?.[o].actions?.length??0;if(r>=e){if(0===e){n([a],!0);return}n([a,o,r-1],!0);return}}}function pt(e,t,n){let a=e.path[0]>=t.length,o=0===e.path.length;if(a){n([t.length-1],!0);return}if(o){n([0],!0);return}}var pn=n(277687);let pa=()=>{i.glU.setSelectedInteractions([]),(0,s.kc)().prototype_ai_magic_link_show_suggestion_toast&&t3.Y5.showMagicLinkSuggestedVisualBell("create_node_transition"),t3.Y5.deselectProperty()},po=(0,nA.jz)("197px"),pr=(0,nA.c8)("50%");function pl(e){var t;return e&&a?.height<369?a=t={...a,height:369}:a??={width:440,height:e?369:320,leftWidthPct:45}}let pi=o.memo(function(){let e=(0,r.d4)(pp),t=(0,rJ.HS)(),{selectedInteractions:n}=(0,rJ.Ay)(t),a=n.length>0,[l,i]=o.useState(!1),s=tJ.v_(rX.dJ,"keydown",t=>"Shift"!==t.key?tJ.aH:(i(!0),e&&a)?void 0:tJ.aH),c=tJ.v_(rX.dJ,"keyup",t=>"Shift"!==t.key?tJ.aH:(i(!1),e&&a)?void 0:tJ.aH);if(o.useEffect(()=>(document.addEventListener("keydown",s),document.addEventListener("keyup",c),()=>{document.removeEventListener("keydown",s),document.removeEventListener("keyup",c)}),[s,c]),!e||!a)return null;let d=n.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return o.createElement(ps,{category:t,containsConditional:d,pressingShiftKey:l,initialX:e.initialX,initialY:e.initialY,shouldPin:e.shouldPin,setPressingShiftKey:i})}),ps=o.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:l,initialY:s,shouldPin:c,setPressingShiftKey:d}){let p=(0,r.wA)(),[m,u]=o.useState(!1),[,E]=(0,v.fp)(d9.x),y=(0,o.useRef)(null),[_,g]=o.useState(!1),h=c||m,f=(0,em.GS)(),b=(0,rX.YT)(),S=b===rX.Oz.SINGLE_COL,N=b===rX.Oz.TWO_COL,[I,P]=o.useState(new cY.Op(f?[0]:[])),{selectedInteractions:C,differentLengthActions:A,interactionsOnSelectedNodesAndComponents:k,mergedActions:w,detailProps:O,detailPropsMultipleActions:x,updateSelectionProperties:D}=(0,rJ.Ay)(e);var R=I.path.length>0?I:new cY.Op([0]);let M=R.isConditional(),L=(e,t)=>R=new cY.Op(e);f&&R.path[0]>=w.length&&!M?pt(I,w,L):f&&M&&pe(I,w,L);let V=o.useCallback((e,t)=>{t?P(new cY.Op(e)):P(new cY.Op([]))},[]);o.useEffect(()=>{if((0,sK.vA)(w.length>0,"the interactions panel should always have actions if rendered"),!f)return;let e=I.isConditional();if(e){if(e){pe(I,w,V);return}}else{pt(I,w,V);return}},[w,I,f,V]);let{shouldShowAdvancedPrototypingPaywall:K,showAdvancedPrototypinglMultipleActionsModal:B}=(0,rX.zt)(),{showPanel:G,transition:z}=(0,rX.n6)(O,x,C),Y=(0,rX.iC)(C);var W=[];N?w.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&W.push(new cY.Op([t]))}):w.length<4&&w.forEach((e,t)=>{W.push(new cY.Op([t]))});let[H,$]=o.useState(W),X=o.useRef(null),Q=n&&!h&&!_,J=(0,nA.jz)(lt.prototypeInteractionModalWidth),j=(0,nA.jz)(lt.prototypeInteractionModalExpandedWidth),q=pl(G).width,Z=t?j:J;N&&(Z=q);let[ee,et]=o.useState(c),en=(0,sF._X)({subscribeToUpdates_expensive:!c}),ea=o.useCallback(()=>{m||(p((0,o9._P)({name:"prototype_interaction_details_modal_dragged"})),u(!0))},[p,m,u]),eo=o.useMemo(()=>{let e=new oM.Mi(l,s);if(c)return N?new oM.Mi(e.x-(q-J),e.y):t?new oM.Mi(e.x-(j-J),e.y):e;{let t=(0,sF.$g)(en,e);return new oM.Mi(t.x-Z/2,t.y+30)}},[Z,l,s,t,c,en,N,j,J,q]);o.useEffect(()=>{if(!n)return;let e=e=>{!e.shiftKey&&n&&d(!1)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n,d]),o.useEffect(()=>{E(Q)},[E,Q]),o.useEffect(()=>{et(c)},[c]),o.useEffect(()=>()=>{p((0,o9._P)({name:"prototype_interaction_details_modal_closed"}))},[p]);let er=o.useRef(null),[el,ei]=o.useState(!1);o.useEffect(()=>{el&&(ei(!1),er.current?.scrollToBottom())},[el,ei,er]);let[es,ec]=o.useState(new cY.Op([])),ed=(0,F.q5)(),ep=o.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case t9.zy.COPY:case t9.zy.CUT:{let a=JSON.parse(JSON.stringify(C)),o=(0,d6.l)(a),r=ih.fG(ed?.key||null,{prototypeInteractions:o});if(ih.C4(n,r,""),t===t9.zy.CUT){let e=[];for(let t of C){let{sourceNodeID:n,id:a}=t;n&&a&&e.push(rR.d({nodeID:n,interactionID:a}))}tH.l7.user("delete-prototype-interactions",()=>i.glU.deleteInteractions(e)),t3.Y5.deselectProperty()}e.accept()}}},[ed?.key,C]),eu=o.useRef(!1),[eE,ey]=o.useState(!1),{firstVariableSetMode:e_,firstVariableSetID:eg}=cS(),eh=(0,U.p8)("currentPage"),ev=o.useCallback((e,t,n,a)=>{p((0,o9._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:a}}))},[p]),ef=o.useCallback(e=>{if(k&&C){var t=!1,n=!1;if(K)B();else{for(let r=0;r<C?.length;r++){let l=C[r],i=[];if(l&&l.actions){var a=0,o=[];for(let r=0;r<l.actions.length;r++){let s=l.actions[r];if(r!==e)void 0!==H.find(e=>e.equals([r]))&&o.push(new cY.Op([a])),i.push(s),a++;else{let e=l.id?l.id:o6.Hr;ev(s.connectionType?s.connectionType:"NONE",(0,o6.dI)(e),eh),r===l.actions.length-1&&(t=!0),2===l.actions.length&&(n=!0)}$(o)}C[r].actions=i}}let r=k.map(e=>C.find(t=>t.id===e.id)??e);t3.Y5.updateSelectionProperties({prototypeInteractions:r}),n&&f&&$([new cY.Op([0])]),t&&N&&P(new cY.Op([e-1]))}}},[k,C,K,B,H,eh,ev,N,f]),eb=o.useCallback(e=>{if(!k||!C||!e.path.length||void 0===e.path[0])return;let[t,n,a]=e.path,o=e.isConditional();if(K)B();else if(o){let e=!1,o=!1,r=C.map(r=>{let l=r.actions;if(!l)return r;let i=l.map((l,i)=>{if(i!==t||"CONDITIONAL"!==l.connectionType)return l;let s=l.conditionalActions;if(!s)return l;let c=s.map((t,l)=>{if(l!==n)return t;let i=t.actions;if(!i)return t;let s=i[a];s&&ev(s.connectionType?s.connectionType:"NONE",(0,o6.dI)(r.id??o6.Hr),eh,!0);let c=i.filter((e,t)=>t!==a);return e=a===i.length-1,o=0===c.length,{...t,actions:c}});return{...l,conditionalActions:c}});return{...r,actions:i}}),l=k.map(e=>r.find(t=>t.id===e.id)??e);t3.Y5.updateSelectionProperties({prototypeInteractions:l}),o?P(new cY.Op([t])):!o&&e&&P(new cY.Op([t,n,a-1]))}else ef(t);document.activeElement?.blur()},[k,C,K,B,ef,eh,ev]),eS=o.createElement(sU.P,{className:N?"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":dZ,useBottomPinning:!N,ref:er,allowScrollAndZoomOver:!0,"data-not-draggable":!0},o.createElement(d7,{shouldHideTitle:!0,recordingKey:N?tJ.Pt("leftCol",rX.dJ):rX.dJ,category:e,autoOpenVariablePicker:eu,newActionIndexPath:es,resetNewActionIndexPath:()=>{ec(new cY.Op([]))},onNewActionAdded:e=>{ec(e)},selectedActionIndex:I,onSelect:V,expandedRows:H,setExpandedRows:$,deleteButtonPressed:ef,autoOpenExpressionBuilder:eE,setAutoOpenExpressionBuilder:ey})),eT=1===C.length,eN=C[0],eI=eN.actions&&eN.actions.length<2,eP=eN.actions&&1===eN.actions.length&&eN.actions[0],eC=!eP||"NONE"===eP.connectionType,ek=eT&&eI&&eC;var ew=o6.Hr;let eO=o.createElement(cX,{skipPaywall:ek,addButtonPressed:e=>{if(!C)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&K){B();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=eg,e.targetVariableModeID=e_),"SET_VARIABLE"===e.connectionType&&eu&&(eu.current=!0),f&&"CONDITIONAL"===e.connectionType&&ey(!0);let t=!1;var n=null,a=f&&!A&&!ek&&C[0].actions&&1===C[0].actions.length;if(A||ek)for(var o=0;o<C.length;o++){let t=C[o];t.actions=[e];let n=t.id,a=t.sourceNodeID;(0,rX.uU)(t.stateManagementVersion)&&n&&a&&du.zZ.recordInteractionUpgraded(n,a),t.stateManagementVersion=1}else for(var o=0;o<C.length;o++){let a=C[o];if(a.actions){if((0,rX.uU)(a.stateManagementVersion)&&(a.id&&a.sourceNodeID&&du.zZ.recordInteractionUpgraded(a.id,a.sourceNodeID),a.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),N){if(I.isConditional()){let n=I.path[0],o=I.path[1],r=I.path[2],l=a.actions?.[n],i=l.conditionalActions?.[o].actions?.length??0;n===a.actions.length-1&&r===i-1&&(t=!0),l.conditionalActions?.[o].actions?.splice(r+1,0,e)}else{let n=I.path[0]+1;n===a.actions.length&&(t=!0),a.actions?.splice(n,0,e)}}else a.actions?.push(e);ew=a.id?a.id:o6.Hr}else a.actions=[e],ew=a.id?a.id:o6.Hr;if(a.stateManagementVersion=1,N){let e=[...I.path];e[e.length-1]+=1,n=new cY.Op([...e])}else n=new cY.Op([a.actions.length-1])}let r=k.map(e=>C.find(t=>t.id===e.id)??e);if(t3.Y5.updateSelectionProperties({prototypeInteractions:r}),a||N){var l=[];r[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&l.push(new cY.Op([t]))}),$(l)}ei&&(!N||t)&&ei(!0),ec&&ec(n),p((0,o9._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,o6.dI)(ew),page_id:eh}}))},renderButton:!0,recordingKey:rX.dJ,isNestedInConditional:N&&I.isConditional()}),ex=C.some(e=>void 0!==e.actions&&e.actions?.length>1),eD=!I.isConditional()&&!ex,eR=o.createElement(nl.K,{onClick:()=>eb(I),"aria-label":(0,T.t)("proto.prototype_panel.delete"),disabled:eD,recordingKey:tJ.Pt(rX.dJ,"actionDeleteButton"),htmlAttributes:{"data-tooltip":(0,T.t)("proto.prototype_panel.delete"),"data-tooltip-type":nm.Ib.TEXT}},o.createElement(np.U,{svg:dL.A},o.createElement(rO.O,null))),eM=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM"},eO," ",eR),eL=o.createElement(s4.c.Provider,{value:s4.P.LEFT},o.createElement("div",{className:N?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--16pLu":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG",ref:X,style:N?{width:`${pl(G).leftWidthPct}%`}:void 0},o.createElement(dq,{category:e,recordingKey:rX.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:d2}),eS,o.createElement("div",{className:d2}),o.createElement(o.Fragment,null,eM))),eV=w.length>0?o.createElement(s4.c.Provider,{value:s4.P.RIGHT},o.createElement(sU.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:N?"prototype_interaction_edit_modal--ui3ScrollContainerRight--LJr-n":void 0},o.createElement(pc,{selectedActionIndex:R,handleExpandUI3:(e,t)=>{!t&&w.length>1?$(H.filter(t=>!t.equals(e))):H.find(t=>t.equals(e))||$([...H,new cY.Op(e)])},autoOpenVariablePicker:eu,autoOpenExpressionBuilder:eE,setAutoOpenExpressionBuilder:ey}))):null,eK=o.useRef(po),[,eU]=(0,sL.i)({disabled:!N,onDragStart(){X.current&&(eK.current=X.current.getBoundingClientRect().width)},onDrag(e){if(X.current&&eK.current){let t=pl(G),n=eK.current+e.delta.x,o=n/t.width*100;n<po?o=po/t.width*100:o>pr&&(o=pr),X.current.style.width=`${o}%`,a={...t,leftWidthPct:o}}}}),eF=N?o.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--e8MK8"},o.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2"},eL,o.createElement("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C"},o.createElement("div",{...eU({className:"prototype_interaction_edit_modal--verticalResizeHandle--xkc8V"})})),eV),G&&o.createElement(d3,{transition:z,recordingKey:tJ.Pt(rX.dJ,"stateManagementVersionPanel"),updateSelectionProperties:D,stateManagementVersion:Y,selectedInteractions:C})):eS;return o.createElement(sB.ht.Provider,{value:o.useMemo(()=>({autoCloseOnScroll:!h}),[h])},o.createElement(nt.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:ep},o.createElement(oh.vx,{ref:y,dataTestId:"in-context-prototype-interaction-edit-modal",title:t=>o.createElement("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0"},o.createElement(pd,{category:e,recordingKey:rX.dJ,createActionTrigger:eO,closeButton:t})),containerClassName:eA()({[dZ]:!N,[d0]:N,[d1]:S,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":ee,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!ee,"prototype_interaction_edit_modal--modalExpandedWidth--IDl6k":t&&!f,"prototype_interaction_edit_modal--modalWidth--cCH7B":!t&&!f,"prototype_interaction_edit_modal--hideModal--RSp-R":Q}),contentContainerClassName:eA()({[dZ]:!N,[d0]:N,[d1]:S}),headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",allowWheelPassthrough:!0,initialPosition:eo,headerSize:"small",onClose:pa,recordingKey:"interactionDetailsModal",arrowPosition:c?void 0:oh.F_.TOP,arrowRelativeX:c?void 0:Z/2,onDragStart:()=>{et(!0),ea()},canRenderBelowViewport:!0,allowAutoExpanding:!0,dragHeaderOnly:!0,onFocus:()=>g(!0),allowResizeHeight:N,allowResizeWidth:N,fullFrame:N,minWidth:N?440:void 0,minHeight:N?G?369:320:void 0,maxWidth:N?800:void 0,maxHeight:N?800:void 0,initialHeight:N?pl(G).height-oh.uF:void 0,initialWidth:N?pl(G).width:void 0,onResize:N?e=>{a={...pl(G),height:e.height,width:e.width}}:void 0},f?eF:eS)))});function pc({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:r}){let l=(0,rJ.HS)(),{selectedInteractions:i,mergedActions:s,makeUpdateSelectionPropertiesForActionIndex:c,makeUpdateMultipleDestinationNodesForActionIndex:d,detailPropsMultipleActions:p}=(0,rJ.Ay)(l),m=e.path[0],u=d(m),E=c(m),y=(0,rX.iC)(i),_=p.interactionEvent.interactionType??"NONE";if(e.isConditional()){let n=e.path[1],l=e.path[2],c=s[m],d=((0,tU.hS)(c.conditionalActions)&&c.conditionalActions?c.conditionalActions:[])[n],p=d?.actions?.[l];return p?o.createElement("div",{className:d4},o.createElement(dK,{key:l,updateMultipleDestinationNodes:u.appendActionIndex(n).appendActionIndex(l),action:p,recordingKey:tJ.Pt(rX.dJ,rX.Qe,rX.eG,m),updateSelectionProperties:E.appendActionIndex(n).appendActionIndex(l),onDeleteAction:b.lQ,interactionType:_,actionIndexPath:e.path,numActions:s.length,isNestedInConditional:!0,stateManagementVersion:y,selectedInteractions:i,onDrop:b.lQ,onSelect:b.lQ,onExpand:b.lQ,selectedActionIndex:e,expandedRows:[e],autoOpenVariablePicker:t,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:r,isNarrowPanel:!0})):null}return o.createElement("div",{className:d4},o.createElement(dK,{key:m,updateMultipleDestinationNodes:u,action:s[m],recordingKey:tJ.Pt(rX.dJ,rX.Qe,rX.eG,m),updateSelectionProperties:E,onDeleteAction:b.lQ,interactionType:_,actionIndexPath:[m],numActions:s.length,isNestedInConditional:!1,stateManagementVersion:y,selectedInteractions:i,onDrop:b.lQ,onSelect:b.lQ,onExpand:n,selectedActionIndex:e,autoOpenVariablePicker:t,expandedRows:[e],autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:r,isNarrowPanel:!0}))}function pd({category:e,recordingKey:t,closeButton:n,createActionTrigger:a}){let l=(0,r.wA)(),{selectedInteractions:c}=(0,rJ.Ay)(e),d=(0,rX.YT)(),p=d===rX.Oz.TWO_COL,m=d===rX.Oz.SINGLE_COL,u=(()=>{if(1!==c.length)return 0;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return i.X3B.getMatchingInteractions(rR.d(t)).length})(),E=(0,s.kc)().prototype_hide_matching_noodles&&1===c.length&&u>1&&o.createElement(nl.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==c.length)return;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=i.X3B.getMatchingInteractions(rR.d(t));i.glU.selectInteractionsAndSourceNodes(n);let a=(0,T.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});t3.Y5.showVisualBellWithUndo("selected-matching-noodles",a,!1),l((0,o9._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,T.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:u}),htmlAttributes:{tabIndex:-1,onMouseEnter:()=>{if(1!==c.length)return;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=i.X3B.getMatchingInteractions(rR.d(t));i.glU.hoverInteractions(n)},onMouseLeave:()=>i.glU.hoverInteractions([]),"data-tooltip":(0,T.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:u}),"data-tooltip-type":nm.Ib.TEXT}},o.createElement(np.U,{svg:pn.A},o.createElement(sV.A,null))),y=o.createElement(dq,{category:e,recordingKey:t,headerButtons:o.createElement(o.Fragment,null,E,a,n)}),_=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM"},(0,T.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU"},E,n)),g=o.createElement(o.Fragment,null,(0,T.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD"},E,a,n));return p?_:m?g:y}let pp=e=>e.pickerShown?.id===rn.o$?e.pickerShown:null;var pm=n(805453),pu=n(229831),pE=n(859905),py=n(723325),p_=n(551534),pg=n(448406),ph=n(811529),pv=n(721910),pf=n(836328),pb=n(155565),pS=n(141123),pT=n(232205),pN=n(186380);function pI({asset:e}){return o.createElement(pP,{item:e},o.createElement("div",{className:"asset_shelf_suggestion--suggestion--j-USs"},o.createElement(pN.M,{className:"asset_shelf_suggestion--image--0iCDa",item:e,shouldGenerateLocalThumbnail:!0,draggable:!1})))}function pP(e){let{onInsertableResourcePointerDown:t,dragState:n}=(0,pT.j)({resource:e.item,isList:!0,sourceForTracking:"SuggestionsShelf",clickToInsert:!0,draggingThumbMaxDimensions:void 0});return o.createElement(o.Fragment,null,o.createElement(rM.GG,{onPointerDown:e=>{t(e)}},e.children),o.createElement(pS.q,{dragState:n,isList:!0}))}var pC=(e=>(e.BLACK_BLANK="40002168:784",e.BLACK_WHERE_TO="40000039:913",e.BROWN_REVISE_PROMPT="40000039:918",e.BROWN_TAB_TOGGLER="40000039:921",e))(pC||{}),pA=(e=>(e.MOBILE_DAY_PICKER="474:4773",e.MOBILE_PILL_TIME="474:4831",e.MOBILE_FLIGHT_CARD="469:2787",e.MOBILE_NOTIFICATION="475:6605",e.MOBILE_NOTIFICATION_BOOKS="2440:5914",e.MOBILE_TAB_TOGGLER="380:4294",e.MOBILE_ROME="213:2453",e.MOBILE_HILO="527:7273",e.MOBILE_DAY_VIEW="474:5088",e.MOBILE_SEARCH_INPUT_BLACK="449:9470",e.MOBILE_SEARCH_INPUT_GREEN="281:604",e.MOBILE_MEMORY_TILE_PURPLE="475:6981",e.MOBILE_LABEL_BLACK="475:6504",e.MOBILE_LABEL_GRAY="475:6503",e.MOBILE_BOTTOM_NAV_WHITE="452:10133",e))(pA||{});let pk=["449:9470","474:4773","474:4831","469:2787","475:6605","2440:5914"],pw={"40002168:784":["449:9470","380:4294","527:7273","469:2787"],"40000039:913":["380:4294","527:7273","469:2787","474:5088","475:6504"],"40000039:918":["281:604","213:2453","475:6981","475:6503"],"40000039:921":["452:10133","213:2453","469:2787"]};function pO(){let[e,t]=o.useState(!0),[n,a]=o.useState([]),[r,l]=o.useState(!1),[i,s]=o.useState(!1),c=iX.D.getState(),d=(0,iV.MH)(c),[p,m]=(0,pb.d)(),u=(0,o_.uQ)();o.useEffect(()=>{let e=()=>s(!0),t=()=>s(!1);return window.addEventListener("mousedown",e),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("mouseup",t)}},[]),o.useEffect(()=>{if(i||!d)return;if(null===u){a([]);return}let e=pw[u]||pk,t=[];e.forEach(e=>{let n=d[e];n&&n.type===p_.PW.COMPONENT&&t.push(n)}),t.length>0&&(l(!0),setTimeout(()=>{l(!1)},1e3)),a(t)},[u,i,n.length,d]);let E=()=>{t(!e)},y=o.createElement(pE.k,{className:"suggestions_shelf--downChevron--UqYHR"}),_=o.createElement(pE.k,{className:"suggestions_shelf--upChevron--vOfon suggestions_shelf--downChevron--UqYHR"}),g=n.slice(0,5).map((e,t)=>o.createElement(pI,{key:`suggestion:${t}`,asset:e,fileName:"mock",thumbLayout:pg.rp.SMALL,thumbHeight:35,thumbWidth:40,displayType:"list",sourceForTracking:"suggestionsShelf",viewMode:ph.Bk.Grid,keyboardPosition:(0,pf.pg)([pv.tM.COMPONENTS],t,1)})),h=o.createElement("button",{className:"suggestions_shelf--downChevronContainer--ogqjc",onClick:E},y),v=o.createElement("div",{className:"suggestions_shelf--shelf--F8u-q"},r&&o.createElement(aq.k,null),!r&&(n.length>0?o.createElement("div",{className:"suggestions_shelf--suggestions--0Vvhl"},g):o.createElement("div",{className:"suggestions_shelf--emptyStateText--35oDc"},(0,T.t)("asset_suggestions.suggestion_shelf_empty_state"))),o.createElement("button",{className:"suggestions_shelf--upChevronContainer--u-hlh",onClick:E},_));return o.createElement(py.dP,null,o.createElement("div",{className:"suggestions_shelf--wrapper--HTBFs"},o.createElement("div",{className:e?"suggestions_shelf--shelfContainerOpen--MRPK2 suggestions_shelf--shelfContainer--YeoLM":"suggestions_shelf--shelfContainerClosed--nNOl1 suggestions_shelf--shelfContainer--YeoLM",style:{marginLeft:p,marginRight:m}},!e&&h,e&&v)))}function px(){return(0,s.kc)().anticipation_uxr?o.createElement(pO,null):null}var pD=n(889185),pR=n(304657),pM=n(625693),pL=n(347240),pV=n(509734),pK=n(82963),pU=n(606319),pF=n(506599),pB=n(433861),pG=n(593392);let pz="offscreen_indicators--indicatorGraphicBlue---nYr-",pY="offscreen_indicators--indicatorGraphicPurple--FAz-M",pW=(0,nA.jz)(ny.J4v),pH=(0,nA.jz)(ny.v5y),p$=(0,nA.jz)(ny.M$q),pX=(0,nA.jz)(ny.y9S);function pQ(){let e=[],t=(0,lF.kl)("selectionRegions"),n=(0,tU.E7)(t);n&&(e=n);let a=(0,r.d4)(e=>e.mirror.appModel.hoveredNode);if(a&&(0,s.kc)().ce_offscreen_indicators_for_hovered_nodes){let t=(0,e4.UN)().get(a);if(t){let n=t.absoluteBoundingBox;e=[...e,{bounds:{height:n.h,width:n.w,x:n.x,y:n.y},regionType:t.isPrimaryInstance||t.isInstanceSublayer||t.isSymbolSublayer||t.isSymbolPublishable?rB.fV.SYMBOLS_ONLY:rB.fV.MIXED_OR_NO_SYMBOLS}]}}let l=!!e&&e.length>=1,i=(0,sF._X)({subscribeToUpdates_expensive:l});return i&&e?o.createElement(pJ,{viewportInfo:i,regions:e}):null}function pJ({viewportInfo:e,regions:t}){let n=(0,o.useContext)(pB.kw),a=(0,o.useMemo)(()=>n.getCommentsWrapperOffset(e),[n,e]),l=a.x,i=a.y,s={transform:`translate(${l}px, ${i}px)`},c=(0,em.GS)(),d=(0,tf.b)(),p=c&&!d,m=(0,r.d4)(e=>e.mirror?.appModel.showUi),u=(0,tb.dP)()+(p?p$:pW),E=(0,tb.qw)()+u+(p?p$:pH),y=(0,eB.Ye)(),{isPropertiesPanelCollapsed:_}=(0,pF.iT)(),g=(p&&m&&!y?u:0)-3.5,h=(p&&m&&!_?E:0)-7,v=(0,er.J2)((0,tb.UK)().renderRulers)&&m?pX:0,f={x:g+v,y:-3.5+v,width:e.width-h-v,height:e.height- -7-v},b={x:g+v,y:-3.5+v,width:e.width-h-v,height:e.height- -7-v};return o.createElement(o.Fragment,null,o.createElement(pG.p,null,o.createElement("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:"offscreen_indicators--overlay--pNOlw",style:s},!!t?.length&&o.createElement("div",null,t.map((t,n)=>{let a=(0,sF.Z0)(e,{x:t.bounds.x,y:t.bounds.y}),r=(0,sF.Z0)(e,{x:t.bounds.x+t.bounds.width,y:t.bounds.y+t.bounds.height}),l={x:a.x,y:a.y,width:r.x-a.x,height:r.y-a.y};return l.x<f.x+f.width&&l.x+l.width>f.x&&l.y+l.height>f.y&&l.y<f.y+f.height?null:o.createElement(pj,{key:n,viewportBounds:b,viewportInfo:e,indicatorViewportBounds:l,selectionBoundsScaledWidth:function(e,t){let n=Math.max(e.x,t.x);return Math.max(Math.min(e.x+e.width,t.x+t.width)-n,10)}(l,b),selectionBoundsScaledHeight:function(e,t){let n=Math.max(e.y,t.y);return Math.max(Math.min(e.y+e.height,t.y+t.height)-n,10)}(l,b),selectionRegionType:t.regionType})})))))}function pj({viewportBounds:e,viewportInfo:t,indicatorViewportBounds:n,selectionBoundsScaledWidth:a,selectionBoundsScaledHeight:l,selectionRegionType:i}){let s=function(e,t){let n=0-t.x,a=0+e.width-t.x,o=0-t.y,r=0+e.height-t.y,l=Math.abs(n)<a?n:a,i=Math.abs(o)<r?o:r,s=n<0!=a<0,c=o<0!=r<0;return s&&c?Math.abs(l)<Math.abs(i)?{x:t.x+l,y:t.y}:{x:t.x,y:t.y+i}:!s&&c?{x:t.x+l,y:t.y}:s&&!c?{x:t.x,y:t.y+i}:{x:t.x+l,y:t.y+i}}(t,{x:n.x+n.width/2,y:n.y+n.height/2});s.x-=a/2,s.y-=l/2;let c=(0,r.d4)(e=>e.mirror?.appModel.showUi),d=(0,er.J2)((0,tb.UK)().renderRulers)&&c?pX:0,p=(0,em.GS)(),m=(0,tf.b)(),u=p&&!m,E=u?p$:pW,y=u?p$:pH,_=(0,tb.dP)()+E,g=(0,tb.qw)()+y,h=(0,eB.Ye)(),{isPropertiesPanelCollapsed:v}=(0,pF.iT)(),f=1+(c&&u&&!h?_+1:0)+d,b=Math.max(f,t.width-1-a-(c&&u&&!v?g+1:0)),S=1+d,T=Math.max(S,t.height-1-l-1),N=oM.Mi.bound(s,{min:{x:f,y:S},max:{x:b,y:T}}),I=n.y+n.height<e.y,P=n.y>e.y+e.height,C=n.x+n.width<e.x,A=n.x>e.x+e.width;N.x+=t.x,N.y+=t.y;let k=Math.min(t.width-2-(c&&u?g+_:0),a),w=Math.min(t.height-2,l);return o.createElement("div",{className:"offscreen_indicators--indicator---T9xk",style:{transform:`translate3D(${N.x}px, ${N.y}px, 0)`}},(I||P)&&o.createElement("div",{style:{position:"absolute",height:1.5,width:k,marginTop:P?w-1.5:0},className:eA()({[pz]:i===rB.fV.MIXED_OR_NO_SYMBOLS,[pY]:i===rB.fV.SYMBOLS_ONLY})}),(C||A)&&o.createElement("div",{style:{position:"absolute",left:0,height:w,width:1.5,marginLeft:A?k-1.5:0},className:eA()({[pz]:i===rB.fV.MIXED_OR_NO_SYMBOLS,[pY]:i===rB.fV.SYMBOLS_ONLY})}))}var pq=n(109176);let pZ=o.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,U.p8)("isReadOnly"),n=(0,r.d4)(e=>e.progressBarState),a=(0,U.p8)("loadingEmbeds"),m=(0,er.ut)(i.Ez5?.uiState().showCanvasSearch,!1),u=(0,el.Lk)(),E=(0,o.useRef)(null),y=(0,r.d4)(e=>e.userFlags),_=!!(0,s.kc)().internal_only_debug_tools||!!y.has_cursor_bot_onboarding_v2,g=(0,r.d4)(e=>e.openFile),h=g?g.key:"",v=(0,r.d4)(e=>e.universalInsertModal),f=(0,r.wA)();(0,q.Gb)(h),(0,eo.W)(),function(){let e=(0,a3.VW)(),t=(0,tX.ZC)(e?.guid),n=(0,U.p8)("activeUserAction");o.useEffect(()=>{(0,s.kc)().fragment_search_selection_suggest&&[i.QOV.DEFAULT,i.QOV.CLICKING_TO_CHANGE_SELECTION].includes(n)&&e?.guid!==t&&e&&(e.hasEnabledAnimatedPaint||e.isTopLevelFrame()||e.fills.some(e=>"IMAGE"===e.type))?(0,r4.iP)(r0.JT.FIND_INSPIRATION):e?.guid===t&&[i.QOV.DEFAULT,i.QOV.CLICKING_TO_CHANGE_SELECTION].includes(n)||(0,r4.KY)({actionToClear:r0.JT.FIND_INSPIRATION})},[e,n,t])}();let b=(0,en.BI)(),S=(0,j.l7)(),T=S?o.createElement(c.tH,{boundaryKey:"DevModeLeftPanel",fallback:c.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:l.eBU.DEVELOPER_TOOLS}},o.createElement(p.O,null)):o.createElement(sf,null);return o.createElement(ty,null,o.createElement(Z.ED,null),o.createElement(ip.sk,null,n.mode!==i.Oin.OFF&&o.createElement("div",{className:pq._q}),o.createElement(ts.pO,{initialFilterState:{currentPage:!1}},a.map(e=>o.createElement(tm._,{key:`loading-embed-${e}`,nodeId:e})),o.createElement(im.qn,null),o.createElement(pK.u,null),m&&o.createElement(sI.n,null),(0,s.kc)().ce_al_experiments_on&&o.createElement(sI.n,null),o.createElement(tp.GR,null),o.createElement(tp.bu,null),o.createElement(pu.J,null),o.createElement(im.XI,{commentsDetailContainerRef:E}),o.createElement(pQ,null),(0,s.kc)().cursor_bot&&_&&o.createElement(sT.S,null),o.createElement(iR,null),o.createElement(tc.J,null),o.createElement(sS.Nz,null),o.createElement("div",{ref:E}),!(0,et.T)()&&T,!t&&o.createElement(pi,null),o.createElement(td.G,null,S?null:o.createElement(o.Fragment,null,o.createElement(p0,null),!!b?.shouldOptimizeForIpadApp&&o.createElement(pL.K,null),!!b?.shouldOptimizeForIpadApp&&o.createElement(pV.t,null))),e&&o.createElement(sS.X5,null)),o.createElement(ei.A,{isFigjamEditor:!1,isDesignEditor:!0,isSlidesEditor:!1,openFile:g}),o.createElement(pm.l,{defaultViewTabsAvailable:!0,defaultViewAssetsTabVisible:!0}),v.showing&&o.createElement(c.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{f(d.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:c.H4.NONE_I_KNOW_WHAT_IM_DOING},o.createElement(pR.k,null))),u&&o.createElement(sN.K,{className:pq.PA},o.createElement(pM.s,null)))}),p0=o.memo(function(){let e=(0,r.d4)(e=>e.mirror.appModel),t=(0,U.ax)(),{topLevelMode:n}=e,a=(0,U.dH)();return(0,ea.z)({topLevelMode:i.lyf.PREVIEW,eventName:"Preview Mode Selection Changed",teamFilesOnly:!0}),o.useEffect(()=>{t&&n===i.lyf.PREVIEW&&a!==i.NLJ.COMMENTS&&(0,ee.NT)(i.FAf.INSPECT)},[t,n,a]),o.createElement(o.Fragment,null,o.createElement(id,null),o.createElement(p1,null))}),p1=o.memo(function(){return o.createElement(o.Fragment,null,o.createElement(es.p,null,o.createElement(ec.L,null)),o.createElement(es.p,{featureFlag:"starting_points_modal"},o.createElement(e2,null)),o.createElement(es.p,null,o.createElement(J,null)),o.createElement(es.p,null,o.createElement(pD.e,null)),o.createElement(es.p,null,o.createElement(tt,null)),o.createElement(es.p,null,o.createElement(ti,null)),o.createElement(es.p,{featureFlag:"mobile_prompt_sidebar_modal"},o.createElement(sR,null)),o.createElement(es.p,null,o.createElement(ef,null)),o.createElement(es.p,null,o.createElement(m.S,null)),o.createElement(es.p,null,o.createElement(px,null)))});function p2(){let[e,t]=(0,o.useState)(!1);return o.createElement(tu.c,{loadedCommentsProvider:!1},o.createElement(pU.v,{setShouldShowDragAndDropBorder:t,isDragTarget:!1},o.createElement(pZ,{shouldShowDragAndDropBorder:e})))}},511787:(e,t,n)=>{n.d(t,{f:()=>y});var a=n(411855),o=n(153234),r=n(572206),l=n(268537),i=n(163023),s=n(318812),c=n(298543),d=n(184837),p=n(820396),m=n(1715),u=n(590685),E=n(501191);function y({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:l,hide:p}=(0,s.BK)("expression-builder-create-variable"),m=a.useRef(null),y=o.rf(o.Pt(t,"createVariableDropdown"),"click",a.useCallback(()=>{1===e.length?f(e[0]):l()},[e,l])),[g,h]=a.useState(!1),v=a.useRef(null),f=e=>{let t=m.current?.getBoundingClientRect();t&&(v.current={initialPosition:new r.Mi(t.left,t.top),resolvedType:e},h(!0))},b=()=>{h(!1)};return a.createElement(a.Fragment,null,a.createElement("button",{ref:m,className:u.ZS,onClick:y},a.createElement(i.B,{svg:E.A})),g&&(g&&v.current?a.createElement(d.U,{initialPosition:v.current.initialPosition,initialWidth:d.i,resolvedType:v.current.resolvedType,onCreateVariable:b,onClose:b}):null),n&&m.current&&a.createElement(c.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:m.current.getBoundingClientRect()},e.map(e=>a.createElement(_,{key:e,resolvedType:e,onClose:p,showCreationModal:f,recordingKey:t}))))}function _({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:r}){let i=(0,m.F)(e),s=o.rf(o.Pt(r,"createVariableOption",i.name),"click",a.useCallback(()=>{n(e),t()},[t,e,n]));return a.createElement(l.c$,{className:u.Fs,onClick:s},a.createElement(p.i,{type:e,showTooltip:!1}),i.name)}}}]);

//# debugId=1606c3a1-581d-5dc5-a209-10774ce487ef

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c62611d6442eb78529419a8bef91bd335b637604/fullscreen_design-1f144d9ee25eb9d7.min.js.map